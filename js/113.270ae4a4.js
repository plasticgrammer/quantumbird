"use strict";(self["webpackChunkweekly_report"]=self["webpackChunkweekly_report"]||[]).push([[113],{7113:function(e,t,o){o.r(t),o.d(t,{default:function(){return v}});var n=o(689),r=o(9244),a=o(3960),l=o(8703),i=o(3374);const c={class:"scroll-navigation"},s={class:"nav-item"};var d={__name:"ScrollNavigation",props:{reportRefs:{type:Array,required:!0}},setup(e){const t=e,o=(0,n.ref)(0),d=(0,n.ref)(!1),u=(0,n.ref)(0),p=e=>e&&e.$el||e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"$el")?e.$el:e,v=e=>{let n=o.value+e;if(n>=0&&n<t.reportRefs.length){const e=p(t.reportRefs[n]);if(e&&"function"===typeof e.getBoundingClientRect){d.value=!0,u.value=Date.now();const t=e.getBoundingClientRect(),r=Math.max(0,window.scrollY+t.top-10);window.scrollTo({top:r,behavior:"smooth"}),setTimeout((()=>{o.value=n,setTimeout((()=>{d.value=!1}),1e3)}),500)}}},w=(e,t)=>{let o;return function(...n){const r=()=>{clearTimeout(o),e(...n)};clearTimeout(o),o=setTimeout(r,t)}},f=w((()=>{if(d.value||Date.now()-u.value<1e3)return;const e=window.innerHeight,n=window.scrollY+e/2;let r=-1,a=1/0;t.reportRefs.forEach(((e,t)=>{const o=p(e);if(o&&"function"===typeof o.getBoundingClientRect){const e=o.getBoundingClientRect(),l=e.top+e.height/2,i=Math.abs(l-n);i<a&&(a=i,r=t)}})),-1!==r&&r!==o.value&&(o.value=r)}),100),h=()=>{const e=document.activeElement;return e&&("textarea"===e.tagName.toLowerCase()||"input"===e.tagName.toLowerCase()&&"text"===e.type)},m=e=>{h()||("ArrowUp"===e.key?(e.preventDefault(),v(-1)):"ArrowDown"===e.key&&(e.preventDefault(),v(1)))};return(0,n.onMounted)((()=>{window.addEventListener("scroll",f),window.addEventListener("keydown",m),f()})),(0,n.onUnmounted)((()=>{window.removeEventListener("scroll",f),window.removeEventListener("keydown",m)})),(0,n.watch)((()=>t.reportRefs),(()=>{f()}),{deep:!0}),(t,d)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",c,[(0,n.createVNode)(i.y,{bottom:"","open-on-hover":!0,"open-on-focus":!0},{activator:(0,n.withCtx)((({props:e})=>[(0,n.createElementVNode)("div",(0,n.normalizeProps)((0,n.guardReactiveProps)(e)),[(0,n.createVNode)(r.D,{icon:"",elevation:"2",fab:"",small:"",tabindex:"-1",color:"blue-grey-lighten-4",readonly:0===o.value,"aria-label":"前のレポートへスクロール",onClick:d[0]||(d[0]=e=>v(-1))},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(l.wP,null,{default:(0,n.withCtx)((()=>d[2]||(d[2]=[(0,n.createTextVNode)("mdi-chevron-up")]))),_:1})])),_:1},8,["readonly"])],16)])),default:(0,n.withCtx)((()=>[d[3]||(d[3]=(0,n.createElementVNode)("span",null,"上矢印キーでも移動できます",-1))])),_:1}),(0,n.createElementVNode)("div",s,[(0,n.createVNode)(a.x,{variant:"text",color:"blue-grey",class:"position-chip","aria-label":`現在のレポート: ${o.value+1}/${e.reportRefs.length}`},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(o.value+1)+" / "+(0,n.toDisplayString)(e.reportRefs.length),1)])),_:1},8,["aria-label"])]),(0,n.createVNode)(i.y,{top:"","open-on-hover":!0,"open-on-focus":!0},{activator:(0,n.withCtx)((({props:t})=>[(0,n.createElementVNode)("div",(0,n.normalizeProps)((0,n.guardReactiveProps)(t)),[(0,n.createVNode)(r.D,{icon:"",elevation:"2",fab:"",small:"",tabindex:"-1",color:"blue-grey-lighten-4",readonly:o.value===e.reportRefs.length-1,"aria-label":"次のレポートへスクロール",onClick:d[1]||(d[1]=e=>v(1))},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(l.wP,null,{default:(0,n.withCtx)((()=>d[4]||(d[4]=[(0,n.createTextVNode)("mdi-chevron-down")]))),_:1})])),_:1},8,["readonly"])],16)])),default:(0,n.withCtx)((()=>[d[5]||(d[5]=(0,n.createElementVNode)("span",null,"下矢印キーでも移動できます",-1))])),_:1})]))}},u=o(6262);const p=(0,u.A)(d,[["__scopeId","data-v-8a6ff302"]]);var v=p}}]);
//# sourceMappingURL=113.270ae4a4.js.map