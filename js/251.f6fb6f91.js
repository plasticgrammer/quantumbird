"use strict";(self["webpackChunkweekly_report"]=self["webpackChunkweekly_report"]||[]).push([[251],{3279:function(e,t,a){a.d(t,{A:function(){return f}});var r=a(689),i=a(3571),l=a(5350);const o={class:"chart-container"},n={class:"chart-wrapper"};var s={__name:"LineChart",props:{chartData:{type:Object,required:!0,validator:e=>!!(e&&Array.isArray(e.labels)&&Array.isArray(e.datasets))&&e.datasets.every((t=>t&&Array.isArray(t.data)&&t.data.length===e.labels.length))},options:{type:Object,default:()=>({})},isTop3:{type:Boolean,default:!0},averageOptions:{type:Object,default:()=>({})}},emits:["error"],setup(e,{emit:t}){const a=e,i=t,s=(0,r.ref)(null),c=(0,r.shallowRef)(null),d=(0,r.ref)(0);function u(e,t){i("error",{message:e,error:t})}function p(){c.value&&a.chartData&&((0,l.xT)({chart:c.value,chartData:a.chartData,isTop3:a.isTop3,options:a.options,averageOptions:a.averageOptions,onError:u}),d.value=a.chartData.datasets?.length||0)}return(0,r.onMounted)((()=>{const e=(0,l.il)(a.options);c.value=(0,l.uk)({chartRef:s.value,chartData:a.chartData,options:e,isTop3:a.isTop3,averageOptions:a.averageOptions,onError:u}),d.value=a.chartData.datasets?.length||0})),(0,r.onUnmounted)((()=>{c.value&&(c.value.destroy(),c.value=null)})),(0,r.watch)([()=>a.options,()=>a.chartData,()=>a.isTop3,()=>a.averageOptions],p,{deep:!0}),(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",o,[(0,r.createElementVNode)("div",n,[(0,r.createElementVNode)("canvas",{ref_key:"chartRef",ref:s,class:"chart-canvas"},null,512)])]))}},c=a(6262);const d=(0,c.A)(s,[["__scopeId","data-v-4e291d01"]]);var u=d,p=a(2799),h=a(5741),v={__name:"BaseChart",props:{widgetId:{type:String,required:!0},title:{type:String,required:!0},chartData:{type:Object,required:!0,default:()=>({labels:[],datasets:[]})},min:{type:Number,default:.8},max:{type:Number,default:5.2},yAxisConfig:{type:Object,required:!0}},setup(e){const t=e,a=(0,r.ref)(!0),l=(0,r.computed)((()=>({yAxis:{min:t.min,max:t.max,...t.yAxisConfig}}))),o=(0,r.computed)((()=>({useExponential:a.value,alpha:.3})));return(t,n)=>((0,r.openBlock)(),(0,r.createBlock)(i.A,{"widget-id":e.widgetId,title:e.title,icon:"mdi-chart-line"},{"header-append":(0,r.withCtx)((()=>[e.chartData.datasets?.length>3?(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createBlock)(p.a,{key:0,modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=e=>a.value=e),color:"blue-grey-lighten-3",density:"compact","hide-details":""},{label:(0,r.withCtx)((()=>n[1]||(n[1]=[(0,r.createElementVNode)("span",{class:"text-body-2"},"直近上位3件",-1)]))),_:1},8,["modelValue"])),[[h.m_,"直近のデータを重視して上位3件を表示","top"]]):(0,r.createCommentVNode)("",!0)])),default:(0,r.withCtx)((()=>[(0,r.createVNode)(u,{"chart-data":e.chartData,options:l.value,"is-top3":a.value,"average-options":o.value},null,8,["chart-data","options","is-top3","average-options"])])),_:1},8,["widget-id","title"]))}};const m=(0,c.A)(v,[["__scopeId","data-v-db2a41d0"]]);var f=m},4251:function(e,t,a){a.r(t),a.d(t,{default:function(){return n}});var r=a(689),i=a(3279),l={__name:"OvertimeChart",props:{widgetId:{type:String,required:!0},title:{type:String,required:!0},chartData:{type:Object,required:!0,default:()=>({labels:[],datasets:[]})},yAxisTitle:{type:String,default:"残業時間"}},setup(e){const t=e;function a(e){if(!e?.length)return 3;const t=e.flatMap((e=>e.data||[])).filter((e=>null!==e&&void 0!==e)).map((e=>Number(e))).filter((e=>!isNaN(e)));return 0===t.length?3:Math.max(3,Math.ceil(Math.max(...t)))}const l=(0,r.computed)((()=>a(t.chartData.datasets))),o=(0,r.computed)((()=>Math.max(1,Math.ceil(l.value/5)))),n=(0,r.computed)((()=>({ticks:{stepSize:o.value,precision:0,callback:function(e){return e+"h"}},title:{display:!0,text:t.yAxisTitle},afterDataLimits:e=>{e.max=a(t.chartData.datasets)}})));return(t,a)=>((0,r.openBlock)(),(0,r.createBlock)(i.A,{"widget-id":e.widgetId,title:e.title,"chart-data":e.chartData,min:0,max:l.value,"y-axis-config":n.value},null,8,["widget-id","title","chart-data","max","y-axis-config"]))}};const o=l;var n=o}}]);
//# sourceMappingURL=251.f6fb6f91.js.map