(function(){"use strict";var e={2635:function(e,t,a){a.d(t,{_:function(){return l}});a(4114);var o=a(689);const l=()=>{const e=864e5,t=["日","月","火","水","木","金","土"],a=(0,o.computed)((()=>l(6))),l=e=>{const t=[],a=new Date;a.setHours(0,0,0,0);let o=new Date(a.getFullYear(),a.getMonth(),a.getDate()-7*(e-1));o.setDate(o.getDate()-(o.getDay()+6)%7);for(let l=0;l<e;l++){const a=new Date(o);t.push(r(a,l-e+1)),o.setDate(o.getDate()+7)}return t},r=(t,a)=>{const o=Array.from({length:7},((a,o)=>new Date(t.getTime()+o*e))),l=new Date(t.getTime()+6*e);return l.setHours(23,59,59,999),{startDate:t,endDate:l,weekOffset:a,days:o}},n=(()=>{const t=new Date,a=new Date(t);return a.setDate(t.getDate()-t.getDay()+(0===t.getDay()?-6:1)),a.setHours(0,0,0,0),t=>{const o=new Date(t);o.setHours(0,0,0,0);const l=o.getTime()-a.getTime();return Math.floor(l/(7*e))}})(),i=e=>{if(!e?.startDate||!e?.endDate)return!1;const t=new Date;t.setHours(0,0,0,0);const a=new Date(t);a.setDate(t.getDate()-35);const o=new Date(a);o.setDate(a.getDate()-a.getDay()+(0===a.getDay()?-6:1)),o.setHours(0,0,0,0);const l=new Date(t),r=7-t.getDay();return l.setDate(t.getDate()+r),l.setHours(23,59,59,999),e.startDate>=o&&e.endDate<=l},c=e=>{const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),a=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-a);const o=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t-o)/864e5+1)/7)},s=(e,t,a)=>1===e.getDate()||0===t&&0===a,d=e=>e.toLocaleDateString("ja-JP",{month:"short"}),u=(()=>{const e=new Date;e.setHours(0,0,0,0);const t=e.getTime();return e=>e.getTime()===t})(),m=e=>6===e.getDay(),p=e=>0===e.getDay(),f=e=>{const t=new Date(e.startDate);t.setDate(t.getDate()+3);const a=t.getFullYear(),o=c(t);return`${a}-W${o.toString().padStart(2,"0")}`},v=e=>{const[t,a]=e.split("-W").map(Number),o=new Date(t,0,4),l=new Date(o);l.setDate(o.getDate()-o.getDay()+(0===o.getDay()?-6:1));const i=new Date(l);i.setDate(l.getDate()+7*(a-1));const c=new Date(i);return c.setHours(0,0,0,0),r(c,n(c))},g=e=>{if(!e)return f(a.value[a.value.length-2]);const[t,o]=e.split("-W").map(Number),l=new Date(t,0,4);l.setDate(l.getDate()+7*(o-1)),l.setDate(l.getDate()-7);const r=l.getFullYear(),n=c(l);return`${r}-W${n.toString().padStart(2,"0")}`},h=()=>f(a.value[a.value.length-1]),w=e=>0===e?"今週":-1===e?"先週":1===e?"来週":e<0?`${Math.abs(e)}週前`:`${e}週後`,k=e=>{if(!(e instanceof Date)||isNaN(e))return"";const a=e.getFullYear(),o=e.getMonth()+1,l=e.getDate(),r=t[e.getDay()],n=e.getHours().toString().padStart(2,"0"),i=e.getMinutes().toString().padStart(2,"0");return`${a}/${o}/${l} (${r}) ${n}:${i}`},V=e=>{const t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getDate().toString().padStart(2,"0");return`${t}/${a}/${o}`},y=e=>{const t=V(e),a=e.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"});return`${t} ${a}`},x=e=>{const t={year:"numeric",month:"long",day:"numeric"};return`${e.startDate.toLocaleDateString("ja-JP",t)} - ${e.endDate.toLocaleDateString("ja-JP",t)}`},N=e=>{if(!e)return"";const[t,a]=e.split("-W");return`${t}年${a}週`};return{calendarWeeks:a,createWeeks:l,isWeekInRange:i,getWeekNumber:c,formatShortMonth:d,isToday:u,isSaturday:m,isSunday:p,shouldShowMonth:s,getStringFromWeek:f,getWeekFromString:v,getPreviousWeekString:g,getCurrentWeekString:h,getWeekJpText:w,formatDateJp:V,formatDateTimeJp:y,formatFullDateTimeJp:k,formatDateRange:x,formatWeekLabel:N}}},2471:function(e,t,a){a.d(t,{Q:function(){return r}});var o=a(689),l=a(7768);function r(){const{smAndDown:e,width:t}=(0,l._F)(),a=(0,o.computed)((()=>t.value<640)),r=(0,o.computed)((()=>t.value>=640&&t.value<1024)),n=(0,o.computed)((()=>t.value>=1024));return{isMobile:a,isTablet:r,isDesktop:n,smAndDown:e}}},6211:function(e,t,a){a.d(t,{Ec:function(){return n},If:function(){return u},Rt:function(){return f},VJ:function(){return i},fk:function(){return c},wu:function(){return m},x0:function(){return d},x7:function(){return p}});const o=!0;function l(){if(!o){const e={VUE_APP_AWS_REGION:"ap-northeast-1",VUE_APP_FIREBASE_API_KEY:"AIzaSyAxggCyq9kG85KgqxRyHTBA4LeZ73K_wFY",VUE_APP_COGNITO_DOMAIN:"https://fluxweek.auth.ap-northeast-1.amazoncognito.com",VUE_APP_STAGE:"prod",VUE_APP_PUBLIC_PATH:"/quantumbird/",VUE_APP_API_ENDPOINT:"https://cuk7ajid2e.execute-api.ap-northeast-1.amazonaws.com",VUE_APP_STRIPE_PUBLISHABLE_KEY:"pk_live_51QHQHGJlLYAT4bpzDkO3xlMNRFulS3FfwANFbrOXzlejkQVqEXZEAKus9vC8UYxhYGyt8KRklGkKqRGGMT9umz7h00oyAPHjf2",VUE_APP_USER_POOL_ID:"ap-northeast-1_bBaqROOm5",VUE_APP_USER_POOL_WEB_CLIENT_ID:"bj5b62c44ur0drn8jc7isk0sm",NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_PORT||{VUE_APP_AWS_REGION:"ap-northeast-1",VUE_APP_FIREBASE_API_KEY:"AIzaSyAxggCyq9kG85KgqxRyHTBA4LeZ73K_wFY",VUE_APP_COGNITO_DOMAIN:"https://fluxweek.auth.ap-northeast-1.amazoncognito.com",VUE_APP_STAGE:"prod",VUE_APP_PUBLIC_PATH:"/quantumbird/",VUE_APP_API_ENDPOINT:"https://cuk7ajid2e.execute-api.ap-northeast-1.amazonaws.com",VUE_APP_STRIPE_PUBLISHABLE_KEY:"pk_live_51QHQHGJlLYAT4bpzDkO3xlMNRFulS3FfwANFbrOXzlejkQVqEXZEAKus9vC8UYxhYGyt8KRklGkKqRGGMT9umz7h00oyAPHjf2",VUE_APP_USER_POOL_ID:"ap-northeast-1_bBaqROOm5",VUE_APP_USER_POOL_WEB_CLIENT_ID:"bj5b62c44ur0drn8jc7isk0sm",NODE_ENV:"production",BASE_URL:"/"}.PORT||8080;return`http://localhost:${e}/`}return`${window.location.protocol}//${window.location.host}/`}function r(){const{protocol:e,host:t}=window.location;return`${e}//${t}`}l();const n=r(),i="/",c="https://forms.gle/suRGEcRXE33xvFu19",s=o?{VUE_APP_AWS_REGION:"ap-northeast-1",VUE_APP_FIREBASE_API_KEY:"AIzaSyAxggCyq9kG85KgqxRyHTBA4LeZ73K_wFY",VUE_APP_COGNITO_DOMAIN:"https://fluxweek.auth.ap-northeast-1.amazoncognito.com",VUE_APP_STAGE:"prod",VUE_APP_PUBLIC_PATH:"/quantumbird/",VUE_APP_API_ENDPOINT:"https://cuk7ajid2e.execute-api.ap-northeast-1.amazonaws.com",VUE_APP_STRIPE_PUBLISHABLE_KEY:"pk_live_51QHQHGJlLYAT4bpzDkO3xlMNRFulS3FfwANFbrOXzlejkQVqEXZEAKus9vC8UYxhYGyt8KRklGkKqRGGMT9umz7h00oyAPHjf2",VUE_APP_USER_POOL_ID:"ap-northeast-1_bBaqROOm5",VUE_APP_USER_POOL_WEB_CLIENT_ID:"bj5b62c44ur0drn8jc7isk0sm",NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_STATIC_URL||"":n,d=`${s}/legal/terms-of-service.html`,u="1.02",m=`${s}/legal/privacy-policy.html`,p="1.02",f=`${s}/legal/specified-commercial-transactions.html`},1126:function(e,t,a){a.d(t,{P8:function(){return s},vw:function(){return i},zN:function(){return c}});var o=a(3652),l=a(1059);const r={VUE_APP_AWS_REGION:"ap-northeast-1",VUE_APP_FIREBASE_API_KEY:"AIzaSyAxggCyq9kG85KgqxRyHTBA4LeZ73K_wFY",VUE_APP_COGNITO_DOMAIN:"https://fluxweek.auth.ap-northeast-1.amazoncognito.com",VUE_APP_STAGE:"prod",VUE_APP_PUBLIC_PATH:"/quantumbird/",VUE_APP_API_ENDPOINT:"https://cuk7ajid2e.execute-api.ap-northeast-1.amazonaws.com",VUE_APP_STRIPE_PUBLISHABLE_KEY:"pk_live_51QHQHGJlLYAT4bpzDkO3xlMNRFulS3FfwANFbrOXzlejkQVqEXZEAKus9vC8UYxhYGyt8KRklGkKqRGGMT9umz7h00oyAPHjf2",VUE_APP_USER_POOL_ID:"ap-northeast-1_bBaqROOm5",VUE_APP_USER_POOL_WEB_CLIENT_ID:"bj5b62c44ur0drn8jc7isk0sm",NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_STRIPE_PRO_PRICE_ID,n={VUE_APP_AWS_REGION:"ap-northeast-1",VUE_APP_FIREBASE_API_KEY:"AIzaSyAxggCyq9kG85KgqxRyHTBA4LeZ73K_wFY",VUE_APP_COGNITO_DOMAIN:"https://fluxweek.auth.ap-northeast-1.amazoncognito.com",VUE_APP_STAGE:"prod",VUE_APP_PUBLIC_PATH:"/quantumbird/",VUE_APP_API_ENDPOINT:"https://cuk7ajid2e.execute-api.ap-northeast-1.amazonaws.com",VUE_APP_STRIPE_PUBLISHABLE_KEY:"pk_live_51QHQHGJlLYAT4bpzDkO3xlMNRFulS3FfwANFbrOXzlejkQVqEXZEAKus9vC8UYxhYGyt8KRklGkKqRGGMT9umz7h00oyAPHjf2",VUE_APP_USER_POOL_ID:"ap-northeast-1_bBaqROOm5",VUE_APP_USER_POOL_WEB_CLIENT_ID:"bj5b62c44ur0drn8jc7isk0sm",NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_STRIPE_BUSINESS_PRICE_ID,i=[{planId:"free",priceId:"price_free",name:"フリープラン",price:0,features:["利用制限あり（報告通知など）","メンバー数最大３名","基本AIアドバイザーのみ"],adminFeatures:{maxMembers:3,notifications:!1,advisorSettings:!1,accountManagement:!1},organizationFeatures:{weeklyReportAdvice:!0,notifyByEmail:!1,notifySubscriptions:{},advisors:l.XG}},{planId:"pro",priceId:r,name:"プロプラン",price:1e3,features:["基本機能が使用可","メンバー数最大１０名","全てのAIアドバイザー"],adminFeatures:{maxMembers:10,notifications:!0,advisorSettings:!0,accountManagement:!1},organizationFeatures:{weeklyReportAdvice:!0}},{planId:"business",priceId:n,name:"ビジネスプラン",price:2e3,pricePerAccount:500,getPrice:e=>2e3+500*e,priceDescription:["+ ¥500/アカウント"],features:["基本機能が使用可","メンバー数無制限","全てのAIアドバイザー","アカウント管理機能"],adminFeatures:{maxMembers:-1,notifications:!0,advisorSettings:!0,accountManagement:!0},organizationFeatures:{weeklyReportAdvice:!0}}],c=()=>o.A.getters["auth/currentSubscription"],s=()=>{const e=o.A.getters["auth/parentOrganizationId"];if(e)return i.find((e=>"business"===e.planId));const t=c(),a=t?.planId||"free";return i.find((e=>e.planId===a))||i[0]}},8192:function(e,t,a){var o=a(689),l=(a(4114),a(4603),a(7566),a(8721),a(4348)),r="data:image/png;base64,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",n=a(5220),i=a(834),c=a(2471),s=a(6211),d=a(1126),u=a(9244),m=a(1652),p=a(8703),f=a(9663),v=a(426);const g={class:"user-menu-wrapper"},h={class:"mr-n2"};var w={__name:"UserMenu",props:{bgColor:{type:String,default:"menu"},mobile:{type:Boolean,default:!1}},emits:["sign-out","close"],setup(e,{emit:t}){const a=(0,o.inject)("showNotification"),l=t,r=(0,i.Pj)(),c=(0,n.rd)(),w=(0,o.ref)(!1),k=(0,o.ref)(!1),V=(0,o.computed)((()=>({organizationId:r.getters["auth/organizationId"],username:r.getters["auth/name"],email:r.getters["auth/email"]}))),y=(0,o.computed)((()=>(0,d.P8)())),x=(0,o.computed)((()=>r.getters["auth/isParentAccount"])),N=()=>{c.push({name:"AccountSetting"})},b=()=>{window.open(s.fk,"_blank","noopener,noreferrer")},C=()=>{window.open(s.x0,"_blank","noopener,noreferrer")},_=()=>{window.open(s.wu,"_blank","noopener,noreferrer")},E=()=>{window.open(s.Rt,"_blank","noopener,noreferrer")},B=(0,o.computed)((()=>[{prependIcon:"mdi-comment-quote-outline",title:"フィードバック",onClick:b},{prependIcon:"mdi-file-document-outline",title:"利用規約",onClick:C},{prependIcon:"mdi-shield-account-outline",title:"プライバシーポリシー",onClick:_},{prependIcon:"mdi-shopping-outline",title:"特定商取引法に基づく表記",onClick:E}])),A=()=>{l("sign-out")},S=e=>{w.value=e,e||l("close")},I=()=>{x.value?c.push({name:"Billing"}):a("支払い設定は親アカウントでのみ変更可能です。","warning")};return(t,a)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",g,[(0,o.createVNode)(f.x8,{nav:"",role:"menu"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f.gc,{title:V.value.email,subtitle:V.value.organizationId,class:"dense-list-item cursor-pointer","prepend-icon":"mdi-account-circle"},{append:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",h,[(0,o.createVNode)(p.wP,{icon:w.value?"mdi-chevron-up":"mdi-chevron-down",color:"grey-lighten-1"},null,8,["icon"])])])),_:1},8,["title","subtitle"])])),_:1}),(0,o.createVNode)(v.q,{modelValue:w.value,"onUpdate:modelValue":[a[1]||(a[1]=e=>w.value=e),S],activator:"parent",location:"top",onFocus:a[2]||(a[2]=e=>w.value=!0)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f.x8,{nav:"",role:"menu",class:"brightness120","bg-color":e.bgColor},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f.gc,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f.UZ,{class:"text-body-2 py-2 opacity-80"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",null,(0,o.toDisplayString)(V.value.email),1),(0,o.createVNode)(u.D,{"prepend-icon":"mdi-wallet-membership",class:(0,o.normalizeClass)({"px-2":!e.mobile}),variant:"plain",onClick:I},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(y.value.name),1)])),_:1},8,["class"])])),_:1})])),_:1}),(0,o.createVNode)(m.G),(0,o.createVNode)(f.gc,{"prepend-icon":"mdi-cog-outline",title:"アカウント設定",link:"",onClick:N}),e.mobile?((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,{key:0},(0,o.renderList)(B.value,(e=>((0,o.openBlock)(),(0,o.createBlock)(f.gc,(0,o.mergeProps)({key:e.title,ref_for:!0},e,{link:"",onClick:e.onClick}),null,16,["onClick"])))),128)):((0,o.openBlock)(),(0,o.createBlock)(f.gc,{key:1,"prepend-icon":"mdi-help-circle-outline",title:"ヘルプとサポート"},{append:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{icon:"mdi-chevron-right"})])),default:(0,o.withCtx)((()=>[(0,o.createVNode)(v.q,{modelValue:k.value,"onUpdate:modelValue":a[0]||(a[0]=e=>k.value=e),activator:"parent",location:"right","open-on-hover":"","close-delay":300,"open-delay":100},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f.x8,{class:"pa-0 brightness120","bg-color":e.bgColor},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(B.value,(e=>((0,o.openBlock)(),(0,o.createBlock)(f.gc,(0,o.mergeProps)({key:e.title,ref_for:!0},e,{link:"",onClick:e.onClick}),null,16,["onClick"])))),128))])),_:1},8,["bg-color"])])),_:1},8,["modelValue"])])),_:1})),(0,o.createVNode)(f.gc,{"prepend-icon":"mdi-logout-variant",title:"サインアウト",onClick:A})])),_:1},8,["bg-color"])])),_:1},8,["modelValue"])]))}},k=a(6262);const V=(0,k.A)(w,[["__scopeId","data-v-18c3125c"]]);var y=V,x=a(1552),N=a(621),b=a(1689),C=a(7289),_=a(5060),E=a(6023),B=a(5741);const A={key:0,class:"wave-container"},S={class:"text-subtitle-1 d-flex align-center py-1"},I={key:0,class:"content-wrapper"};var D={__name:"App",setup(e){const t=(0,o.defineAsyncComponent)((()=>a.e(453).then(a.bind(a,1453)))),s=(0,o.defineAsyncComponent)((()=>a.e(110).then(a.bind(a,1110)))),v=(0,o.defineAsyncComponent)((()=>a.e(417).then(a.bind(a,3417)))),g=(0,o.defineAsyncComponent)((()=>a.e(92).then(a.bind(a,9092)))),h=(0,n.rd)(),w=(0,i.Pj)(),{isMobile:k}=(0,c.Q)(),V=(0,o.computed)((()=>(0,d.P8)())),D=(0,o.computed)((()=>{const e=[{icon:"mdi-view-dashboard",title:"ダッシュボード",value:"Dashboard",route:{name:"Dashboard"}},{icon:"mdi-calendar-multiple-check",title:"週次報告レビュー",value:"WeeklyReview",route:{name:"WeeklyReviewSelector"}},{icon:"mdi-calendar-clock",title:"週次報告設定",value:"ReportSetting",route:{name:"ReportSetting"}},{icon:"mdi-domain",title:"組織情報管理",value:"Organization",route:{name:"OrganizationManagement"}}];return V.value.adminFeatures.accountManagement&&w.getters["auth/isParentAccount"]&&e.push({icon:"mdi-account-cog",title:"組織アカウント管理",value:"OrganizationAccount",route:{name:"OrganizationAccount"}}),e})),T=(0,o.ref)(null),P=(0,o.ref)(!0),O=(0,o.ref)(!0),U=(0,o.ref)(!1),R=(0,o.ref)(!0),z=(0,o.ref)(!0),M=(0,o.ref)(!0),W=(0,o.ref)(!1),L=(0,o.ref)(!1),j=(0,o.ref)(!1),q=(0,o.ref)(!1),F=(0,o.ref)(!0),H=(0,o.computed)((()=>w.getters["auth/isAuthenticated"])),G=(0,o.ref)(!1);h.beforeEach(((e,t,a)=>{R.value=!e.meta.hideAnimation,z.value=!e.meta.hideMascot,M.value=!e.meta.hideNavigation,a()}));const Z=(0,o.computed)((()=>!k.value&&O.value&&!(U.value||L.value))),Q=(0,o.computed)((()=>Z.value?56:255)),J=(0,o.computed)((()=>({paddingBottom:(h.currentRoute.value.meta.hideAnimation?30:260)+"px"}))),K=(0,o.computed)((()=>({marginLeft:(k.value||h.currentRoute.value.meta.hideNavigation?20:20+Q.value/2)+"px !important",bottom:(k.value?30:-10)+"px !important"}))),Y=()=>{O.value=!O.value,U.value=!1},X=(0,o.reactive)({show:!1,type:"success",message:""}),$=(0,o.computed)((()=>{switch(X.type){case"success":return"mdi-check-circle";case"error":return"mdi-alert-circle";case"warning":return"mdi-alert";case"info":return"mdi-information";default:return"mdi-bell"}})),ee=(0,o.computed)((()=>{switch(X.type){case"error":return"error";case"warning":return"warning";default:return"info"}})),te=(e,t,a=!1)=>{X.show=!0,X.type=t||"success",X.message=e},ae=(e,t)=>{te(e,"error",t)},oe=()=>{X.show=!1},le=async(e,t,a="primary")=>{if(!T.value)return!1;try{return await T.value.open(e,t,a)}catch(o){return!1}};(0,o.provide)("showConfirmDialog",le),(0,o.provide)("showNotification",te),(0,o.provide)("showError",ae);const re=(e,t={})=>{h.push({...e,params:{...e.params,...t}}),k.value&&(P.value=!1)},ne=async()=>{if(H.value)try{const{needsTosAcceptance:e,needsPrivacyPolicyAcceptance:t}=await w.dispatch("auth/checkPolicyAcceptance");j.value=e,q.value=t,(e||t)&&(W.value=!0)}catch(e){ae("ポリシーの確認に失敗しました。")}finally{F.value=!1}else F.value=!1},ie=async()=>{try{await w.dispatch("auth/updatePolicyAcceptance",{tosAccepted:j.value,privacyPolicyAccepted:q.value}),W.value=!1,j.value=!1,q.value=!1,te("ポリシーの同意が更新されました。","success")}catch(e){ae("ポリシーの更新に失敗しました。再度お試しください。")}},ce=async()=>{try{await w.dispatch("auth/signOut"),W.value=!1,h.push({name:"SignIn"})}catch(e){}},se=async()=>{try{await w.dispatch("auth/signOut"),h.push({name:"SignIn"})}catch(e){}};(0,o.watch)(H,(e=>{e?ne():(F.value=!1,W.value=!1,j.value=!1,q.value=!1)})),(0,o.onMounted)((()=>{const e=new Image;e.src=new URL(a(4348),a.b).href;const t=localStorage.getItem("railMode");O.value=null===t||JSON.parse(t),ne()})),(0,o.watch)(O,(e=>{localStorage.setItem("railMode",JSON.stringify(e))}));const de=(0,o.computed)((()=>h.currentRoute.value.meta.fullWidth||!1));return(e,a)=>{const n=(0,o.resolveComponent)("router-view");return(0,o.openBlock)(),(0,o.createBlock)(x.E,{id:"main","aria-label":"Main application"},{default:(0,o.withCtx)((()=>[R.value?((0,o.openBlock)(),(0,o.createElementBlock)("div",A,[a[9]||(a[9]=(0,o.createElementVNode)("div",{class:"wave"},null,-1)),a[10]||(a[10]=(0,o.createElementVNode)("div",{class:"wave"},null,-1)),!(0,o.unref)(k)&&z.value?((0,o.openBlock)(),(0,o.createBlock)(b.y,{key:0,src:l,width:"340",class:"on-wave mx-auto",style:(0,o.normalizeStyle)(K.value),alt:"Cute sea otter mascot floating on waves",loading:"lazy"},null,8,["style"])):(0,o.createCommentVNode)("",!0)])):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(E.K,{modelValue:X.show,"onUpdate:modelValue":a[0]||(a[0]=e=>X.show=e),color:ee.value,timeout:5e3,location:"top","max-width":"960px",width:`calc(100vw - ${Q.value+20}px)`,class:"custom-snackbar",role:"alert","aria-live":"assertive"},{actions:(0,o.withCtx)((()=>[(0,o.createVNode)(u.D,{color:"white",variant:"text",icon:"mdi-close","aria-label":"Close notification",onClick:oe})])),default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",S,[(0,o.createVNode)(p.wP,{icon:$.value,class:"mr-2",color:"white","aria-hidden":"true"},null,8,["icon"]),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(X.message),1)])])),_:1},8,["modelValue","color","width"]),M.value?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.unref)(k)?((0,o.openBlock)(),(0,o.createBlock)(N.i,{key:1,"bg-color":"menu",class:"d-print-none",grow:"",role:"navigation","aria-label":"Mobile navigation"},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(D.value,(e=>((0,o.openBlock)(),(0,o.createBlock)(u.D,{key:e.value,value:e.value,"aria-label":e.title,class:"pb-3",onClick:t=>re(e.route)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{size:"x-large","aria-hidden":"true"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.icon),1)])),_:2},1024)])),_:2},1032,["value","aria-label","onClick"])))),128)),(0,o.createVNode)(u.D,{value:"user-menu","aria-label":"ユーザーメニュー",class:"pb-3",onClick:a[6]||(a[6]=e=>G.value=!0)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{size:"x-large","aria-hidden":"true"},{default:(0,o.withCtx)((()=>a[11]||(a[11]=[(0,o.createTextVNode)(" mdi-account-circle ")]))),_:1})])),_:1})])),_:1})):((0,o.openBlock)(),(0,o.createBlock)(_.e,{key:0,modelValue:P.value,"onUpdate:modelValue":a[3]||(a[3]=e=>P.value=e),rail:Z.value,permanent:"",location:"left",width:255,color:"menu",class:"navigation-drawer d-print-none","aria-label":"Main navigation",onMouseenter:a[4]||(a[4]=e=>U.value=!0),onMouseleave:a[5]||(a[5]=e=>U.value=!1)},{append:(0,o.withCtx)((()=>[(0,o.createVNode)(m.G),(0,o.createVNode)(y,{onSignOut:se,onClose:a[2]||(a[2]=e=>L.value=!1)})])),default:(0,o.withCtx)((()=>[(0,o.createVNode)(f.x8,{role:"menu"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f.gc,{class:"dense-list-item pr-2"},{prepend:(0,o.withCtx)((()=>[(0,o.withDirectives)((0,o.createVNode)(p.wP,{icon:"mdi-menu",class:"opacity-100 mr-1 my-3",role:"button","aria-label":"Toggle drawer mode",tabindex:"0",onClick:Y},null,512),[[B.n0]])])),append:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{icon:O.value?"mdi-format-horizontal-align-right":"mdi-format-horizontal-align-left",role:"button","aria-label":O.value?"Expand drawer":"Collapse drawer",tabindex:"0",onClick:Y},null,8,["icon","aria-label"])])),default:(0,o.withCtx)((()=>[(0,o.createVNode)(f.UZ,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(b.y,{src:r,class:"cursor-pointer mr-2",alt:"application logo",role:"link","aria-label":"Go to Overview",tabindex:"0",loading:"lazy",onClick:a[1]||(a[1]=e=>re({name:"Overview"}))})])),_:1})])),_:1})])),_:1}),(0,o.createVNode)(m.G),(0,o.createVNode)(f.x8,{nav:"",role:"menu"},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(D.value,(e=>((0,o.openBlock)(),(0,o.createBlock)(f.gc,{key:e.value,"prepend-icon":e.icon,value:e.value,role:"menuitem","aria-label":e.title,onClick:t=>re(e.route)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f.UZ,{class:"pl-2"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.title),1)])),_:2},1024)])),_:2},1032,["prepend-icon","value","aria-label","onClick"])))),128))])),_:1})])),_:1},8,["modelValue","rail"])),(0,o.createVNode)((0,o.unref)(g),{modelValue:G.value,"onUpdate:modelValue":a[7]||(a[7]=e=>G.value=e),onSignOut:se},null,8,["modelValue"])],64)):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(C.Y,{id:"main-content",class:(0,o.normalizeClass)({noshift:Z.value}),style:(0,o.normalizeStyle)(J.value),role:"main"},{default:(0,o.withCtx)((()=>[de.value?((0,o.openBlock)(),(0,o.createBlock)(n,{key:1})):((0,o.openBlock)(),(0,o.createElementBlock)("div",I,[(0,o.createVNode)(n)]))])),_:1},8,["class","style"]),(0,o.createVNode)((0,o.unref)(t),{ref_key:"confirmDialog",ref:T},null,512),(0,o.createVNode)((0,o.unref)(s),{style:(0,o.normalizeStyle)(K.value)},null,8,["style"]),(0,o.createVNode)((0,o.unref)(v),{modelValue:W.value,"onUpdate:modelValue":a[8]||(a[8]=e=>W.value=e),"needs-tos-acceptance":j.value,"needs-privacy-policy-acceptance":q.value,onAccept:ie,onDisaccept:ce},null,8,["modelValue","needs-tos-acceptance","needs-privacy-policy-acceptance"])])),_:1})}}};const T=(0,k.A)(D,[["__scopeId","data-v-ddac534e"]]);var P=T,O=a(3652),U=a(4559),R=a(3704);const z=e=>{const t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)};function M(e){const t=(new TextEncoder).encode(e),a=4*Math.ceil(t.length/3);return 10+a}const W={circled:/[㈱㈲㈳㈴㈵㈶㈷㈸㈹㈺㈻㈼㈽㈾㈿]/,romanNumerals:/[ⅠⅡⅢⅣⅤⅥⅦⅧⅨⅩⅪⅫⅰⅱⅲⅳⅴⅵⅶⅷⅸⅹⅺⅻ]/,enclosed:/[①②③④⑤⑥⑦⑧⑨⑩⑪⑫⑬⑭⑮⑯⑰⑱⑲⑳❶❷❸❹❺❻❼❽❾❿⓫⓬⓭⓮⓯⓰⓱⓲⓳⓴]/,deviceDependent:/[℡№℃℉]/};function L(e){if("string"!==typeof e)return{isValid:!1,message:"送信者名は文字列で入力してください"};for(let l=0;l<e.length;l++){const t=e.charCodeAt(l);if(t<32||127===t)return{isValid:!1,message:"送信者名に制御文字は使用できません"}}for(const[,l]of Object.entries(W))if(l.test(e)){const t=e.match(l).join(" ");return{isValid:!1,message:`送信者名に使用できない文字が含まれています（${t}）。これらの文字はメール送信時に問題が発生する可能性があります。`}}const t=/(?<!\\)[()[\]<>;:,\\]/;if(t.test(e))return{isValid:!1,message:"送信者名に使用できない特殊文字が含まれています（()[]<>;:,\\）"};const a=/(?<!\\)"/;if(a.test(e))return{isValid:!1,message:'送信者名にエスケープされていない二重引用符（"）は使用できません'};const o=M(e);return o>75?{isValid:!1,message:"送信者名が長すぎます（エンコード後約30文字以内）"}:{isValid:!0,message:""}}const j=e=>e?e.length<3?"組織IDは3文字以上で入力してください":e.length>20?"組織IDは20文字以下で入力してください":/^[a-zA-Z0-9_-]+$/.test(e)||"組織IDは英数字、ハイフン、アンダースコアのみで入力してください":"組織IDは必須です";var q=a(9660),F=a(3725),H=a(2799),G=a(4473),Z=a(9494),Q=a(7495);const J={class:"text-center mb-5"},K={key:0};var Y={__name:"SignIn",setup(e){const t=(0,n.rd)(),a=(0,i.Pj)(),l=(0,n.lq)(),r=(0,o.ref)("/signup"===l.path?"signUp":"signIn"),c=(0,o.ref)(""),d=(0,o.ref)(""),m=(0,o.ref)(""),f=(0,o.ref)(""),v=(0,o.ref)(""),g=(0,o.ref)(""),h=(0,o.ref)(""),w=(0,o.ref)(""),k=(0,o.ref)(""),V=(0,o.ref)(""),y=(0,o.ref)(!1),x=(0,o.ref)(""),N=(0,o.ref)(""),b=(0,o.ref)(null),C=(0,o.ref)(!1),_=(0,o.ref)(!1),E=(0,o.ref)(!1),B=(0,o.computed)((()=>{const e={signIn:"サインイン",signUp:"サインアップ",confirm:"確認コードの入力",changePassword:"パスワード変更"};return e[r.value]||""})),A=(0,o.computed)((()=>{const e={signIn:"アカウントを作成",signUp:"サインインに戻る",confirm:"サインインに戻る",changePassword:"サインインに戻る"};return e[r.value]||""})),S=(0,o.computed)((()=>C.value&&_.value)),I=()=>{N.value=""},D=async()=>{y.value=!0,N.value="",x.value="";try{const o=await(0,U.Jv)({username:c.value,password:d.value});if("CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED"===o.nextStep?.signInStep)return r.value="changePassword",sessionStorage.setItem("requiresNewPassword","true"),void sessionStorage.setItem("tempUsername",c.value);try{await a.dispatch("auth/fetchUser"),await t.push("/admin")}catch(e){if(e.message?.includes("NEW_PASSWORD_REQUIRED"))return void(r.value="changePassword");throw e}}catch(o){L(o)}finally{y.value=!1}},T=async()=>{N.value="";const{valid:e}=await b.value.validate();if(!e)return void(N.value="すべての必須フィールドを正しく入力してください。");if(!j(v.value))return void(N.value="組織IDは英数字のみで入力してください。");const t=await(0,R.SA)(v.value);t?N.value="この組織IDは既に使用されています。":await P()},P=async()=>{y.value=!0;try{const{user:e}=await(0,U.Hh)({username:m.value,password:f.value,options:{userAttributes:{email:m.value,name:m.value,"custom:organizationId":v.value,"custom:tos_version":s.If,"custom:pp_version":s.x7}}});h.value=m.value,r.value="confirm",x.value="確認コードを送信しました。メールをご確認ください。"}catch(e){N.value=e.message||"サインアップに失敗しました。入力内容を確認してください。"}finally{y.value=!1}},O=async()=>{y.value=!0,N.value="";try{await(0,U.z6)({username:h.value,confirmationCode:w.value});const e={organizationId:v.value,name:g.value,sender:"notify@fluxweek.com",senderName:g.value};await(0,R.Cl)(e),r.value="signIn",x.value="確認が完了しました。サインインしてください。"}catch(e){N.value="確認に失敗しました。コードを確認してください。"}finally{y.value=!1}},z=async()=>{y.value=!0,N.value="";try{await(0,U.hd)({username:h.value}),x.value="確認コードが再送信されました。メールをご確認ください。"}catch(e){N.value="確認コードの再送信に失敗しました。"}finally{y.value=!1}},M=async()=>{if(k.value===V.value){y.value=!0,N.value="";try{if("true"===sessionStorage.getItem("requiresNewPassword")){const e=sessionStorage.getItem("tempUsername");await(0,U.confirmSignIn)({challengeResponse:k.value,options:{userAttributes:{name:e}}}),await a.dispatch("auth/fetchUser"),await t.push("/admin")}else await a.dispatch("auth/updatePassword",{oldPassword:d.value,newPassword:k.value});sessionStorage.removeItem("requiresNewPassword"),sessionStorage.removeItem("tempUsername"),x.value="パスワードが正常に変更されました",r.value="signIn",k.value="",V.value="",d.value=""}catch(e){N.value=e.message||"パスワードの変更に失敗しました"}finally{y.value=!1}}else N.value="パスワードが一致しません"},W=async()=>{y.value=!0;try{await(0,U.CI)(),N.value="",E.value=!1,x.value="ログアウトしました。再度サインインしてください。"}catch(e){N.value="ログアウトに失敗しました。"}finally{y.value=!1}},L=e=>{const t={UserAlreadyAuthenticatedException:"既にサインインしています。一度サインアウトしてから再試行してください。",UserNotConfirmedException:"ユーザーアカウントが確認されていません。確認コードを入力してください。",NotAuthorizedException:"メールアドレスまたはパスワードが正しくありません。",UserNotFoundException:"このメールアドレスに対応するアカウントが見つかりません。",NewPasswordRequiredException:"初回ログインのため、パスワードの変更が必要です。",PasswordResetRequiredException:"パスワードのリセットが必要です。"};if("UserNotConfirmedException"===e.name)return h.value=c.value,r.value="confirm",void(N.value=t[e.name]);"NewPasswordRequiredException"===e.name||e.message?.includes("NEW_PASSWORD_REQUIRED")?r.value="changePassword":("UserAlreadyAuthenticatedException"===e.name&&(E.value=!0),N.value=t[e.name]||e.message||"サインインに失敗しました。入力内容を確認してください。")},Y=()=>{r.value="signIn"===r.value?"signUp":"signIn",N.value=""},X=()=>{window.open(s.x0,"_blank","noopener,noreferrer")},$=()=>{window.open(s.wu,"_blank","noopener,noreferrer")};return(e,t)=>{const a=(0,o.resolveComponent)("router-link");return(0,o.openBlock)(),(0,o.createBlock)(Z.IZ,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(F.Jn,{"max-width":"500",class:"mx-auto mt-6 px-4 rounded-lg"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(F.ri,{class:"mt-1 mb-4"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",J,[(0,o.createVNode)(a,{to:"/",class:"text-indigo-darken-2 text-decoration-none"},{default:(0,o.withCtx)((()=>t[14]||(t[14]=[(0,o.createElementVNode)("h1",{class:"logo-font"},"fluxweek",-1)]))),_:1})]),(0,o.createVNode)(p.wP,{size:"large",class:"mr-1"},{default:(0,o.withCtx)((()=>t[15]||(t[15]=[(0,o.createTextVNode)("mdi-bird")]))),_:1}),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(B.value),1)])),_:1}),(0,o.createVNode)(F.OQ,null,{default:(0,o.withCtx)((()=>[x.value?((0,o.openBlock)(),(0,o.createBlock)(q.l,{key:0,type:"success",class:"resultMessage mb-4",dismissible:"","onClick:close":t[0]||(t[0]=e=>x.value="")},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(x.value),1)])),_:1})):(0,o.createCommentVNode)("",!0),N.value?((0,o.openBlock)(),(0,o.createBlock)(q.l,{key:1,type:"error",class:"resultMessage mb-4",dismissible:"","onClick:close":t[1]||(t[1]=e=>N.value="")},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(N.value)+" ",1),E.value?((0,o.openBlock)(),(0,o.createElementBlock)("div",K,[(0,o.createVNode)(u.D,{color:"white",variant:"tonal",class:"mt-2",onClick:W},{default:(0,o.withCtx)((()=>t[16]||(t[16]=[(0,o.createTextVNode)(" ログアウトする ")]))),_:1})])):(0,o.createCommentVNode)("",!0)])),_:1})):(0,o.createCommentVNode)("",!0),"signIn"===r.value?((0,o.openBlock)(),(0,o.createBlock)(G.n,{key:2,onSubmit:(0,o.withModifiers)(D,["prevent"])},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Q.W,{modelValue:c.value,"onUpdate:modelValue":t[2]||(t[2]=e=>c.value=e),label:"メールアドレス",required:""},null,8,["modelValue"]),(0,o.createVNode)(Q.W,{modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=e=>d.value=e),label:"パスワード",type:"password",required:""},null,8,["modelValue"]),(0,o.createVNode)(u.D,{color:"primary",type:"submit",block:"",class:"mt-4",loading:y.value},{default:(0,o.withCtx)((()=>t[17]||(t[17]=[(0,o.createTextVNode)(" サインイン ")]))),_:1},8,["loading"])])),_:1})):"signUp"===r.value?((0,o.openBlock)(),(0,o.createBlock)(G.n,{key:3,ref_key:"signUpForm",ref:b,onSubmit:(0,o.withModifiers)(T,["prevent"])},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Q.W,{modelValue:m.value,"onUpdate:modelValue":t[4]||(t[4]=e=>m.value=e),label:"メールアドレス",type:"email",required:"",rules:[e=>!!e||"メールアドレスは必須です",e=>/.+@.+\..+/.test(e)||"有効なメールアドレスを入力してください"]},null,8,["modelValue","rules"]),(0,o.createVNode)(Q.W,{modelValue:f.value,"onUpdate:modelValue":t[5]||(t[5]=e=>f.value=e),label:"パスワード",type:"password",required:"",rules:[e=>!!e||"パスワードは必須です",e=>e.length>=8||"パスワードは8文字以上である必要があります"]},null,8,["modelValue","rules"]),(0,o.createVNode)(Q.W,{modelValue:v.value,"onUpdate:modelValue":t[6]||(t[6]=e=>v.value=e),label:"組織ID",required:"",rules:[(0,o.unref)(j)],onInput:I},null,8,["modelValue","rules"]),(0,o.createVNode)(Q.W,{modelValue:g.value,"onUpdate:modelValue":t[7]||(t[7]=e=>g.value=e),label:"組織名",required:"",rules:[e=>!!e||"組織名は必須です"]},null,8,["modelValue","rules"]),(0,o.createVNode)(H.a,{modelValue:C.value,"onUpdate:modelValue":t[8]||(t[8]=e=>C.value=e),label:"利用規約に同意する",required:"","hide-details":""},{label:(0,o.withCtx)((()=>[(0,o.createElementVNode)("span",null,[(0,o.createElementVNode)("a",{href:"#",onClick:(0,o.withModifiers)(X,["prevent"])},"利用規約"),t[18]||(t[18]=(0,o.createTextVNode)("に同意する "))])])),_:1},8,["modelValue"]),(0,o.createVNode)(H.a,{modelValue:_.value,"onUpdate:modelValue":t[9]||(t[9]=e=>_.value=e),label:"プライバシーポリシーに同意する",required:"","hide-details":""},{label:(0,o.withCtx)((()=>[(0,o.createElementVNode)("span",null,[(0,o.createElementVNode)("a",{href:"#",onClick:(0,o.withModifiers)($,["prevent"])},"プライバシーポリシー"),t[19]||(t[19]=(0,o.createTextVNode)("に同意する "))])])),_:1},8,["modelValue"]),(0,o.createVNode)(u.D,{color:"primary",type:"submit",block:"",class:"mt-4",loading:y.value,disabled:y.value||!S.value},{default:(0,o.withCtx)((()=>t[20]||(t[20]=[(0,o.createTextVNode)(" サインアップ ")]))),_:1},8,["loading","disabled"])])),_:1},512)):"confirm"===r.value?((0,o.openBlock)(),(0,o.createBlock)(G.n,{key:4,onSubmit:(0,o.withModifiers)(O,["prevent"])},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Q.W,{modelValue:h.value,"onUpdate:modelValue":t[10]||(t[10]=e=>h.value=e),label:"メールアドレス",required:""},null,8,["modelValue"]),(0,o.createVNode)(Q.W,{modelValue:w.value,"onUpdate:modelValue":t[11]||(t[11]=e=>w.value=e),label:"確認コード",required:""},null,8,["modelValue"]),(0,o.createVNode)(u.D,{color:"primary",type:"submit",block:"",class:"mt-4",loading:y.value},{default:(0,o.withCtx)((()=>t[21]||(t[21]=[(0,o.createTextVNode)(" 確認 ")]))),_:1},8,["loading"]),(0,o.createVNode)(u.D,{text:"",color:"secondary",disabled:y.value,class:"mt-2",onClick:z},{default:(0,o.withCtx)((()=>t[22]||(t[22]=[(0,o.createTextVNode)(" 確認コードを再送信 ")]))),_:1},8,["disabled"])])),_:1})):"changePassword"===r.value?((0,o.openBlock)(),(0,o.createBlock)(G.n,{key:5,onSubmit:(0,o.withModifiers)(M,["prevent"])},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Q.W,{modelValue:k.value,"onUpdate:modelValue":t[12]||(t[12]=e=>k.value=e),label:"新しいパスワード",type:"password",required:"",rules:[e=>!!e||"パスワードは必須です",e=>e.length>=8||"パスワードは8文字以上である必要があります"]},null,8,["modelValue","rules"]),(0,o.createVNode)(Q.W,{modelValue:V.value,"onUpdate:modelValue":t[13]||(t[13]=e=>V.value=e),label:"新しいパスワード（確認）",type:"password",required:"",rules:[e=>!!e||"パスワードの確認は必須です",e=>e===k.value||"パスワードが一致しません"]},null,8,["modelValue","rules"]),(0,o.createVNode)(u.D,{color:"primary",type:"submit",block:"",class:"mt-4",loading:y.value},{default:(0,o.withCtx)((()=>t[23]||(t[23]=[(0,o.createTextVNode)(" パスワードを変更 ")]))),_:1},8,["loading"])])),_:1})):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(F.SL,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.hc),(0,o.createVNode)(u.D,{text:"",color:"primary",onClick:Y},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(A.value),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}};const X=Y;var $=X,ee=a(2635),te=a(1114),ae=a(6945),oe=a(4577);const le={id:"star-container",class:"star-background"};var re={__name:"StarBackground",props:{totalStars:{type:Number,default:100},maxSize:{type:Number,default:5},minSize:{type:Number,default:2},starColor:{type:String,default:"white"},batchSize:{type:Number,default:50},baseSpeed:{type:Number,default:3},speedVariation:{type:Number,default:2},moveUp:{type:Boolean,default:!1},moveDistance:{type:Number,default:100}},setup(e){const t=e,a=()=>{const e=document.createElement("span");e.className="star";const a=Math.random()*(t.maxSize-t.minSize)+t.minSize,o=Math.random()*t.speedVariation+t.baseSpeed;return Object.assign(e.style,{width:`${a}px`,height:`${a}px`,left:100*Math.random()+"%",top:100*Math.random()+"%",backgroundColor:t.starColor,position:"absolute",borderRadius:"50%",animation:t.moveUp?`starTwinkle ${o}s ease-in-out infinite, moveUp ${o}s linear infinite`:`starTwinkle ${o}s ease-in-out infinite`}),e};return(0,o.onMounted)((()=>{const e=document.getElementById("star-container");if(e)for(let o=0;o<t.totalStars;o++)e.appendChild(a())})),(0,o.onUnmounted)((()=>{const e=document.getElementById("star-container");e&&(e.innerHTML="")})),(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",le))}};const ne=re;var ie=ne,ce=a(816),se=a(9015);const de={key:0},ue={key:1},me={key:2},pe={key:3},fe={key:1};var ve={__name:"Overview",setup(e){const t=(0,i.Pj)(),a=t.getters["auth/organizationId"],{getPreviousWeekString:l}=(0,ee._)(),{isMobile:r}=(0,c.Q)(),n=(0,o.ref)(!0),s=(0,o.ref)({}),d=(0,o.ref)([]),m=(0,o.ref)(""),f=(0,o.ref)(""),v=async()=>{try{const[e,t]=await Promise.all([(0,te.SA)(a),(0,oe.rF)(a)]);s.value=e,d.value=t}catch(e){}},g=async()=>{try{f.value=l();const e=await(0,ae.vc)(a,f.value);m.value={...e,reportedCount:e.pending.count+e.inFeedback.count+e.confirmed.count}}catch(e){throw e}},h=async()=>{n.value=!0;try{await Promise.all([v(),g()])}catch(e){}finally{n.value=!1}};return(0,o.onMounted)(h),(e,t)=>((0,o.openBlock)(),(0,o.createBlock)(Z.IZ,{class:"content-container"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(ie,{"total-stars":6,"max-size":50,"min-size":15,"star-color":"#CFE8FC","base-speed":10,"speed-variation":3,"move-up":!0,"move-distance":160}),(0,o.createVNode)(q.l,{icon:(0,o.unref)(r)?void 0:"mdi-comment-text",class:"mx-auto mt-8 mb-12 border-md text-center",color:"blue-lighten-5","max-width":"600","min-height":"100",variant:"flat",closable:!(0,o.unref)(r)},{default:(0,o.withCtx)((()=>[n.value?((0,o.openBlock)(),(0,o.createElementBlock)("div",fe,[(0,o.createVNode)(se.x,{size:"42",width:"8",indeterminate:""})])):((0,o.openBlock)(),(0,o.createBlock)(Z.IZ,{key:0,class:"text-body-1 px-0"},{default:(0,o.withCtx)((()=>[0===d.value.length?((0,o.openBlock)(),(0,o.createElementBlock)("p",de,[t[2]||(t[2]=(0,o.createTextVNode)(" 最初に組織情報の登録が必要です。")),t[3]||(t[3]=(0,o.createElementVNode)("br",null,null,-1)),(0,o.createVNode)(u.D,{color:"black",variant:"outlined",to:{name:"OrganizationManagement"},class:"mt-3"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{class:"mr-1",small:""},{default:(0,o.withCtx)((()=>t[0]||(t[0]=[(0,o.createTextVNode)(" mdi-domain ")]))),_:1}),t[1]||(t[1]=(0,o.createTextVNode)(" 組織情報管理 "))])),_:1})])):s.value.requestEnabled?m.value["pending"].count?((0,o.openBlock)(),(0,o.createElementBlock)("p",me,[t[10]||(t[10]=(0,o.createTextVNode)(" 先週分の確認待ちの報告があります。")),t[11]||(t[11]=(0,o.createElementVNode)("br",null,null,-1)),(0,o.createVNode)(ce.Q,{color:"info",content:m.value["pending"].count,class:"mt-3"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(u.D,{color:"black",variant:"outlined",to:{name:"WeeklyReview",params:{weekString:f.value}}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{class:"mr-1",small:"",left:""},{default:(0,o.withCtx)((()=>t[8]||(t[8]=[(0,o.createTextVNode)(" mdi-calendar-multiple-check ")]))),_:1}),t[9]||(t[9]=(0,o.createTextVNode)(" 週次報告レビュー "))])),_:1},8,["to"])])),_:1},8,["content"])])):((0,o.openBlock)(),(0,o.createElementBlock)("p",pe,[t[14]||(t[14]=(0,o.createTextVNode)(" 各種状況を確認してください。")),t[15]||(t[15]=(0,o.createElementVNode)("br",null,null,-1)),(0,o.createVNode)(u.D,{color:"black",variant:"outlined",to:{name:"Dashboard"},class:"mt-3"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{class:"mr-1",small:""},{default:(0,o.withCtx)((()=>t[12]||(t[12]=[(0,o.createTextVNode)(" mdi-view-dashboard ")]))),_:1}),t[13]||(t[13]=(0,o.createTextVNode)(" ダッシュボード "))])),_:1})])):((0,o.openBlock)(),(0,o.createElementBlock)("p",ue,[t[6]||(t[6]=(0,o.createTextVNode)(" 報告依頼の自動送信がオフとなっています。")),t[7]||(t[7]=(0,o.createElementVNode)("br",null,null,-1)),(0,o.createVNode)(u.D,{color:"black",variant:"outlined",to:{name:"ReportSetting"},class:"mt-3"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{class:"mr-1",small:""},{default:(0,o.withCtx)((()=>t[4]||(t[4]=[(0,o.createTextVNode)(" mdi-calendar-clock ")]))),_:1}),t[5]||(t[5]=(0,o.createTextVNode)(" 週次報告設定 "))])),_:1})]))])),_:1}))])),_:1},8,["icon","closable"])])),_:1}))}};const ge=ve;var he=ge,we=a(432),ke=a.n(we);function Ve(){const e=(e,a,o)=>{const l=t.reduce(((e,t)=>(e[t.key]=0,e)),{});return{organizationId:e,memberUuid:a,weekString:o,projects:[{name:"",workItems:[{content:""}]}],overtimeHours:0,issues:"",improvements:"",rating:l}},t=[{key:"stress",label:"ストレス度",itemLabels:["余裕あり","","","","極限状態"],negative:!0},{key:"disability",label:"タスク遂行の難易度",itemLabels:["易しい","","","","難しい"],negative:!0},{key:"achievement",label:"タスク目標の達成度",itemLabels:["課題あり","","","","理想以上"],negative:!1}],a=[{value:"all",text:"全て",color:"indigo"},{value:"none",text:"報告なし",color:"error"},{value:"pending",text:"確認待ち",color:"success"},{value:"feedback",text:"フィードバック中",color:"warning"},{value:"approved",text:"確認済み",color:"primary"}],o=e=>{const t=a.find((t=>t.value===e));return t?t.text:""},l=e=>{const t=a.find((t=>t.value===e));return t?t.color:""};return{initialReport:e,ratingItems:t,statusOptions:a,getStatusText:o,getStatusColor:l}}var ye=a(7315);const xe=()=>{const e=(0,i.Pj)(),t=(0,o.computed)((()=>e.state.widget.widgetOrder.filter((t=>e.state.widget.widgetVisibility[t])))),a={isExpanded:t=>(0,o.computed)((()=>e.state.widget.expandStates[t])),isVisible:t=>(0,o.computed)((()=>e.state.widget.widgetVisibility[t])),toggle:t=>e.dispatch("widget/toggleWidget",t),toggleVisibility:t=>e.dispatch("widget/toggleWidgetVisibility",t),updateOrder:a=>{if(Array.isArray(a)&&a.length>0){const o=t.value;a.length===o.length&&a.every((e=>o.includes(e)))&&e.dispatch("widget/updateWidgetOrder",a)}}},l=e=>ye.e[e]?.component;return{...a,visibleWidgets:t,widgetOrder:(0,o.computed)((()=>e.state.widget.widgetOrder)),expandStates:(0,o.computed)((()=>e.state.widget.expandStates)),WIDGET_DEFINITIONS:ye.e,getWidgetComponent:l}},Ne={class:"date"};var be={__name:"Calendar",props:{calendarWeeks:{type:Array,required:!0},onSelectWeek:{type:Function,default:()=>{}},isSelected:{type:Function,default:()=>{}}},setup(e){const t=e,{calendarWeeks:a,onSelectWeek:l,isSelected:r}=(0,o.toRefs)(t),{shouldShowMonth:n,formatShortMonth:i,isToday:c,isSaturday:s,isSunday:d,getStringFromWeek:u,getWeekJpText:m}=(0,ee._)(),p=(0,o.ref)(null),f=e=>{p.value=e},v=()=>{p.value=null},g=e=>p.value&&e.weekOffset===p.value.weekOffset,h=[{label:"月",class:""},{label:"火",class:""},{label:"水",class:""},{label:"木",class:""},{label:"金",class:""},{label:"土",class:"saturday"},{label:"日",class:"sunday"}],w=u,k=(0,o.ref)(0),V=(0,o.computed)((()=>k.value>=600?"1em":"0.75em")),y=()=>{const e=document.querySelector(".week-row");e&&(k.value=e.offsetWidth)};return(0,o.onMounted)((()=>{y(),window.addEventListener("resize",y)})),(0,o.onUnmounted)((()=>{window.removeEventListener("resize",y)})),(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[(0,o.createVNode)(Z.Li,{class:"weekdays align-center","no-gutters":""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,{class:"week-number-header"},{default:(0,o.withCtx)((()=>t[0]||(t[0]=[(0,o.createTextVNode)(" 週 ")]))),_:1}),((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(h,(e=>(0,o.createVNode)(Z.B6,{key:e.label,class:(0,o.normalizeClass)(["weekday-header",e.class])},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.label),1)])),_:2},1032,["class"]))),64))])),_:1}),(0,o.createVNode)(o.TransitionGroup,{name:"week-transition",tag:"div"},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(a),((e,t)=>((0,o.openBlock)(),(0,o.createBlock)(Z.Li,{key:(0,o.unref)(w)(e),"no-gutters":"",class:(0,o.normalizeClass)(["week-row align-center",{selected:(0,o.unref)(r)(e),hovered:g(e)}]),style:(0,o.normalizeStyle)({"--fade-delay":.05*t+"s"}),onClick:t=>(0,o.unref)(l)(e),onMouseenter:t=>f(e),onMouseleave:t=>v(e)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,{class:"week-number"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)((0,o.unref)(m)(e.weekOffset)),1)])),_:2},1024),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.days,((e,a)=>((0,o.openBlock)(),(0,o.createBlock)(Z.B6,{key:e.toISOString(),class:(0,o.normalizeClass)(["day",{today:(0,o.unref)(c)(e)},{saturday:(0,o.unref)(s)(e)},{sunday:(0,o.unref)(d)(e)}])},{default:(0,o.withCtx)((()=>[(0,o.unref)(n)(e,t,a)?((0,o.openBlock)(),(0,o.createElementBlock)("span",{key:0,class:"month",style:(0,o.normalizeStyle)({fontSize:V.value})},(0,o.toDisplayString)((0,o.unref)(i)(e)),5)):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("span",Ne,(0,o.toDisplayString)(e.getDate()),1)])),_:2},1032,["class"])))),128))])),_:2},1032,["class","style","onClick","onMouseenter","onMouseleave"])))),128))])),_:1})],64))}};const Ce=(0,k.A)(be,[["__scopeId","data-v-0d94eb90"]]);var _e=Ce,Ee=a(3571),Be=a(3960),Ae={__name:"CalendarWidget",props:{calendarWeeks:{type:Array,required:!0},weekIndex:{type:Number,required:!0},statusCounts:{type:Object,required:!0},statusMembers:{type:Object,required:!0},filteredStatusOptions:{type:Array,required:!0},weekString:{type:String,required:!0}},emits:["update:weekIndex"],setup(e,{emit:t}){(0,o.useCssVars)((e=>({"5341e84f":(0,o.unref)(n)?"560px":"100%"})));const a=e,l=t,{isExpanded:r}=xe(),n=r("calendar"),i=e=>{const t=e>0?Math.min(a.calendarWeeks.length-1,a.weekIndex+1):Math.max(0,a.weekIndex-1);l("update:weekIndex",t)},c=e=>e?e.map((e=>e.name||e.displayName||"")).filter(Boolean).join(", "):"";return(t,a)=>((0,o.openBlock)(),(0,o.createBlock)(Ee.A,{"widget-id":"calendar",title:"報告状況",icon:"mdi-calendar-multiple-check"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.Li,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,{cols:"12",md:(0,o.unref)(n)?9:12},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(F.Jn,{"max-width":"560",class:"mx-auto calendar-card"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.IZ,{class:"pa-0 position-relative"},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.calendarWeeks,((t,a)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:a,class:(0,o.normalizeClass)({"d-none":a!==e.weekIndex})},[(0,o.createVNode)(_e,{"calendar-weeks":[t]},null,8,["calendar-weeks"])],2)))),128)),e.weekIndex>0?((0,o.openBlock)(),(0,o.createBlock)(u.D,{key:0,class:"calendar-nav-btn calendar-nav-btn-left",icon:"mdi-arrow-left-thick",size:"small",fab:"","aria-label":"前の週へ",onClick:a[0]||(a[0]=e=>i(-1))})):(0,o.createCommentVNode)("",!0),e.weekIndex<e.calendarWeeks.length-1?((0,o.openBlock)(),(0,o.createBlock)(u.D,{key:1,class:"calendar-nav-btn calendar-nav-btn-right",icon:"mdi-arrow-right-thick",size:"small",fab:"","aria-label":"次の週へ",onClick:a[1]||(a[1]=e=>i(1))})):(0,o.createCommentVNode)("",!0)])),_:1})])),_:1}),(0,o.createVNode)(ce.Q,{class:"mt-6",color:e.statusCounts["pending"]?"info":"transparent",content:e.statusCounts["pending"]||""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(u.D,{color:"black",variant:"outlined",to:{name:"WeeklyReview",params:{weekString:e.weekString}},"aria-label":"週次報告レビューへ移動"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{class:"mr-1",small:"",left:"","aria-hidden":"true"},{default:(0,o.withCtx)((()=>a[2]||(a[2]=[(0,o.createTextVNode)(" mdi-calendar-multiple-check ")]))),_:1}),a[3]||(a[3]=(0,o.createTextVNode)(" 週次報告レビュー "))])),_:1},8,["to"])])),_:1},8,["color","content"])])),_:1},8,["md"]),(0,o.createVNode)(Z.B6,{cols:"12",md:(0,o.unref)(n)?3:12,class:(0,o.normalizeClass)(["d-flex",(0,o.unref)(n)?"flex-sm-column":"flex-wrap","align-start","pt-2"])},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.filteredStatusOptions,(t=>((0,o.openBlock)(),(0,o.createElementBlock)("span",{key:t.value,class:(0,o.normalizeClass)({"status-chip-wrapper":!(0,o.unref)(n)})},[e.statusCounts[t.value]>0?(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(Be.x,{key:0,class:"ma-1",value:t.value,color:t.color,label:""},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(t.text)+": "+(0,o.toDisplayString)(e.statusCounts[t.value]),1)])),_:2},1032,["value","color"])),[[B.m_,c(e.statusMembers[t.value]),"end"]]):(0,o.createCommentVNode)("",!0)],2)))),128))])),_:1},8,["md","class"])])),_:1})])),_:1}))}};const Se=(0,k.A)(Ae,[["__scopeId","data-v-768aba2c"]]);var Ie=Se;const De={class:"flex-grow-1"},Te={class:"text-body-1 mb-2"},Pe={class:"text-body-2 mb-1"};var Oe={__name:"OrganizationWidget",props:{organization:{type:Object,required:!0},members:{type:Array,required:!0}},setup(e){const t=e,a=(0,o.computed)((()=>t.members.length));return(t,l)=>((0,o.openBlock)(),(0,o.createBlock)(Ee.A,{"widget-id":"organization",title:"組織情報",icon:"mdi-domain"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.IZ,{class:"pa-0 d-flex flex-column",style:{height:"100%"}},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",De,[(0,o.createElementVNode)("p",Te,(0,o.toDisplayString)(e.organization?.name),1),(0,o.createElementVNode)("p",Pe," メンバー: "+(0,o.toDisplayString)(a.value)+" 人 ",1)]),(0,o.createElementVNode)("div",null,[(0,o.createVNode)(u.D,{color:"black",variant:"outlined",to:{name:"OrganizationManagement"},"aria-label":"組織情報管理ページへ移動"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{class:"mr-1",small:"","aria-hidden":"true"},{default:(0,o.withCtx)((()=>l[0]||(l[0]=[(0,o.createTextVNode)(" mdi-domain ")]))),_:1}),l[1]||(l[1]=(0,o.createTextVNode)(" 組織情報管理 "))])),_:1})])])),_:1})])),_:1}))}};const Ue=Oe;var Re=Ue;const ze={class:"flex-grow-1"},Me={class:"text-body-2 mb-1"},We={class:"text-subtitle-1"},Le={key:0,class:"text-body-2 mb-1"},je={class:"text-subtitle-1"};var qe={__name:"ReportRequestWidget",props:{organization:{type:Object,required:!0},nextRequestDateTime:{type:Date,default:null},nextRequestDateTimeString:{type:String,default:""}},setup(e){return(t,a)=>((0,o.openBlock)(),(0,o.createBlock)(Ee.A,{"widget-id":"reportRequest",title:"報告依頼",icon:"mdi-mail"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.IZ,{class:"pa-0 d-flex flex-column",style:{height:"100%"}},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",ze,[(0,o.createElementVNode)("p",Me,[a[0]||(a[0]=(0,o.createElementVNode)("span",null,"自動報告依頼設定: ",-1)),(0,o.createVNode)(p.wP,{color:e.organization.requestEnabled?"success":"grey",class:"mx-1","aria-hidden":"true"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.organization.requestEnabled?"mdi-timer-outline":"mdi-timer-off-outline"),1)])),_:1},8,["color"]),(0,o.createElementVNode)("span",We,[(0,o.createElementVNode)("strong",null,(0,o.toDisplayString)(e.organization.requestEnabled?"有効":"無効"),1)])]),e.organization.requestEnabled&&e.nextRequestDateTime?((0,o.openBlock)(),(0,o.createElementBlock)("p",Le,[a[1]||(a[1]=(0,o.createElementVNode)("span",{class:"mr-2"},"次回報告依頼日時: ",-1)),(0,o.createElementVNode)("span",je,(0,o.toDisplayString)(e.nextRequestDateTimeString),1)])):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("div",null,[(0,o.createVNode)(u.D,{color:"black",variant:"outlined",to:{name:"ReportSetting"},"aria-label":"報告依頼設定ページへ移動"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{class:"mr-1",small:"","aria-hidden":"true"},{default:(0,o.withCtx)((()=>a[2]||(a[2]=[(0,o.createTextVNode)(" mdi-calendar-clock ")]))),_:1}),a[3]||(a[3]=(0,o.createTextVNode)(" 週次報告設定 "))])),_:1})])])),_:1})])),_:1}))}};const Fe=qe;var He=Fe,Ge=a(2998);const Ze={class:"flex-grow-1"};var Qe={__name:"WeeklyReportWidget",props:{members:{type:Array,required:!0},weekString:{type:String,required:!0},organizationId:{type:String,required:!0}},setup(e){const t=e,a=(0,o.ref)(null),l=()=>{if(!a.value)return;const e=`${s.Ec}/reports/${t.organizationId}/${a.value}`,o=t.weekString?`${e}/${t.weekString}`:e;window.open(o,"_blank","noopener,noreferrer")};return(t,r)=>((0,o.openBlock)(),(0,o.createBlock)(Ee.A,{"widget-id":"weeklyReport",title:"メンバーの週次報告",icon:"mdi-calendar-account"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.IZ,{class:"pa-0 d-flex flex-column",style:{height:"100%"}},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",Ze,[(0,o.createVNode)(Ge.d,{modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=e=>a.value=e),items:e.members,"item-title":"name","item-value":"memberUuid",label:"メンバー選択",density:"comfortable",variant:"outlined","hide-details":"","prepend-inner-icon":"mdi-account"},null,8,["modelValue","items"])]),(0,o.createElementVNode)("div",null,[(0,o.createVNode)(u.D,{color:"black",variant:"outlined",disabled:!a.value,"x-small":"","aria-label":"選択したメンバーの週次報告ページを新しいタブで開く",onClick:l},{default:(0,o.withCtx)((()=>[r[1]||(r[1]=(0,o.createTextVNode)(" 週次報告（代理入力） ")),(0,o.createVNode)(p.wP,{icon:"mdi-open-in-new",end:"",small:"","aria-hidden":"true"})])),_:1},8,["disabled"])])])),_:1})])),_:1}))}};const Je=Qe;var Ke=Je,Ye=a(3319),Xe={__name:"Dashboard",setup(e){const t={CalendarWidget:(0,o.markRaw)(Ie),OrganizationWidget:(0,o.markRaw)(Re),ReportRequestWidget:(0,o.markRaw)(He),WeeklyReportWidget:(0,o.markRaw)(Ke),OvertimeChart:(0,o.defineAsyncComponent)((()=>Promise.all([a.e(350),a.e(251)]).then(a.bind(a,4251)).then((e=>(0,o.markRaw)(e.default))))),StressChart:(0,o.defineAsyncComponent)((()=>Promise.all([a.e(350),a.e(870)]).then(a.bind(a,4870)).then((e=>(0,o.markRaw)(e.default))))),DisabilityChart:(0,o.defineAsyncComponent)((()=>Promise.all([a.e(350),a.e(387)]).then(a.bind(a,4387)).then((e=>(0,o.markRaw)(e.default))))),AchievementChart:(0,o.defineAsyncComponent)((()=>Promise.all([a.e(350),a.e(992)]).then(a.bind(a,3992)).then((e=>(0,o.markRaw)(e.default))))),TodoListWidget:(0,o.defineAsyncComponent)((()=>a.e(397).then(a.bind(a,7397)).then((e=>(0,o.markRaw)(e.default)))))},l=(0,i.Pj)(),{createWeeks:r,getStringFromWeek:n,formatFullDateTimeJp:s}=(0,ee._)(),{statusOptions:d}=Ve(),{isMobile:g}=(0,c.Q)(),h={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6},w=l.getters["auth/organizationId"],k=r(6),V=(0,o.ref)(null),y=(0,o.ref)(null),x=(0,o.ref)([]),N=(0,o.ref)(!0),b=(0,o.ref)(null),C=(0,o.ref)(!1),_=(0,o.ref)(!1),E=(0,o.ref)(!1),A=(0,o.ref)(!1),S=(0,o.ref)(""),I=(0,o.ref)({labels:[],datasets:[]}),D=(0,o.ref)({labels:[],datasets:[]}),T=(0,o.ref)({labels:[],datasets:[]}),P=(0,o.ref)({labels:[],datasets:[]}),O=(0,o.computed)((()=>null!==V.value?n(k[V.value]):null)),U=(0,o.computed)((()=>d.filter((e=>"all"!==e.value)))),R=(0,o.ref)({none:{count:0,members:[]},pending:{count:0,members:[]},inFeedback:{count:0,members:[]},confirmed:{count:0,members:[]},reportedCount:0}),z=(0,o.computed)((()=>({none:R.value.none.count,pending:R.value.pending.count,feedback:R.value.inFeedback.count,approved:R.value.confirmed.count}))),M=(0,o.computed)((()=>({none:R.value.none.members,pending:R.value.pending.members,feedback:R.value.inFeedback.members,approved:R.value.confirmed.members}))),W=(0,o.computed)((()=>{if(!y.value?.requestEnabled)return null;const{requestDayOfWeek:e,requestTime:t}=y.value,a=h[e.toLowerCase()],[o,l]=t.split(":").map(Number);if(void 0===a||isNaN(o)||isNaN(l))return null;const r=new Date;let n=new Date(r.getFullYear(),r.getMonth(),r.getDate(),o,l,0,0);if(n.getDay()===a&&n>r)return n;const i=(a-r.getDay()+7)%7;return n.setDate(n.getDate()+(0===i?7:i)),n})),L=async()=>{W.value?S.value=s(W.value):S.value=""},j=async()=>{try{const e=await(0,ae.vc)(w,O.value);R.value={...e,reportedCount:e.pending.count+e.inFeedback.count+e.confirmed.count}}catch(e){throw b.value="報告状況の取得に失敗しました: "+e.message,e}},q=(e,t)=>({labels:e.labels,datasets:e.datasets.map(((e,a)=>({label:e.label,data:e.data.map((e=>e[t])),borderColor:F(a),fill:!1})))}),F=e=>{const t=["rgb(96, 96, 255)","rgb(255, 159, 64)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(255, 99, 132)","rgb(144, 238, 144)","rgb(135, 206, 235)","rgb(179, 183, 255)","rgb(255, 206, 86)","rgb(64, 224, 208)"];return e<t.length?t[e]:H()},H=()=>{const e=Math.floor(255*Math.random()),t=Math.floor(255*Math.random()),a=Math.floor(255*Math.random());return`rgb(${e}, ${t}, ${a})`},G=async()=>{N.value=!0,b.value=null;try{const[e,t,a]=await Promise.all([(0,te.SA)(w),(0,oe.rF)(w),(0,ae.vc)(w,O.value)]);y.value=e,x.value=t,a.value={...a,reportedCount:a.pending.count+a.inFeedback.count+a.confirmed.count}}catch(e){b.value="ダッシュボードの初期化に失敗しました: "+e.message}finally{N.value=!1}},Q=async()=>{try{const e=await(0,ae.eF)(w);I.value=q(e,"overtimeHours"),D.value=q(e,"stress"),T.value=q(e,"disability"),P.value=q(e,"achievement"),C.value=!0,_.value=!0,E.value=!0,A.value=!0}catch(e){b.value="追加データの取得に失敗しました: "+e.message}},J=()=>{G(),j(),(0,o.nextTick)((()=>{Q()}))};(0,o.watch)(V,j),(0,o.watch)(W,L,{immediate:!0}),(0,o.onMounted)((()=>{V.value=k.length-2,G(),(0,o.nextTick)((()=>{Q()}))}));const{WIDGET_DEFINITIONS:K,getWidgetComponent:Y,visibleWidgets:X,expandStates:$,updateOrder:le}=xe(),re=e=>{const t={calendar:()=>({calendarWeeks:k,weekIndex:V.value,"onUpdate:weekIndex":e=>V.value=e,statusCounts:z.value,statusMembers:M.value,filteredStatusOptions:U.value,weekString:O.value}),overtime:()=>ne("overtime",I.value,C.value),stress:()=>ne("stress",D.value,_.value),disability:()=>ne("disability",T.value,E.value),achievement:()=>ne("achievement",P.value,A.value),organization:()=>({organization:y.value,members:x.value}),reportRequest:()=>({organization:y.value,nextRequestDateTime:W.value,nextRequestDateTimeString:S.value}),todo:()=>({}),weeklyReport:()=>({members:x.value,weekString:O.value,organizationId:w})};return(t[e]||(()=>({})))()},ne=(e,t,a)=>({widgetId:e,title:K[e].title,chartData:t,isDataReady:a}),ie=(0,o.computed)({get:()=>X.value.map((e=>({id:e,component:t[Y(e)],props:re(e)}))),set:e=>{e?.length&&le(e.map((e=>e.id)))}});(0,o.onMounted)((()=>{V.value=k.length-2,G(),(0,o.nextTick)((()=>{Q()}))}));const ce=(0,o.ref)(!1),se=e=>{l.dispatch("widget/toggleWidgetVisibility",e)};return(e,t)=>((0,o.openBlock)(),(0,o.createBlock)(Z.IZ,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.Li,{dense:"",class:"pb-2"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,{cols:"6"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("h3",null,[(0,o.createVNode)(p.wP,{size:"large",class:"mr-1","aria-hidden":"true"},{default:(0,o.withCtx)((()=>t[2]||(t[2]=[(0,o.createTextVNode)(" mdi-view-dashboard ")]))),_:1}),t[3]||(t[3]=(0,o.createTextVNode)(" ダッシュボード "))])])),_:1}),(0,o.createVNode)(Z.B6,{cols:"6",class:"d-flex justify-end align-center pe-3"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(v.q,{modelValue:ce.value,"onUpdate:modelValue":t[0]||(t[0]=e=>ce.value=e),"close-on-content-click":!1},{activator:(0,o.withCtx)((({props:e})=>[(0,o.withDirectives)((0,o.createVNode)(u.D,(0,o.mergeProps)(e,{icon:"mdi-cog","aria-label":"ウィジェット設定",class:"opacity-80 mr-2",density:"comfortable"}),null,16),[[B.m_,"ウィジェットの表示設定"]])])),default:(0,o.withCtx)((()=>[(0,o.createVNode)(f.x8,{class:"rounded-lg"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f.wh,null,{default:(0,o.withCtx)((()=>t[4]||(t[4]=[(0,o.createTextVNode)("表示するウィジェット")]))),_:1}),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(K),((e,t)=>((0,o.openBlock)(),(0,o.createBlock)(f.gc,{key:t,class:"px-5",onClick:(0,o.withModifiers)((e=>se(t)),["stop"])},{append:(0,o.withCtx)((()=>[(0,o.createVNode)(Ye.N,{"model-value":(0,o.unref)(l).state.widget.widgetVisibility[t],"hide-details":"",inset:"",density:"compact",color:"primary"},null,8,["model-value"])])),default:(0,o.withCtx)((()=>[(0,o.createVNode)(f.UZ,{class:"text-body-2"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.title),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),(0,o.createVNode)(m.G,{class:"my-2"}),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(f.wh,null,{default:(0,o.withCtx)((()=>[t[5]||(t[5]=(0,o.createTextVNode)(" 並び替えするには ")),(0,o.createVNode)(p.wP,{class:"ml-1",icon:"mdi-help-circle-outline"})])),_:1})),[[B.m_,{text:"タイトル部分をドラッグして位置を変更できます。",location:"top"}]]),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(f.wh,null,{default:(0,o.withCtx)((()=>[t[6]||(t[6]=(0,o.createTextVNode)(" サイズ変更するには ")),(0,o.createVNode)(p.wP,{class:"ml-1",icon:"mdi-help-circle-outline"})])),_:1})),[[B.m_,{text:"タイトル部分のダブルクリックで表示サイズを切り替えできます。",location:"top"}]])])),_:1})])),_:1},8,["modelValue"]),(0,o.withDirectives)((0,o.createVNode)(u.D,{icon:"mdi-reload","aria-label":"データを更新",class:"opacity-80",density:"comfortable",onClick:J},null,512),[[B.m_,"データを最新の状態に更新"]])])),_:1})])),_:1}),N.value?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(Z.Li,{key:0,dense:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.IZ,{fluid:"",class:"widgets-container pa-0"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)((0,o.unref)(ke()),{modelValue:ie.value,"onUpdate:modelValue":t[1]||(t[1]=e=>ie.value=e),"component-data":{tag:"div",type:"transition-group",name:N.value?null:"flip-list"},class:"widgets-grid","item-key":"id",handle:".widget-title",animation:200,"ghost-class":"widget-ghost",disabled:N.value,delay:(0,o.unref)(g)?300:0,"touch-action":"pan-y","force-fallback":(0,o.unref)(g)},{item:(0,o.withCtx)((({element:e})=>[(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)(["widget-item",{expanded:(0,o.unref)(g)||(0,o.unref)($)[e.id]}])},[((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(e.component),(0,o.normalizeProps)((0,o.guardReactiveProps)(e.props)),null,16))],2)])),_:1},8,["modelValue","component-data","disabled","delay","force-fallback"])])),_:1})])),_:1}))])),_:1}))}};const $e=(0,k.A)(Xe,[["__scopeId","data-v-73d52258"]]);var et=$e,tt=a(1059),at={__name:"WeekSelector",props:{functionName:{type:String,required:!0},selectedWeek:{type:Object,default:()=>null},icon:{type:String,default:"mdi-bird"}},emits:["select-week","reset"],setup(e,{emit:t}){const a=e,l=t,{calendarWeeks:r,getWeekJpText:n}=(0,ee._)(),i=(0,o.ref)(a.selectedWeek),c=(0,o.ref)(!1),s=(0,o.ref)(!1),d=(0,o.computed)((()=>!i.value||s.value?r.value:r.value.filter((e=>i.value.weekOffset==e.weekOffset)))),u=e=>{i.value&&!s.value?(s.value=!0,l("reset")):(i.value=e,setTimeout((()=>{s.value=!1,l("select-week",i.value)}),500))},m=e=>i.value&&e.weekOffset===i.value.weekOffset,f=(0,o.computed)((()=>i.value?n(i.value.weekOffset):"週の選択")),v=()=>{c.value=!0},g=()=>{c.value=!1};return(0,o.watch)((()=>a.selectedWeek),(e=>{i.value=e,s.value=!1})),(t,a)=>((0,o.openBlock)(),(0,o.createBlock)(Z.IZ,{class:"week-selector"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.Li,{dense:"",class:"pb-3"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,null,{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("h3",null,[(0,o.createVNode)(p.wP,{icon:e.icon,size:"large",class:"mr-1"},null,8,["icon"]),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(e.functionName)+"［"+(0,o.toDisplayString)(f.value)+"］ ",1)])])),_:1})])),_:1}),(0,o.createVNode)(F.Jn,{class:(0,o.normalizeClass)(["d-print-none",{"hover-effect":c.value,"leave-effect":!c.value,"show-all-weeks":s.value}]),onMouseenter:v,onMouseleave:g},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(F.OQ,{class:"pa-0"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(_e,{"calendar-weeks":d.value,"on-select-week":u,"is-selected":m},null,8,["calendar-weeks"])])),_:1})])),_:1},8,["class"])])),_:1}))}};const ot=(0,k.A)(at,[["__scopeId","data-v-4c14e31a"]]);var lt=ot,rt=(a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698),a(2325)),nt={__name:"ProjectSelector",props:{modelValue:{type:String,default:""},projectNames:{type:Array,required:!0},memberUuid:{type:String,required:!0}},emits:["update:modelValue","projectListChanged"],setup(e,{emit:t}){const a=e,l=(0,o.inject)("showConfirmDialog"),r=(0,o.inject)("showNotification"),n=t,i=(0,o.ref)(a.projectNames),c=(0,o.computed)((()=>{const e=a.modelValue??"",t=e.toLowerCase().trim(),o=new Set(i.value.map((e=>e.toLowerCase()))),l=Array.from(o).filter((e=>e.includes(t)));return t&&!o.has(t)&&l.push(e),l})),s=e=>{n("update:modelValue",e??"")},d=async e=>{if(e&&!i.value.includes(e)){const o=[...i.value,e];try{await(0,R.oj)(a.memberUuid,o),r("プロジェクトリストに登録しました。"),i.value=o,n("projectListChanged",o)}catch(t){}}},m=async e=>{const t=await l("確認","プロジェクトリストから削除します。\nよろしいですか？");if(!t)return;const o=i.value.filter((t=>t!==e));try{await(0,R.oj)(a.memberUuid,o),i.value=o,n("projectListChanged",o),a.modelValue===e&&n("update:modelValue","")}catch(r){}},v=async e=>{if("Enter"===e.key&&!e.isComposing){e.preventDefault();const t=(a.modelValue??"").trim();t&&(i.value.includes(t)?g(e.target):await d(t))}},g=e=>{const t=e.closest("form");if(!t)return;const a=Array.from(t.querySelectorAll("input:not([disabled]):not([readonly]), select:not([disabled]):not([readonly]), textarea:not([disabled]):not([readonly])")).filter((e=>!e.classList.contains("v-select__selections")&&!e.parentElement.classList.contains("v-list-item"))),o=a.indexOf(e);o>-1&&o<a.length-1&&a[o+1].focus()};return(t,a)=>((0,o.openBlock)(),(0,o.createBlock)(rt.A,{"model-value":e.modelValue,items:c.value,class:"project-combobox",label:"プロジェクト",required:"",dense:"","hide-details":"auto","onUpdate:modelValue":s,onKeydown:v},{prepend:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{class:"d-none d-md-flex"},{default:(0,o.withCtx)((()=>a[0]||(a[0]=[(0,o.createTextVNode)(" mdi-folder-outline ")]))),_:1})])),item:(0,o.withCtx)((({props:t,item:a})=>[(0,o.createVNode)(f.gc,(0,o.mergeProps)(t,{class:"project-list-item"}),{append:(0,o.withCtx)((()=>[e.projectNames.includes(a.title)?(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(u.D,{key:0,icon:"mdi-close",size:"small",flat:"",tabindex:"-1",onClick:(0,o.withModifiers)((e=>m(a.title)),["stop"])},null,8,["onClick"])),[[B.m_,"選択リストより削除"]]):(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(u.D,{key:1,icon:"mdi-plus",size:"small",color:"primary",flat:"",onClick:(0,o.withModifiers)((e=>d(a.title)),["stop"])},null,8,["onClick"])),[[B.m_,"選択リストに追加"]])])),_:2},1040)])),_:1},8,["model-value","items"]))}};const it=(0,k.A)(nt,[["__scopeId","data-v-6f1f71da"]]);var ct=it;const st={NEUTRAL_ICON:"mdi-emoticon-neutral",NEGATIVE_ICON:"mdi-emoticon-dead",POSITIVE_ICON:"mdi-emoticon",NO_CHANGE_ICON:"mdi-minus",INCREASE_ICON:"mdi-arrow-top-right",DECREASE_ICON:"mdi-arrow-bottom-right",COMPARISON_COLOR:"blue-grey-lighten-2",NO_COMPARISON_LABEL:"比較データなし",IMPROVEMENT_LABEL:"前回より好転",DECLINE_LABEL:"前回より悪化",NO_CHANGE_LABEL:"前回と変化なし",NEGATIVE_COLOR:"#1976D2",POSITIVE_COLOR:"#E91E63"};function dt(e){const{modelValue:t,itemLabels:a,comparison:l,negative:r}=e,n=(0,o.computed)((()=>a.length)),i=(0,o.computed)((()=>(n.value+1)/2)),c=(0,o.ref)(st.NEUTRAL_ICON),s=(0,o.ref)(e.negative?st.NEUTRAL_COLOR_NEGATIVE:st.NEUTRAL_COLOR_POSITIVE),d=e=>0===e||e===i.value?st.NEUTRAL_ICON:r^e<i.value?st.NEGATIVE_ICON:st.POSITIVE_ICON,u=e=>{const t=st.POSITIVE_COLOR,a=st.NEGATIVE_COLOR,o=(e-1)/(n.value-1),l=Math.abs(o-.5),i=.4+1*l;let c,s;return r?(c=t,s=a):(c=a,s=t),m(c,s,o,i)},m=(e,t,a,o=null)=>{const l=f(p(e)),r=f(p(t)),n=l.h+(r.h-l.h)*a,i=.9*Math.max(l.s,r.s),c=.55;return v(n,i,c,o||.9)},p=e=>{const t=e.replace("#","");return{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16)}},f=e=>{const t=e.r/255,a=e.g/255,o=e.b/255,l=Math.max(t,a,o),r=Math.min(t,a,o);let n,i;const c=(l+r)/2;if(l===r)n=i=0;else{const e=l-r;i=c>.5?e/(2-l-r):e/(l+r),n=l===t?(a-o)/e+(a<o?6:0):l===a?(o-t)/e+2:(t-a)/e+4,n/=6}return{h:n,s:i,l:c}},v=(e,t,a,o)=>{let l,r,n,i,c;const s=(e,t,a)=>(a<0&&(a+=1),a>1&&(a-=1),a<1/6?e+6*(t-e)*a:a<.5?t:a<2/3?e+(t-e)*(2/3-a)*6:e);return i=a<.5?a*(1+t):a+t-a*t,c=2*a-i,l=Math.round(255*s(c,i,e+1/3)),r=Math.round(255*s(c,i,e)),n=Math.round(255*s(c,i,e-1/3)),`rgba(${l}, ${r}, ${n}, ${o})`},g=e=>{c.value=d(e),s.value=u(e)},h=(0,o.computed)((()=>null===l||t===l?st.NO_CHANGE_ICON:t>l?st.INCREASE_ICON:st.DECREASE_ICON)),w=st.COMPARISON_COLOR,k=(0,o.computed)((()=>null===l?st.NO_COMPARISON_LABEL:t===l?st.NO_CHANGE_LABEL:t>l^r?st.IMPROVEMENT_LABEL:st.DECLINE_LABEL)),V=u((n.value+1)/2);return{length:n,half:i,fullIcon:c,activeIconColor:s,comparisonIcon:h,comparisonColor:w,comparisonLabel:k,updateActiveIcon:g,inactiveIconColor:V}}var ut=a(5763),mt=a(3374);const pt={class:"text-body-1"},ft={class:"text-h5 mr-5 text-no-wrap"},vt={class:"text-body-1"},gt={key:0};var ht={__name:"RatingItem",props:{label:{type:String,required:!0},modelValue:{type:Number,default:0},itemLabels:{type:Array,default:()=>["","","","",""]},negative:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},comparison:{type:Number,default:null}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,l=t,{length:r,fullIcon:n,activeIconColor:i,inactiveIconColor:c,comparisonIcon:s,comparisonColor:d,comparisonLabel:u,updateActiveIcon:m}=dt(a),f=e=>{m(e),l("update:modelValue",e)};return(0,o.watch)((()=>a.modelValue),(e=>{m(e)})),(0,o.onMounted)((()=>{m(a.modelValue)})),(t,a)=>((0,o.openBlock)(),(0,o.createBlock)(Z.Li,{class:"align-center px-md-6"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,{cols:"8",md:"3",class:"d-flex align-center"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("span",pt,(0,o.toDisplayString)(e.label),1)])),_:1}),(0,o.createVNode)(Z.B6,{cols:"4",md:"2",class:"d-flex justify-center align-center pa-0"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",ft,[(0,o.createTextVNode)((0,o.toDisplayString)(e.modelValue||"-")+" ",1),(0,o.createElementVNode)("span",vt,"/ "+(0,o.toDisplayString)((0,o.unref)(r)),1),e.readonly?((0,o.openBlock)(),(0,o.createElementBlock)("span",gt,[null!==e.comparison?((0,o.openBlock)(),(0,o.createBlock)(mt.y,{key:0,location:"bottom","close-delay":500},{activator:(0,o.withCtx)((({props:e})=>[(0,o.createVNode)(p.wP,(0,o.mergeProps)(e,{color:(0,o.unref)(d),class:"fluctuation-icon ml-3","aria-label":(0,o.unref)(u)}),{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)((0,o.unref)(s)),1)])),_:2},1040,["color","aria-label"])])),default:(0,o.withCtx)((()=>[(0,o.createTextVNode)(" 前回評価: "+(0,o.toDisplayString)(e.comparison),1),a[0]||(a[0]=(0,o.createElementVNode)("br",null,null,-1)),(0,o.createTextVNode)(" "+(0,o.toDisplayString)((0,o.unref)(u)),1)])),_:1})):(0,o.createCommentVNode)("",!0)])):(0,o.createCommentVNode)("",!0)])])),_:1}),(0,o.createVNode)(Z.B6,{cols:"12",md:"7",class:"d-flex align-middle pa-2"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(ut.e,{ref:"rating",class:(0,o.normalizeClass)(["custom-rating",{"rating-negative":e.negative}]),"model-value":e.modelValue,"item-labels":e.itemLabels,length:(0,o.unref)(r),readonly:e.readonly,"empty-icon":"mdi-emoticon-neutral-outline","full-icon":(0,o.unref)(n),"half-icon":"mdi-emoticon-neutral-outline","active-color":(0,o.unref)(i),size:"x-large",density:"compact",color:"grey-lighten-2","aria-label":`${e.label}の評価: ${e.modelValue}/${(0,o.unref)(r)}`,style:(0,o.normalizeStyle)({"--active-icon-color":(0,o.unref)(i),"--hover-icon-color":e.modelValue?(0,o.unref)(i):(0,o.unref)(c)}),"onUpdate:modelValue":f},null,8,["class","model-value","item-labels","length","readonly","full-icon","active-color","aria-label","style"])])),_:1})])),_:1}))}};const wt=(0,k.A)(ht,[["__scopeId","data-v-ca1050fa"]]);var kt=wt,Vt=a(6051),yt=a(1914),xt=a(2891),Nt=a(1386),bt=a(3527);const Ct={class:"work-items-list"},_t={class:"d-flex align-center"},Et={key:0,class:"v-input--error"},Bt={class:"v-input__details"},At={class:"v-messages__message pl-4"},St={class:"d-flex align-center"};var It={__name:"ReportForm",props:{organizationId:{type:String,required:!0},memberUuid:{type:String,required:!0},weekString:{type:String,required:!0}},emits:["report-submitted"],setup(e,{emit:t}){const a=(0,n.lq)(),{isMobile:l}=(0,c.Q)(),r=(0,o.inject)("showNotification"),i=(0,o.inject)("showError"),s=(0,o.inject)("showConfirmDialog"),{formatDateTimeJp:d,getPreviousWeekString:m,getCurrentWeekString:v}=(0,ee._)(),{initialReport:g,ratingItems:h}=Ve(),w=e,k=t,V=(0,o.reactive)({report:g(w.organizationId,w.memberUuid,w.weekString),isNew:!0,isLoading:!1,projectNames:[],previousWeekReport:null,expandedPanel:null,errors:{form:{issues:[],rating:[]},projects:[]}}),y=(0,o.computed)((()=>!!E.value||(0===V.report.projects.length||""===V.report.issues.trim()))),x=(0,o.reactive)({}),N=(0,o.ref)([0]),b=(0,o.ref)(!1),C=(0,o.ref)(""),_=(0,o.computed)((()=>5===V.report.rating?.stress)),E=(0,o.computed)((()=>"approved"===V.report.status)),A=(0,o.computed)((()=>[...V.report.feedbacks||[]].sort(((e,t)=>new Date(e.createdAt)-new Date(t.createdAt))))),S=e=>e===V.report.feedbacks.length-1,I=e=>{V.projectNames=e},D=()=>{let e=parseFloat(C.value);isNaN(e)&&(e=0),e=Math.max(0,Math.min(99,e)),V.report.overtimeHours=parseFloat(e.toFixed(1)),C.value=V.report.overtimeHours.toFixed(1)},T=()=>{let e=parseFloat(C.value)||0;e<99&&(e+=.5,C.value=e.toFixed(1).toString(),V.report.overtimeHours=e)},P=()=>{let e=parseFloat(C.value)||0;e>0&&(e-=.5,C.value=e.toFixed(1).toString(),V.report.overtimeHours=e)},O=(e,t,a)=>{x[t]||(x[t]={}),x[t][a]=e},U=async(e,t,a)=>{if("Enter"===e.key&&!e.isComposing){e.preventDefault();const o=a===t.workItems.length-1;o&&""!==t.workItems[a].content.trim()?(await z(t),M(t,a+1)):W(t,a)}},z=async e=>{e.workItems.push({content:""}),await(0,o.nextTick)()},M=(e,t)=>{const a=V.report.projects.indexOf(e);(0,o.nextTick)((()=>{x[a]&&x[a][t]&&x[a][t].focus()}))},W=(e,t)=>{const a=V.report.projects.indexOf(e),l=t+1;(0,o.nextTick)((()=>{if(x[a]&&x[a][l])x[a][l].focus();else{const e=document.querySelector(".report-form"),o=e.querySelectorAll("input, textarea, select"),l=x[a][t],r=Array.from(o).indexOf(l);-1!==r&&r<o.length-1&&o[r+1].focus()}}))},L=(e,t)=>{e.workItems.splice(t,1),0===e.workItems.length&&z(e)},j=()=>{V.previousWeekReport&&(V.report={...V.report,projects:V.previousWeekReport.projects?.map((e=>({...e,workItems:e.workItems.map((e=>({...e})))})))||[]},r("前週の報告内容をコピーしました。"))},H=()=>{V.report.projects.push({name:"",workItems:[{content:""}]})},J=e=>{1===V.report.projects.length?(V.report.projects[0].name="",V.report.projects[0].workItems=[{content:""}]):V.report.projects.splice(e,1)},K=()=>{const e=document.querySelector(".feedback-box");e&&e.scrollIntoView({behavior:"smooth",block:"start"})},Y=()=>{"true"===a.query.feedback&&V.report.feedbacks?.length>0&&(0,o.nextTick)((()=>{K()}))},X=async()=>{V.isLoading=!0;try{const e=m(w.weekString),[t,a,o]=await Promise.all([(0,R.ly)(w.memberUuid,w.weekString),(0,R.ly)(w.memberUuid,e),(0,R.bU)(w.memberUuid)]);V.isNew=!0,t&&(V.isNew=!1,V.report={...t,issues:t.issues||"",improvements:t.improvements||"",rating:t.rating||{}}),a&&(V.previousWeekReport={...a,issues:a.issues||" ",improvements:a.improvements||" "}),V.projectNames=o,C.value=V?V.report.overtimeHours.toFixed(1):0}catch(e){i("報告書またはプロジェクトリストの取得に失敗しました。",e)}finally{V.isLoading=!1}},$=()=>{let e=!0;return V.errors.form.issues=[],V.errors.form.rating=[],V.errors.projects=[],0===V.report.projects.length&&(e=!1,V.errors.form.issues.push("少なくとも1つのプロジェクトを追加してください。")),V.report.projects.forEach(((t,a)=>{t.name.trim()||(e=!1,V.errors.projects[a]=V.errors.projects[a]||{},V.errors.projects[a].name=["プロジェクト名を入力してください。"]);const o=t.workItems.filter((e=>""!==e.content.trim()));0===o.length&&(e=!1,V.errors.projects[a]=V.errors.projects[a]||{},V.errors.projects[a].workItems=["少なくとも1つの作業内容を追加してください。"])})),V.report.issues.trim()||(e=!1,V.errors.form.issues.push("振り返り（成果と課題）は必須入力です。")),V.report.rating?.achievement&&V.report.rating?.disability&&V.report.rating?.stress||(e=!1,V.errors.form.rating.push("評価は必須入力です。")),e},te=e=>e.map((e=>({...e,workItems:e.workItems.filter((e=>""!==e.content.trim()))}))),ae=async()=>{if(E.value)return void r("確認済みの報告書は編集できません。","info");const e=$();if(!e)return void i("入力に誤りがあります。赤字箇所を確認してください。");if(_.value){if(!b.value)return void(b.value=!0)}else V.report.stressHelp="";b.value=!1;const t={...V.report,projects:te(V.report.projects),status:"pending"},a=await s("確認",`この内容で報告を${V.isNew?"提出":"更新"}します。よろしいですか？`);if(a)try{V.isNew?(await(0,R.zC)(t),k("report-submitted",t,!0)):(await(0,R.A0)(t),k("report-submitted",t,!1))}catch(o){i("報告の提出に失敗しました。",o)}},oe=async()=>{const e=await s("確認","変更を元に戻します。よろしいですか？");e&&await X()},le=()=>{V.report.feedbacks&&V.report.feedbacks.length>0&&(N.value=[0])};return(0,o.onMounted)((async()=>{await X(),le(),Y()})),(t,a)=>((0,o.openBlock)(),(0,o.createBlock)(Z.IZ,{class:"report-form-container"},{default:(0,o.withCtx)((()=>[V.isLoading?((0,o.openBlock)(),(0,o.createBlock)(Nt.V,{key:0,elevation:"4",type:"text, sentences@2, actions, chip, divider, list-item-three-line, list-item@2, button"})):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[E.value?((0,o.openBlock)(),(0,o.createBlock)(q.l,{key:0,type:"info",color:"blue-grey",border:"start",class:"mt-2 mb-6 rounded-lg",variant:"tonal"},{default:(0,o.withCtx)((()=>a[10]||(a[10]=[(0,o.createTextVNode)(" この報告は管理者が確認済みです。編集はできません。 ")]))),_:1})):e.weekString===(0,o.unref)(v)()?((0,o.openBlock)(),(0,o.createBlock)(q.l,{key:1,type:"info",color:"light-blue",border:"start",class:"mt-2 mb-6 rounded-lg",variant:"tonal",closable:""},{default:(0,o.withCtx)((()=>a[11]||(a[11]=[(0,o.createTextVNode)(" 報告対象期間が終了していません。問題なければ報告を行ってください。 ")]))),_:1})):(0,o.createCommentVNode)("",!0),V.previousWeekReport&&!E.value?((0,o.openBlock)(),(0,o.createBlock)(F.Jn,{key:2,class:"rounded-lg mb-4"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(yt.$t,{modelValue:V.expandedPanel,"onUpdate:modelValue":a[2]||(a[2]=e=>V.expandedPanel=e)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(yt.ct,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(yt.wS,{class:"bg-grey-lighten-4"},{actions:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{icon:"mdi-chevron-down"})])),default:(0,o.withCtx)((()=>[a[12]||(a[12]=(0,o.createElementVNode)("span",{class:"text-decoration-underline",style:{"text-underline-offset":"4px"}}," 前週の報告内容 ",-1))])),_:1}),(0,o.createVNode)(yt.TM,{class:"bg-plain"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.Li,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,{cols:"12",md:"5",class:"pa-2"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f.x8,{class:"bg-transparent custom-list"},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(V.previousWeekReport.projects,((e,t)=>((0,o.openBlock)(),(0,o.createBlock)(f.gc,{key:t},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f.UZ,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{small:""},{default:(0,o.withCtx)((()=>a[13]||(a[13]=[(0,o.createTextVNode)(" mdi-folder-outline ")]))),_:1}),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(e.name),1)])),_:2},1024),(0,o.createVNode)(f.w,{class:"d-block"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("ul",Ct,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.workItems,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{key:t},(0,o.toDisplayString)(e.content),1)))),128))])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,o.createVNode)(Z.B6,{cols:"12",md:"7"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(bt.J,{modelValue:V.previousWeekReport.issues,"onUpdate:modelValue":a[0]||(a[0]=e=>V.previousWeekReport.issues=e),label:"振り返り（成果と課題）",outlined:"",readonly:"","auto-grow":"",rows:"2","hide-details":"",class:"small-text-area mb-2"},null,8,["modelValue"]),(0,o.createVNode)(bt.J,{modelValue:V.previousWeekReport.improvements,"onUpdate:modelValue":a[1]||(a[1]=e=>V.previousWeekReport.improvements=e),label:"次の目標、改善施策",outlined:"",readonly:"","auto-grow":"",rows:"1","hide-details":"",class:"small-text-area"},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.createVNode)(Z.Li,{class:"justify-end pa-4 pt-1"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(u.D,{color:"secondary",variant:"elevated",onClick:j},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{class:"mr-1"},{default:(0,o.withCtx)((()=>a[14]||(a[14]=[(0,o.createTextVNode)(" mdi-content-copy ")]))),_:1}),a[15]||(a[15]=(0,o.createTextVNode)(" 作業内容をコピー "))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(G.n,{ref:"reportForm",class:(0,o.normalizeClass)(["bg-plain rounded-lg mt-3 elevation-6 pa-3 pa-md-5",{"form-disabled":E.value}]),onSubmit:(0,o.withModifiers)(ae,["prevent"])},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(V.report.projects,((e,t)=>((0,o.openBlock)(),(0,o.createBlock)(F.Jn,{key:t,elevation:"2",class:"pb-2 mb-4"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(F.OQ,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.Li,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,{cols:"9",md:"8",class:"pa-1 pa-md-4"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(ct,{modelValue:e.name,"onUpdate:modelValue":t=>e.name=t,"project-names":V.projectNames,"member-uuid":w.memberUuid,"error-messages":V.errors.projects[t]?.name,onProjectListChanged:I},null,8,["modelValue","onUpdate:modelValue","project-names","member-uuid","error-messages"])])),_:2},1024),(0,o.createVNode)(Z.B6,{cols:"3",md:"4",class:"d-flex justify-end"},{default:(0,o.withCtx)((()=>[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(u.D,{icon:"",class:"project-delete-btn",tabindex:"-1",onClick:e=>J(t)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,null,{default:(0,o.withCtx)((()=>a[16]||(a[16]=[(0,o.createTextVNode)("mdi-delete-outline")]))),_:1})])),_:2},1032,["onClick"])),[[B.m_,"プロジェクトを削除"]])])),_:2},1024)])),_:2},1024),e.workItems.length>0?((0,o.openBlock)(),(0,o.createBlock)(Z.Li,{key:0},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,{cols:"12",class:"pa-1"},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.workItems,((l,r)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:r,class:"mb-2"},[(0,o.createVNode)(Q.W,{ref_for:!0,ref:e=>O(e,t,r),modelValue:l.content,"onUpdate:modelValue":e=>l.content=e,label:`作業内容 ${r+1}`,class:"work-item-input pl-2 pl-md-5",required:"","hide-details":"auto","error-messages":V.errors.projects[t]?.workItems[r],onKeydown:t=>U(t,e,r)},{append:(0,o.withCtx)((()=>[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(p.wP,{color:l.content?"grey darken-2":"grey lighten-1",tabindex:"-1",onClick:t=>L(e,r)},{default:(0,o.withCtx)((()=>a[17]||(a[17]=[(0,o.createTextVNode)(" mdi-close-circle-outline ")]))),_:2},1032,["color","onClick"])),[[B.m_,"作業内容を削除"]])])),_:2},1032,["modelValue","onUpdate:modelValue","label","error-messages","onKeydown"])])))),128))])),_:2},1024)])),_:2},1024)):(0,o.createCommentVNode)("",!0)])),_:2},1024)])),_:2},1024)))),128)),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(xt.Q,{class:"me-md-5 mt-n5 mt-md-n2",location:"top end",color:"secondary",extended:"",absolute:"",offset:"",disabled:E.value,onClick:H},{prepend:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{class:"mx-n2"},{default:(0,o.withCtx)((()=>a[18]||(a[18]=[(0,o.createTextVNode)(" mdi-folder-outline ")]))),_:1})])),default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{class:"pl-1 mr-n2"},{default:(0,o.withCtx)((()=>a[19]||(a[19]=[(0,o.createTextVNode)(" mdi-plus ")]))),_:1})])),_:1},8,["disabled"])),[[B.m_,"プロジェクトを追加"]]),(0,o.createVNode)(Z.Li,{class:"mt-4 mt-md-2"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,{cols:"12",sm:"6"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Q.W,{modelValue:C.value,"onUpdate:modelValue":a[3]||(a[3]=e=>C.value=e),label:"残業時間（週単位）",type:"number",min:"0",max:"99",step:"0.5",required:"",outlined:"",dense:"",class:"overtime-input",onBlur:D},{append:(0,o.withCtx)((()=>[(0,o.createVNode)(u.D,{icon:"",size:(0,o.unref)(l)?38:48,onClick:P},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,null,{default:(0,o.withCtx)((()=>a[20]||(a[20]=[(0,o.createTextVNode)("mdi-minus")]))),_:1})])),_:1},8,["size"]),a[22]||(a[22]=(0,o.createElementVNode)("span",{class:"mr-1"},null,-1)),(0,o.createVNode)(u.D,{icon:"",size:(0,o.unref)(l)?38:48,onClick:T},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,null,{default:(0,o.withCtx)((()=>a[21]||(a[21]=[(0,o.createTextVNode)("mdi-plus")]))),_:1})])),_:1},8,["size"])])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,o.createVNode)(bt.J,{modelValue:V.report.issues,"onUpdate:modelValue":a[4]||(a[4]=e=>V.report.issues=e),label:"振り返り（成果と課題）",required:"",rows:"3","auto-grow":"",outlined:"",counter:"","error-messages":V.errors.form.issues},{"append-inner":(0,o.withCtx)((()=>[(0,o.createVNode)(mt.y,{location:"top","max-width":"340","close-delay":500},{activator:(0,o.withCtx)((({props:e})=>[(0,o.unref)(l)?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(p.wP,(0,o.mergeProps)({key:0},e,{color:"grey",icon:"mdi-tooltip-question-outline",class:"cursor-pointer"}),null,16))])),default:(0,o.withCtx)((()=>[a[23]||(a[23]=(0,o.createElementVNode)("div",{class:"custom-tooltip"},[(0,o.createElementVNode)("p",null,[(0,o.createElementVNode)("strong",null,"効果的な振り返りのポイント")]),(0,o.createElementVNode)("p",null,[(0,o.createTextVNode)(" ・ 主要な成果と進捗を具体的に記述する"),(0,o.createElementVNode)("br"),(0,o.createTextVNode)(" ・ 直面した課題と得られた学びを説明する"),(0,o.createElementVNode)("br"),(0,o.createTextVNode)(" ・ 可能な限り数値や具体例を含める ")])],-1))])),_:1})])),_:1},8,["modelValue","error-messages"]),(0,o.createVNode)(bt.J,{modelValue:V.report.improvements,"onUpdate:modelValue":a[5]||(a[5]=e=>V.report.improvements=e),label:"次の目標、改善施策",rows:"1","auto-grow":"",outlined:"","error-messages":V.errors.form.improvements},{"append-inner":(0,o.withCtx)((()=>[(0,o.createVNode)(mt.y,{location:"top","max-width":"340","close-delay":500},{activator:(0,o.withCtx)((({props:e})=>[(0,o.unref)(l)?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(p.wP,(0,o.mergeProps)({key:0},e,{color:"grey",icon:"mdi-tooltip-question-outline",class:"cursor-pointer"}),null,16))])),default:(0,o.withCtx)((()=>[a[24]||(a[24]=(0,o.createElementVNode)("div",{class:"custom-tooltip"},[(0,o.createElementVNode)("p",null,[(0,o.createElementVNode)("strong",null,"効果的な目標設定と改善施策")]),(0,o.createElementVNode)("p",null,[(0,o.createTextVNode)(" ・ 優先度の高い改善点を明確にする"),(0,o.createElementVNode)("br"),(0,o.createTextVNode)(" ・ 具体的で測定可能な目標と行動計画を立てる ")])],-1))])),_:1})])),_:1},8,["modelValue","error-messages"]),(0,o.createVNode)(F.Jn,{class:"mt-2 border-sm",elevation:"0",variant:"flat",color:"#e6f3ff"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(F.ri,null,{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",_t,[(0,o.createVNode)(p.wP,{icon:"mdi-equalizer",color:"blue-grey-darken-3",class:"mr-2"}),a[25]||(a[25]=(0,o.createTextVNode)(" 評価 "))])])),_:1}),(0,o.createVNode)(F.OQ,null,{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(h),(e=>((0,o.openBlock)(),(0,o.createBlock)(kt,{key:e.key,modelValue:V.report.rating[e.key],"onUpdate:modelValue":t=>V.report.rating[e.key]=t,label:e.label,"item-labels":e.itemLabels,negative:e.negative},null,8,["modelValue","onUpdate:modelValue","label","item-labels","negative"])))),128))])),_:1})])),_:1}),V.errors.form.rating.length?((0,o.openBlock)(),(0,o.createElementBlock)("div",Et,[(0,o.createElementVNode)("div",Bt,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(V.errors.form.rating,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:t,class:"v-messages"},[(0,o.createElementVNode)("div",At,(0,o.toDisplayString)(e),1)])))),128))])])):(0,o.createCommentVNode)("",!0),V.report.feedbacks&&V.report.feedbacks.length?((0,o.openBlock)(),(0,o.createBlock)(Z.Li,{key:1,class:"mt-2"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,{cols:"12"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(yt.$t,{modelValue:N.value,"onUpdate:modelValue":a[6]||(a[6]=e=>N.value=e),class:(0,o.normalizeClass)(["feedback-box",{"form-disabled":E.value}]),elevation:"2",eager:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(yt.ct,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(yt.wS,null,{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",St,[(0,o.createVNode)(p.wP,{class:"mr-2",color:"orange"},{default:(0,o.withCtx)((()=>a[26]||(a[26]=[(0,o.createTextVNode)(" mdi-comment-text-outline ")]))),_:1}),a[27]||(a[27]=(0,o.createTextVNode)(" フィードバック ")),V.report.feedbacks.length?((0,o.openBlock)(),(0,o.createBlock)(ce.Q,{key:0,color:"orange-darken-1",class:"ml-2",content:V.report.feedbacks.length,inline:""},null,8,["content"])):(0,o.createCommentVNode)("",!0)])])),_:1}),(0,o.createVNode)(yt.TM,null,{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(A.value,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:t,class:"pa-0"},[(0,o.createVNode)(bt.J,{modelValue:e.content,"onUpdate:modelValue":t=>e.content=t,label:`${(0,o.unref)(d)(new Date(e.createdAt))}`,readonly:"",rows:"1","auto-grow":"","hide-details":"",density:"comfortable",class:"borderless-textarea"},null,8,["modelValue","onUpdate:modelValue","label"]),e.replyComment||S(t)?((0,o.openBlock)(),(0,o.createBlock)(bt.J,{key:0,modelValue:e.replyComment,"onUpdate:modelValue":t=>e.replyComment=t,label:"返信コメント",readonly:!S(t),clearable:S(t),"clear-icon":"mdi-close-circle",rows:S(t)?2:1,"auto-grow":"","hide-details":"",density:"comfortable",class:(0,o.normalizeClass)(["mx-4",{"borderless-textarea":!S(t),"mt-n2":!S(t),"my-2":S(t)}])},{"prepend-inner":(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{class:"mr-1",color:"grey-darken-3",size:"large"},{default:(0,o.withCtx)((()=>a[28]||(a[28]=[(0,o.createTextVNode)(" mdi-reply ")]))),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue","readonly","clearable","rows","class"])):(0,o.createCommentVNode)("",!0)])))),128))])),_:1})])),_:1})])),_:1},8,["modelValue","class"])])),_:1})])),_:1})):(0,o.createCommentVNode)("",!0),E.value?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(Z.Li,{key:2,class:"mt-2"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,{cols:"12",class:"d-flex justify-end"},{default:(0,o.withCtx)((()=>[V.isNew?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(u.D,{key:0,color:"grey",variant:"outlined",onClick:oe},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{class:"mr-1",left:""},{default:(0,o.withCtx)((()=>a[29]||(a[29]=[(0,o.createTextVNode)(" mdi-undo ")]))),_:1}),a[30]||(a[30]=(0,o.createTextVNode)(" 元に戻す "))])),_:1})),a[32]||(a[32]=(0,o.createElementVNode)("span",{class:"mx-2"},null,-1)),(0,o.createVNode)(u.D,{color:"primary",type:"submit",disabled:y.value},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{class:"mr-1",left:""},{default:(0,o.withCtx)((()=>a[31]||(a[31]=[(0,o.createTextVNode)("mdi-check")]))),_:1}),(0,o.createTextVNode)(" 報告を"+(0,o.toDisplayString)(V.isNew?"提出":"更新")+"する ",1)])),_:1},8,["disabled"])])),_:1})])),_:1}))])),_:1},8,["class"])],64)),(0,o.createVNode)(Vt.p,{modelValue:b.value,"onUpdate:modelValue":a[9]||(a[9]=e=>b.value=e),"max-width":"500px",persistent:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(F.Jn,{class:"bg-plain"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(F.ri,null,{default:(0,o.withCtx)((()=>a[33]||(a[33]=[(0,o.createTextVNode)("ストレス状況の確認")]))),_:1}),(0,o.createVNode)(F.OQ,null,{default:(0,o.withCtx)((()=>[a[34]||(a[34]=(0,o.createElementVNode)("div",{class:"mb-4"},[(0,o.createTextVNode)(" ストレス度が最大となっています。"),(0,o.createElementVNode)("br"),(0,o.createTextVNode)(" 何か具体的な助けが必要ですか？"),(0,o.createElementVNode)("br"),(0,o.createTextVNode)(" 必要な場合は、どのような支援が役立つか教えてください。 ")],-1)),(0,o.createVNode)(bt.J,{modelValue:V.report.stressHelp,"onUpdate:modelValue":a[7]||(a[7]=e=>V.report.stressHelp=e),label:"必要な支援や状況の詳細",variant:"outlined",rows:"3","auto-grow":"","hide-details":""},null,8,["modelValue"])])),_:1}),(0,o.createVNode)(F.SL,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(u.D,{color:"grey darken-1",text:"",onClick:a[8]||(a[8]=e=>b.value=!1)},{default:(0,o.withCtx)((()=>a[35]||(a[35]=[(0,o.createTextVNode)("キャンセル")]))),_:1}),V.report.stressHelp?((0,o.openBlock)(),(0,o.createBlock)(u.D,{key:0,color:"primary",onClick:ae},{default:(0,o.withCtx)((()=>a[36]||(a[36]=[(0,o.createTextVNode)("送信")]))),_:1})):((0,o.openBlock)(),(0,o.createBlock)(u.D,{key:1,color:"warning",onClick:ae},{default:(0,o.withCtx)((()=>a[37]||(a[37]=[(0,o.createTextVNode)("スキップ")]))),_:1}))])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}))}};const Dt=(0,k.A)(It,[["__scopeId","data-v-69c22258"]]);var Tt=Dt,Pt=a(8855);const Ot={class:"text-none font-weight-regular"};var Ut={__name:"WeeklyReport",props:{organizationId:{type:String,default:null},memberUuid:{type:String,default:null},weekString:{type:String,default:null}},setup(e){const t=(0,o.defineAsyncComponent)((()=>a.e(56).then(a.bind(a,6056)))),l=(0,o.defineAsyncComponent)((()=>a.e(405).then(a.bind(a,3405)))),r=(0,o.defineAsyncComponent)((()=>a.e(490).then(a.bind(a,3490)))),i=e,{getWeekFromString:c,getStringFromWeek:d,isWeekInRange:m}=(0,ee._)(),g=(0,n.rd)(),h=(0,o.ref)(""),w=(0,o.ref)(null),k=(0,o.ref)(!0),V=(0,o.ref)(null),y=(0,o.ref)(null),x=(0,o.ref)(null),N=(0,o.ref)(!1),b=(0,o.ref)(null),C=(0,o.computed)((()=>h.value?.features?.weeklyReportAdvice??!1)),_=(0,o.computed)((()=>h.value?.features?.advisors||tt.XG)),E=()=>{y.value.openDialog()},B=()=>{x.value.openDialog()},A=e=>{},S=e=>{if(w.value=e,N.value=!1,e&&m(e)){const t=d(e);t?(g.push({name:"WeeklyReport",params:{organizationId:i.organizationId,memberUuid:i.memberUuid,weekString:t}}),k.value=!0):k.value=!1}else g.push({name:"WeeklyReportSelector",params:{organizationId:i.organizationId,memberUuid:i.memberUuid}}),k.value=!0},I=()=>{w.value=null,k.value=!0,N.value=!1,b.value=null,g.push({name:"WeeklyReportSelector",params:{organizationId:i.organizationId,memberUuid:i.memberUuid}})},D=async(e,t)=>{b.value={...e,weekString:d(w.value),memberUuid:i.memberUuid,organizationId:i.organizationId,isNew:t},N.value=!0},T=()=>{N.value=!1,b.value=null,I()},P=()=>{window.close()},O=()=>{window.open(s.fk,"_blank","noopener,noreferrer")},U=()=>{window.open(s.x0,"_blank","noopener,noreferrer")},z=()=>{window.open(s.wu,"_blank","noopener,noreferrer")};return(0,o.watch)((()=>i.weekString),(e=>{if(e){const t=c(e);t&&m(t)?(w.value=t,k.value=!0):(w.value=null,k.value=!1)}else w.value=null,k.value=!0}),{immediate:!0}),(0,o.onMounted)((async()=>{try{const[e,t]=await Promise.all([(0,R.SA)(i.organizationId),(0,R.Xf)(i.memberUuid)]);h.value=e,V.value=t}catch(e){}})),(a,n)=>((0,o.openBlock)(),(0,o.createBlock)(Z.IZ,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(lt,{"function-name":"週次報告",icon:"mdi-calendar-week","selected-week":w.value,onSelectWeek:S,onReset:I},null,8,["selected-week"]),k.value?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(q.l,{key:0,type:"error",class:"mt-5",outlined:""},{default:(0,o.withCtx)((()=>n[2]||(n[2]=[(0,o.createTextVNode)(" 指定された週は有効範囲外です。 ")]))),_:1})),w.value&&k.value?((0,o.openBlock)(),(0,o.createBlock)(Tt,{key:1,"organization-id":e.organizationId,"member-uuid":e.memberUuid,"week-string":(0,o.unref)(d)(w.value),onReportSubmitted:D},null,8,["organization-id","member-uuid","week-string"])):(0,o.createCommentVNode)("",!0),V.value?((0,o.openBlock)(),(0,o.createBlock)(Pt._,{key:2,color:"#f6fbff",density:"comfortable",rounded:"pill",elevation:"2",divided:"",class:"me-1 d-none d-md-flex v-btn-group"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(u.D,{class:"pe-2","prepend-icon":"mdi-account-circle",variant:"flat",onClick:E},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",Ot,(0,o.toDisplayString)(V.value.name)+" さん ",1)])),_:1}),(0,o.createVNode)(u.D,{size:"small",icon:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{icon:"mdi-menu-down"}),(0,o.createVNode)(v.q,{activator:"parent",location:"bottom end",transition:"fade-transition"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f.x8,{density:"compact","min-width":"210",rounded:"lg",slim:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f.gc,{"prepend-icon":"mdi-emoticon-outline",title:"ストレスチェック",link:"",onClick:B}),(0,o.createVNode)(f.gc,{"prepend-icon":"mdi-comment-quote-outline",title:"フィードバック",link:"",onClick:O}),(0,o.createVNode)(f.gc,{"prepend-icon":"mdi-file-document-outline",title:"利用規約",onClick:U}),(0,o.createVNode)(f.gc,{"prepend-icon":"mdi-shield-account-outline",title:"プライバシーポリシー",onClick:z})])),_:1})])),_:1})])),_:1})])),_:1})):(0,o.createCommentVNode)("",!0),V.value?((0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(t),{key:3,ref_key:"memberInfoDialog",ref:y,member:V.value,"onUpdate:member":n[0]||(n[0]=e=>V.value=e),"is-advice-enabled":C.value},null,8,["member","is-advice-enabled"])):(0,o.createCommentVNode)("",!0),(0,o.createVNode)((0,o.unref)(l),{ref_key:"stressCheckDialog",ref:x,onStressLevelUpdated:A},null,512),(0,o.createVNode)((0,o.unref)(r),{modelValue:N.value,"onUpdate:modelValue":n[1]||(n[1]=e=>N.value=e),"report-content":b.value,"is-advice-enabled":C.value,"enabled-advisors":_.value,onBack:T,onClose:P},null,8,["modelValue","report-content","is-advice-enabled","enabled-advisors"])])),_:1}))}};const Rt=(0,k.A)(Ut,[["__scopeId","data-v-7ff7cbed"]]);var zt=Rt,Mt=a(9423);const Wt=async e=>Mt.uE.post("/secure/generate",e),Lt=async e=>Mt.uE.post("/secure/verify",{token:e}),jt=async(e,t)=>Mt.uE.post("/send-request",{organizationId:e,weekString:t});var qt=a(6863);const Ft={class:"completion-icon-wrapper mb-8"},Ht={class:"text-body-1 text-grey-darken-2 mb-2 fade-in-up delay-1"},Gt={class:"text-subtitle-1 text-grey-darken-1 fade-in-up delay-2"};var Zt={__name:"ReviewCompleteDialog",props:{modelValue:{type:Boolean,required:!0},reportCount:{type:Number,required:!0}},emits:["update:modelValue","share"],setup(e,{emit:t}){const a=e,l=t,r=(0,o.ref)(10);let n;const i=()=>{n&&clearInterval(n),r.value=10,n=setInterval((()=>{r.value--,r.value<=0&&(clearInterval(n),l("update:modelValue",!1))}),1e3)};return(0,o.watch)((()=>a.modelValue),(e=>{e?i():n&&clearInterval(n)})),(0,o.onBeforeUnmount)((()=>{n&&clearInterval(n)})),(t,a)=>((0,o.openBlock)(),(0,o.createBlock)(Vt.p,{"model-value":e.modelValue,"max-width":"400","onUpdate:modelValue":a[2]||(a[2]=e=>t.$emit("update:modelValue",e))},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(F.Jn,{class:"completion-dialog rounded-xl"},{default:(0,o.withCtx)((()=>[a[11]||(a[11]=(0,o.createElementVNode)("div",{class:"completion-background"},[(0,o.createElementVNode)("div",{class:"ripple-effect"})],-1)),(0,o.createVNode)(F.OQ,{class:"text-center pa-8 pb-2"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",Ft,[(0,o.createVNode)(p.wP,{icon:"mdi-check-circle",color:"info",size:"80",class:"completion-icon"}),a[3]||(a[3]=(0,o.createElementVNode)("div",{class:"completion-icon-ring"},null,-1)),a[4]||(a[4]=(0,o.createElementVNode)("div",{class:"completion-icon-ring delay-1"},null,-1)),a[5]||(a[5]=(0,o.createElementVNode)("div",{class:"completion-icon-ring delay-2"},null,-1))]),a[8]||(a[8]=(0,o.createElementVNode)("div",{class:"text-h5 font-weight-bold mb-5 completion-title"}," すべての報告を確認しました！ ",-1)),(0,o.createElementVNode)("div",Ht," メンバー"+(0,o.toDisplayString)(e.reportCount)+"名の週次報告確認が完了しました ",1),(0,o.createElementVNode)("div",Gt,[a[7]||(a[7]=(0,o.createTextVNode)(" おつかれさまでした")),(0,o.createVNode)(p.wP,{color:"amber-accent-3",class:"ml-1 mt-n1"},{default:(0,o.withCtx)((()=>a[6]||(a[6]=[(0,o.createTextVNode)("mdi-emoticon-happy-outline")]))),_:1})])])),_:1}),(0,o.createVNode)(F.SL,{class:"pa-4 d-flex flex-column"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(u.D,{color:"secondary",size:"large",class:"px-6 fade-in-up delay-3 mb-2 w-100",onClick:a[0]||(a[0]=e=>t.$emit("share"))},{default:(0,o.withCtx)((()=>[a[10]||(a[10]=(0,o.createTextVNode)(" 共有する ")),(0,o.createVNode)(p.wP,{class:"ml-2"},{default:(0,o.withCtx)((()=>a[9]||(a[9]=[(0,o.createTextVNode)(" mdi-share-variant ")]))),_:1})])),_:1}),(0,o.createVNode)(u.D,{color:"primary",size:"large",class:"px-6 fade-in-up delay-3 w-100",onClick:a[1]||(a[1]=e=>t.$emit("update:modelValue",!1))},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)(" 閉じる ("+(0,o.toDisplayString)(r.value)+"秒) ",1)])),_:1})])),_:1})])),_:1})])),_:1},8,["model-value"]))}};const Qt=(0,k.A)(Zt,[["__scopeId","data-v-311fcc0c"]]);var Jt=Qt,Kt=a(8719);const Yt={class:"member-name d-flex align-center"},Xt={class:"text-h6 font-weight-bold"},$t={class:"d-flex align-center"},ea={class:"work-items-list text-black"},ta={key:0,class:"mt-auto"},aa={class:"d-flex align-center"},oa={key:0,class:"mt-4 px-1"};var la={__name:"ReviewForm",props:{organizationId:{type:String,required:!0},weekString:{type:String,required:!0},readonly:{type:Boolean,default:!1}},setup(e){const t=(0,o.defineAsyncComponent)((()=>a.e(113).then(a.bind(a,7113)))),{formatDateTimeJp:l,formatDateJp:r,getPreviousWeekString:n}=(0,ee._)(),{statusOptions:i,getStatusText:c,getStatusColor:d,ratingItems:m}=Ve(),v=(0,o.inject)("showNotification"),g=(0,o.inject)("showError"),h=(0,o.inject)("showConfirmDialog"),w=e,k=(0,o.ref)([]),V=(0,o.ref)(!0),y=(0,o.ref)(null),x=(0,o.ref)("all"),N=(0,o.ref)({}),b=(0,o.ref)({}),C=(0,o.ref)({}),_=(0,o.computed)((()=>A.value["none"]||0)),E=(0,o.computed)((()=>k.value.reduce(((e,t)=>{const a=t.feedbacks??[];return e[t.memberUuid]=a.length>0?[0]:[],e}),{}))),B=()=>{b.value={...E.value}};(0,o.watchEffect)((()=>{void 0===x.value&&(x.value="all")})),(0,o.watchEffect)((()=>{k.value.length>0&&B()}));const A=(0,o.computed)((()=>k.value.reduce(((e,t)=>(e[t.status]=(e[t.status]||0)+1,e)),{all:k.value.length}))),S=(0,o.computed)((()=>k.value.length>0&&k.value.every((e=>"approved"===e.status)))),I=(0,o.computed)((()=>"all"===x.value?k.value:k.value.filter((e=>e.status===x.value)))),D=async()=>{try{const e={organizationId:w.organizationId,weekString:w.weekString},t=await Wt(e),a=`${s.Ec}/view/${t.token}#_=`,o=new Date;o.setDate(o.getDate()+14);const l=`有効期限：${r(o)}`,n=`${a}\n${l}`;await navigator.clipboard.writeText(n),v("共有リンクをコピーしました")}catch(e){g("共有リンクのコピーに失敗しました",e)}},T=(0,o.computed)((()=>m.map((e=>({...e,labels:"achievement"===e.key?e.itemLabels.slice().reverse():e.itemLabels,negative:"achievement"===e.key?!e.negative:e.negative,getValue:t=>{const a=t.rating[e.key];return"achievement"===e.key?e.itemLabels.length-a+1:a},getComparison:t=>{if(N.value[t.memberUuid]){const a=N.value[t.memberUuid][e.key];return"achievement"===e.key?e.itemLabels.length-a+1:a}return null}}))))),P=async e=>{try{const t=await(0,R.y_)(w.organizationId,e);return t?t.map((e=>({...e,projects:Array.isArray(e.projects)?e.projects.map((e=>({name:e.name,workItems:Array.isArray(e.workItems)?e.workItems:[]}))):[],feedbacks:Array.isArray(e.feedbacks)?e.feedbacks:[],status:e.status||"pending"}))).filter((e=>null!==e)):[]}catch(t){throw new Error(`Failed to fetch reports: ${t.message}`)}},O=e=>{const t={none:0,pending:1,feedback:2,approved:3};return[...e].sort(((e,a)=>{const o=t[e.status]-t[a.status];return 0!==o?o:e.memberId.localeCompare(a.memberId)}))},U=(e,t)=>{const a=new Map(e.map((e=>[e.memberUuid,e]))),o=t.map((e=>{const t=a.get(e.memberUuid)||{memberUuid:e.memberUuid,status:"none",projects:[]};return{...t,memberId:e.id,name:e.name,projects:t.projects||[],status:t.status||"none"}}));return O(o)},z=async e=>{const t=await h("確認","フィードバックを送信します。よろしいですか？");if(!t)return;const a=k.value.find((t=>t.memberUuid===e)),o=C.value[e];if(a&&o&&""!==o.trim())try{const t={content:o.trim(),createdAt:(new Date).toISOString()};await(0,ae.Wz)(e,w.weekString,t),v("フィードバックを送信しました"),C.value[e]="";const l={...a,feedbacks:[...a.feedbacks||[],t],status:"feedback"};k.value=k.value.map((t=>t.memberUuid===e?l:t)),k.value=O(k.value)}catch(y){g("フィードバックの送信に失敗しました",y)}},M=async e=>{try{const t=C.value[e]?.trim()?"フィードバックが未送信です。\nフィードバックの入力を破棄して、報告を確認済みとします。よろしいですか？":"報告を確認済みとします。よろしいですか？",a=await h("確認",t);if(!a)return;const o=k.value.find((t=>t.memberUuid===e));if(!o)return void g("報告の確認に失敗しました");const l=new Date,r={status:"approved",approvedAt:l.toISOString()};await(0,ae.A0)({...o,...r}),C.value[e]="",b.value[e]=[];const n=k.value.map((t=>t.memberUuid===e?{...t,...r}:t));k.value=O(n),v("報告を確認済みとしました")}catch(y){g("報告の確認に失敗しました",y)}},W=async()=>{const e=await h("確認",`報告要求を［報告なし${_.value}名］に送信します。\nよろしいですか？`);if(e)try{await jt(w.organizationId,w.weekString),v("報告要求を送信しました")}catch(y){g("報告要求の送信に失敗しました",y)}},L=async()=>{V.value=!0,y.value=null;try{const e=n(w.weekString),[t,a,o]=await Promise.allSettled([P(w.weekString),P(e),(0,R.YV)(w.organizationId)]);if("rejected"===o.status)throw new Error("メンバー情報の取得に失敗しました");if("rejected"===t.status)throw new Error("現在の週のレポート取得に失敗しました");k.value=U(t.value,o.value),N.value="fulfilled"===a.status?a.value.reduce(((e,t)=>(t?.rating&&(e[t.memberUuid]=t.rating),e)),{}):{},j()}catch(e){y.value=`データの取得に失敗しました: ${e.message}`,g("データの読み込みに失敗しました",e)}finally{V.value=!1}},j=()=>{k.value.forEach((e=>{C.value[e.memberUuid]=""})),(0,o.nextTick)((()=>{B(),K.value=S.value,J.value=!0,G()}))},H=(0,o.ref)([]),G=()=>{H.value=new Array(I.value.length).fill(null)};(0,o.watchEffect)((()=>{I.value.length>0&&G()})),(0,o.onMounted)((()=>{L().then((()=>{G()}))}));const Q=(0,o.ref)(!1),J=(0,o.ref)(!1),K=(0,o.ref)(!1);return(0,o.watch)(S,(e=>{J.value&&!w.readonly&&e&&!K.value&&(Q.value=!0),K.value=e})),(a,r)=>((0,o.openBlock)(),(0,o.createBlock)(Z.IZ,{class:"review-form-container"},{default:(0,o.withCtx)((()=>[I.value.length>0?((0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(t),{key:0,class:"d-none d-md-flex","report-refs":H.value},null,8,["report-refs"])):(0,o.createCommentVNode)("",!0),k.value.length&&!e.readonly?((0,o.openBlock)(),(0,o.createBlock)(Z.Li,{key:1,class:"d-print-none mt-2"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,{cols:"12",md:"10",class:"py-0"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(F.Jn,{class:"px-2 align-center bg-transparent",elevation:"0"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Kt.m,{modelValue:x.value,"onUpdate:modelValue":r[0]||(r[0]=e=>x.value=e),column:""},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(i),(e=>((0,o.openBlock)(),(0,o.createElementBlock)("span",{key:e.value},[A.value[e.value]>0?((0,o.openBlock)(),(0,o.createBlock)(Be.x,{key:0,value:e.value,color:e.color,outlined:"",filter:""},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.text)+": "+(0,o.toDisplayString)(A.value[e.value]),1)])),_:2},1032,["value","color"])):(0,o.createCommentVNode)("",!0)])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,o.createVNode)(Z.B6,{cols:"12",md:"2",class:"text-end d-none d-md-block"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(u.D,{color:"secondary",size:"small",onClick:D},{default:(0,o.withCtx)((()=>[r[3]||(r[3]=(0,o.createTextVNode)(" 共有する ")),(0,o.createVNode)(p.wP,{class:"ml-1"},{default:(0,o.withCtx)((()=>r[2]||(r[2]=[(0,o.createTextVNode)(" mdi-share-variant ")]))),_:1})])),_:1})])),_:1})])),_:1})):(0,o.createCommentVNode)("",!0),V.value&&!e.readonly?((0,o.openBlock)(),(0,o.createBlock)(Z.Li,{key:2},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Nt.V,{type:"chip@3",class:"bg-transparent",loading:!0})])),_:1})])),_:1})):(0,o.createCommentVNode)("",!0),V.value?((0,o.openBlock)(),(0,o.createBlock)(Z.Li,{key:3},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(3,(e=>(0,o.createVNode)(Z.B6,{key:e,cols:"12"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Nt.V,{type:"avatar, text, ossein, paragraph, text, actions",class:"rounded-lg",loading:!0,elevation:"4"})])),_:2},1024))),64))])),_:1})):((0,o.openBlock)(),(0,o.createBlock)(Z.Li,{key:4},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,{cols:"12"},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(I.value,((t,a)=>((0,o.openBlock)(),(0,o.createBlock)(F.Jn,{key:t.memberUuid,ref_for:!0,ref:e=>{e&&(H.value[a]=e)},class:(0,o.normalizeClass)([{"approved-card":"approved"===t.status,"none-card":"none"===t.status},"default-card rounded-lg cursor-default mt-2 pb-1"]),hover:"",outlined:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(F.ri,{class:"d-flex justify-space-between align-center py-2"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",Yt,[(0,o.createVNode)(p.wP,{size:"x-large",class:"mr-2"},{default:(0,o.withCtx)((()=>r[4]||(r[4]=[(0,o.createTextVNode)(" mdi-account-box-outline ")]))),_:1}),(0,o.createElementVNode)("span",Xt,(0,o.toDisplayString)(t.name),1)]),(0,o.createElementVNode)("div",$t,[(0,o.createVNode)(mt.y,{disabled:"approved"!==t.status,location:"bottom","close-delay":1500},{activator:(0,o.withCtx)((({props:e})=>[(0,o.createVNode)(Be.x,(0,o.mergeProps)({ref_for:!0},e,{color:(0,o.unref)(d)(t.status),label:"","x-small":"",class:"status-chip ml-2"}),{default:(0,o.withCtx)((()=>["approved"===t.status?((0,o.openBlock)(),(0,o.createBlock)(p.wP,{key:0,class:"mr-1"},{default:(0,o.withCtx)((()=>r[5]||(r[5]=[(0,o.createTextVNode)(" mdi-check-circle-outline ")]))),_:1})):(0,o.createCommentVNode)("",!0),(0,o.createTextVNode)(" "+(0,o.toDisplayString)((0,o.unref)(c)(t.status)),1)])),_:2},1040,["color"])])),default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("span",null,"確認日時："+(0,o.toDisplayString)((0,o.unref)(l)(new Date(t.approvedAt))),1)])),_:2},1032,["disabled"]),e.readonly?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(u.D,{key:0,icon:"",size:"small",color:"secondary",variant:"tonal",elevation:"2",class:"ml-6",to:{name:"MemberReports",params:{memberUuid:t.memberUuid}}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{size:"24",class:"opacity-80"},{default:(0,o.withCtx)((()=>r[6]||(r[6]=[(0,o.createTextVNode)("mdi-calendar-range")]))),_:1}),(0,o.createVNode)(mt.y,{activator:"parent",location:"top"},{default:(0,o.withCtx)((()=>r[7]||(r[7]=[(0,o.createTextVNode)(" 履歴を表示 ")]))),_:1})])),_:2},1032,["to"]))])])),_:2},1024),"none"!==t.status?((0,o.openBlock)(),(0,o.createBlock)(F.OQ,{key:0,class:"pa-4"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.Li,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,{cols:"12",md:"5",class:"d-flex flex-column"},{default:(0,o.withCtx)((()=>[r[9]||(r[9]=(0,o.createElementVNode)("div",{class:"text-subtitle-1 font-weight-medium mb-1"}," 作業内容 ",-1)),(0,o.createVNode)(f.x8,{dense:"",class:"bg-transparent pa-0 mb-3"},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(t.projects,((e,t)=>((0,o.openBlock)(),(0,o.createBlock)(f.gc,{key:t,class:"px-2 py-2"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f.UZ,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{small:""},{default:(0,o.withCtx)((()=>r[8]||(r[8]=[(0,o.createTextVNode)(" mdi-folder-outline ")]))),_:1}),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(e.name),1)])),_:2},1024),(0,o.createVNode)(f.w,{class:"d-block ml-2 my-2"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("ul",ea,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.workItems,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{key:t},(0,o.toDisplayString)(e.content),1)))),128))])])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024),t.overtimeHours>=0?((0,o.openBlock)(),(0,o.createElementBlock)("div",ta,[(0,o.createVNode)(qt.A,{"overtime-hours":t.overtimeHours},null,8,["overtime-hours"])])):(0,o.createCommentVNode)("",!0)])),_:2},1024),(0,o.createVNode)(Z.B6,{cols:"12",md:"7"},{default:(0,o.withCtx)((()=>[r[10]||(r[10]=(0,o.createElementVNode)("div",{class:"text-subtitle-1 font-weight-medium mb-1"}," 振り返り（成果と課題） ",-1)),(0,o.createVNode)(bt.J,{modelValue:t.issues,"onUpdate:modelValue":e=>t.issues=e,readonly:"","auto-grow":"",rows:"2","hide-details":"",variant:"outlined",class:"small-text-area mb-2"},null,8,["modelValue","onUpdate:modelValue"]),r[11]||(r[11]=(0,o.createElementVNode)("div",{class:"text-subtitle-1 font-weight-medium mb-1"}," 次の目標、改善施策 ",-1)),(0,o.createVNode)(bt.J,{modelValue:t.improvements,"onUpdate:modelValue":e=>t.improvements=e,readonly:"","auto-grow":"",rows:"1","hide-details":"",variant:"outlined",class:"small-text-area"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024),(0,o.createVNode)(F.Jn,{class:"mt-4 border-sm",elevation:"0",variant:"flat",color:"#e6f3ff"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(F.ri,null,{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",aa,[(0,o.createVNode)(p.wP,{icon:"mdi-equalizer",color:"blue-grey-darken-3",class:"mr-2"}),r[12]||(r[12]=(0,o.createTextVNode)(" 評価 "))])])),_:1}),(0,o.createVNode)(F.OQ,null,{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(T.value,(e=>((0,o.openBlock)(),(0,o.createBlock)(kt,{key:e.key,"model-value":e.getValue(t),label:e.label,"item-labels":e.labels,negative:e.negative,readonly:!0,comparison:e.getComparison(t)},null,8,["model-value","label","item-labels","negative","comparison"])))),128)),t.stressHelp?((0,o.openBlock)(),(0,o.createBlock)(bt.J,{key:0,modelValue:t.stressHelp,"onUpdate:modelValue":e=>t.stressHelp=e,label:"ストレス度：必要な支援や状況の詳細",readonly:"",rows:"1","auto-grow":"","hide-details":"",variant:"outlined",density:"comfortable",class:"mt-8 mx-2"},null,8,["modelValue","onUpdate:modelValue"])):(0,o.createCommentVNode)("",!0)])),_:2},1024)])),_:2},1024),!e.readonly||t.feedbacks.length?((0,o.openBlock)(),(0,o.createBlock)(Z.Li,{key:0,class:"mt-2"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,{cols:"12"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(yt.$t,{modelValue:b.value[t.memberUuid],"onUpdate:modelValue":[e=>b.value[t.memberUuid]=e,e=>b.value[t.memberUuid]=e],elevation:"2",eager:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(yt.ct,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(yt.wS,{class:"bg-plain"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(q.$,{class:"text-body-1 d-flex align-center"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{class:"mr-2",color:"orange"},{default:(0,o.withCtx)((()=>r[13]||(r[13]=[(0,o.createTextVNode)(" mdi-comment-text-outline ")]))),_:1}),r[14]||(r[14]=(0,o.createTextVNode)(" フィードバック ")),t.feedbacks.length?((0,o.openBlock)(),(0,o.createBlock)(ce.Q,{key:0,color:"orange-darken-1",class:"ml-1",content:t.feedbacks.length,inline:""},null,8,["content"])):(0,o.createCommentVNode)("",!0)])),_:2},1024)])),_:2},1024),(0,o.createVNode)(yt.TM,null,{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(t.feedbacks,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:t,class:"pa-0"},[(0,o.createVNode)(bt.J,{modelValue:e.content,"onUpdate:modelValue":t=>e.content=t,label:`${(0,o.unref)(l)(new Date(e.createdAt))}`,readonly:"",rows:"1","auto-grow":"","hide-details":"",density:"comfortable",class:"borderless-textarea"},null,8,["modelValue","onUpdate:modelValue","label"]),e.replyComment?((0,o.openBlock)(),(0,o.createBlock)(bt.J,{key:0,modelValue:e.replyComment,"onUpdate:modelValue":t=>e.replyComment=t,label:"返信コメント",readonly:"",rows:"1","auto-grow":"","hide-details":"",density:"comfortable",class:"ml-4 mt-n2 borderless-textarea"},{"prepend-inner":(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{class:"mr-1",color:"grey-darken-3",size:"large"},{default:(0,o.withCtx)((()=>r[15]||(r[15]=[(0,o.createTextVNode)(" mdi-comment-account-outline ")]))),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,o.createCommentVNode)("",!0)])))),128)),e.readonly?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("div",oa,[(0,o.createVNode)(bt.J,{modelValue:C.value[t.memberUuid],"onUpdate:modelValue":e=>C.value[t.memberUuid]=e,placeholder:"新しいフィードバックを入力...",outlined:"",dense:"","clear-icon":"mdi-close-circle",clearable:"","hide-details":"auto",rows:"2","auto-grow":""},null,8,["modelValue","onUpdate:modelValue"]),(0,o.createVNode)(u.D,{color:"warning",variant:"elevated",disabled:!C.value[t.memberUuid]?.trim(),class:"mt-3 mb-1",onClick:e=>z(t.memberUuid)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{class:"mr-1"},{default:(0,o.withCtx)((()=>r[16]||(r[16]=[(0,o.createTextVNode)(" mdi-reply ")]))),_:1}),r[17]||(r[17]=(0,o.createTextVNode)(" フィードバック送信 "))])),_:2},1032,["disabled","onClick"])]))])),_:2},1024)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)):(0,o.createCommentVNode)("",!0)])),_:2},1024)):(0,o.createCommentVNode)("",!0),"approved"===t.status||"none"===t.status||e.readonly?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(F.SL,{key:1,class:"d-print-none pt-0 pb-3"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.hc),(0,o.createVNode)(u.D,{color:"primary",variant:"elevated",class:"mr-2",outlined:"",onClick:e=>M(t.memberUuid)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{left:"","x-small":"",class:"mr-1"},{default:(0,o.withCtx)((()=>r[18]||(r[18]=[(0,o.createTextVNode)(" mdi-check-bold ")]))),_:1}),r[19]||(r[19]=(0,o.createTextVNode)(" 確認済み "))])),_:2},1032,["onClick"])])),_:2},1024))])),_:2},1032,["class"])))),128))])),_:1}),A.value["none"]>0&&!e.readonly?((0,o.openBlock)(),(0,o.createBlock)(Z.B6,{key:0,cols:"12"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(u.D,{color:"secondary",variant:"elevated",outlined:"",onClick:W},{default:(0,o.withCtx)((()=>[r[21]||(r[21]=(0,o.createTextVNode)(" 報告要求を送信する ")),(0,o.createVNode)(p.wP,{class:"ml-1"},{default:(0,o.withCtx)((()=>r[20]||(r[20]=[(0,o.createTextVNode)(" mdi-send ")]))),_:1})])),_:1})])),_:1})):(0,o.createCommentVNode)("",!0)])),_:1})),(0,o.createVNode)(Jt,{modelValue:Q.value,"onUpdate:modelValue":r[1]||(r[1]=e=>Q.value=e),"report-count":k.value.length,onShare:D},null,8,["modelValue","report-count"])])),_:1}))}};const ra=(0,k.A)(la,[["__scopeId","data-v-1f6a6668"]]);var na=ra,ia={__name:"WeeklyReview",props:{weekString:{type:String,default:null}},setup(e){const t=e,{getWeekFromString:a,getStringFromWeek:l,isWeekInRange:r}=(0,ee._)(),c=(0,n.rd)(),s=(0,i.Pj)(),d=s.getters["auth/organizationId"],u=(0,o.ref)(null),m=(0,o.ref)(!0),p=e=>{if(u.value=e,e&&r(e)){const t=l(e);t?(c.push({name:"WeeklyReview",params:{weekString:t}}),m.value=!0):m.value=!1}else c.push({name:"WeeklyReviewSelector"}),m.value=!0},f=()=>{u.value=null,m.value=!0,c.push({name:"WeeklyReviewSelector"})};return(0,o.watch)((()=>t.weekString),(e=>{if(e){const t=a(e);t&&r(t)?(u.value=t,m.value=!0):(u.value=null,m.value=!1)}else u.value=null,m.value=!0}),{immediate:!0}),(e,t)=>((0,o.openBlock)(),(0,o.createBlock)(Z.IZ,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(lt,{"function-name":"週次報告レビュー",icon:"mdi-calendar-multiple-check","selected-week":u.value,onSelectWeek:p,onReset:f},null,8,["selected-week"]),m.value?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(q.l,{key:0,type:"error",class:"mt-5",outlined:""},{default:(0,o.withCtx)((()=>t[0]||(t[0]=[(0,o.createTextVNode)(" 指定された週は有効範囲外です。 ")]))),_:1})),u.value&&m.value?((0,o.openBlock)(),(0,o.createBlock)(na,{key:1,"organization-id":(0,o.unref)(d),"week-string":(0,o.unref)(l)(u.value)},null,8,["organization-id","week-string"])):(0,o.createCommentVNode)("",!0)])),_:1}))}};const ca=ia;var sa=ca;const da={class:"organization-name text-blue-grey-darken-1"},ua={key:0};var ma={__name:"WeeklyReportSummary",props:{token:{type:String,required:!0}},setup(e){const t=e,{getWeekFromString:a,formatDateRange:l}=(0,ee._)(),r=(0,o.ref)(!1),n=(0,o.ref)(null),i=(0,o.ref)(null),c=(0,o.ref)(null),s=(0,o.inject)("showError");return(0,o.onMounted)((async()=>{r.value=!0;try{const e=await Lt(t.token);n.value=e.organizationId,i.value=e.weekString;const a=await(0,R.SA)(n.value);a&&Object.keys(a).length>0&&(c.value=a),r.value=!1}catch(e){s("Token has expired"===e?.response?.data?"リンクの有効期限が切れています":"キー情報の取得に失敗しました",e)}})),(e,t)=>r.value?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(Z.IZ,{key:0},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.Li,{dense:"",class:"pb-3"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,null,{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("h3",da,[(0,o.createVNode)(p.wP,{size:"large",class:"mr-1"},{default:(0,o.withCtx)((()=>t[0]||(t[0]=[(0,o.createTextVNode)(" mdi-domain ")]))),_:1}),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(c.value?.name),1)])])),_:1})])),_:1}),(0,o.createVNode)(Z.Li,{dense:"",class:"pl-3 pb-4"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,null,{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("h3",null,[(0,o.createVNode)(p.wP,{size:"large",class:"mr-1"},{default:(0,o.withCtx)((()=>t[1]||(t[1]=[(0,o.createTextVNode)(" mdi-calendar-multiple-check ")]))),_:1}),t[2]||(t[2]=(0,o.createTextVNode)(" 週次報告 ")),i.value?((0,o.openBlock)(),(0,o.createElementBlock)("span",ua," ［"+(0,o.toDisplayString)((0,o.unref)(l)((0,o.unref)(a)(i.value)))+"］",1)):(0,o.createCommentVNode)("",!0)])])),_:1})])),_:1}),n.value&&i.value?((0,o.openBlock)(),(0,o.createBlock)(na,{key:0,"organization-id":n.value,"week-string":i.value,readonly:!0},null,8,["organization-id","week-string"])):(0,o.createCommentVNode)("",!0)])),_:1}))}};const pa=ma;var fa=pa,va=a(538);const ga={class:"ml-2 mb-4",style:{width:"50px"}},ha={class:"d-flex flex-column align-center py-6"},wa={class:"d-flex justify-end"};var ka={__name:"OrganizationManagement",setup(e){const t=(0,i.Pj)(),a=(0,o.ref)(null),l=(0,o.inject)("showConfirmDialog"),r=(0,o.inject)("showNotification"),n=(0,o.inject)("showError"),c=(0,o.reactive)({organization:{organizationId:t.getters["auth/organizationId"],name:"",members:[]},newMember:{id:"",name:"",email:""},editingMember:null,loading:!1,isNew:!0,validationErrors:{id:"",name:"",email:""},editValidationErrors:{name:"",email:""},originalMember:null,originalOrgName:""}),{organization:s,newMember:m,editingMember:f,loading:v,isNew:g,validationErrors:h,editValidationErrors:w,originalMember:k,originalOrgName:V}=(0,o.toRefs)(c),y=[{title:"",key:"icon",align:"start",sortable:!1,width:"30px"},{title:"ID",key:"id",align:"start",width:"100px"},{title:"名前",key:"name"},{title:"メールアドレス",key:"email"},{title:"操作",key:"actions",align:"center",sortable:!1,width:"130px"}],x=(e,t,a)=>{const o=(e,t)=>{let a=!0;return e.name.trim()?t.name="":(t.name="名前は必須です",a=!1),e.email.trim()?z(e.email)?t.email="":(t.email="有効なメールアドレスを入力してください",a=!1):(t.email="メールアドレスは必須です",a=!1),a},l=()=>{let l=o(t.value,a.value);return t.value.id.trim()?e.value.members.some((e=>e.id===t.value.id))?(a.value.id="既に存在します",l=!1):a.value.id="":(a.value.id="IDは必須です",l=!1),l};return{validateMember:o,validateNewMember:l}},{validateMember:N,validateNewMember:b}=x(s,m,h),C=(0,o.computed)((()=>{const e=(0,d.P8)();return e.adminFeatures})),_=(0,o.computed)((()=>{const e=C.value.maxMembers;return-1!==e&&s.value.members.length>=e})),E=(0,o.computed)((()=>!m.value.id.trim()||!m.value.name.trim()||!m.value.email.trim()||_.value)),A={setEditingMember(e){f.value=e?{...e}:null,k.value=e?{...e}:null,w.value={name:"",email:""}},async handleAddMember(){if(_.value){const e=C.value.maxMembers;n("エラー",`現在のプランでは${-1===e?"無制限です。":`最大${e}名まで`}しか登録できません。`)}else if(b()){const t={id:m.value.id,name:m.value.name,email:m.value.email,organizationId:s.value.organizationId};try{await(0,oe.bi)(t),s.value.members.push(t),m.value={id:"",name:"",email:""},h.value={id:"",name:"",email:""},r("メンバーを追加しました")}catch(e){n("メンバーの追加に失敗しました",e)}}},async handleUpdateMember(e){if(N(e,w.value))try{await(0,oe.ON)({...e,organizationId:s.value.organizationId});const t=s.value.members.findIndex((t=>t.id===e.id));-1!==t&&(s.value.members[t]={...e}),f.value=null,k.value=null,w.value={name:"",email:""},r("メンバー情報を更新しました")}catch(t){n("メンバー情報の更新に失敗しました",t)}},async handleDeleteMember(e){const t=await l("削除確認","このメンバーを削除しますか？\nこの操作は取り消せません。","error");if(t){const t=s.value.members.find((t=>t.id===e));if(!t)return;try{await(0,oe.cx)(t.memberUuid),s.value.members=s.value.members.filter((t=>t.id!==e)),r("メンバーを削除しました")}catch(a){n("メンバーの削除に失敗しました",a)}}},cancelEdit(){if(k.value&&f.value){const e=s.value.members.findIndex((e=>e.id===f.value.id));-1!==e&&(s.value.members[e]={...k.value})}f.value=null,k.value=null}},S=(0,o.computed)((()=>s.value.name!==V.value)),I=async()=>{if(s.value.name.trim())try{await(0,te.L_)({organizationId:s.value.organizationId,name:s.value.name}),V.value=s.value.name,r("組織名を更新しました")}catch(e){n("組織名の更新に失敗しました",e),s.value.name=V.value}};(0,o.onMounted)((async()=>{const e=t.getters["auth/organizationId"];if(e){v.value=!0;try{const[t,a]=await Promise.all([(0,te.SA)(e),(0,oe.rF)(e)]);t&&Object.keys(t).length>0?(s.value={...t,members:a||[]},V.value=t.name,g.value=!1):g.value=!0}catch(a){n("組織情報の取得に失敗しました",a)}finally{v.value=!1}}}));const{setEditingMember:D,handleAddMember:T,handleUpdateMember:P,handleDeleteMember:O,cancelEdit:U}=A;return(e,t)=>((0,o.openBlock)(),(0,o.createBlock)(Z.IZ,{class:"organization-management-container"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.Li,{dense:"",class:"pb-4"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,null,{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("h3",null,[(0,o.createVNode)(p.wP,{size:"large",class:"mr-1"},{default:(0,o.withCtx)((()=>t[5]||(t[5]=[(0,o.createTextVNode)(" mdi-domain ")]))),_:1}),t[6]||(t[6]=(0,o.createTextVNode)(" 組織情報管理 "))])])),_:1})])),_:1}),(0,o.createVNode)(F.Jn,{class:"organization-card px-md-6 rounded-lg",outlined:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(G.n,{ref_key:"form",ref:a},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.Li,{class:"mt-2 px-3"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,{cols:"12",sm:"3"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Q.W,{modelValue:(0,o.unref)(s).organizationId,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,o.unref)(s).organizationId=e),label:"組織ID",variant:"plain",outlined:"",dense:"",readonly:"","hide-details":""},null,8,["modelValue"])])),_:1}),(0,o.createVNode)(Z.B6,{cols:"12",sm:"9",class:"d-flex align-center"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Q.W,{modelValue:(0,o.unref)(s).name,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,o.unref)(s).name=e),label:"組織名",outlined:"",dense:"",class:"organization-name-input flex-grow-1",rules:[e=>!!e||"組織名は必須です"],required:""},null,8,["modelValue","rules"]),(0,o.createElementVNode)("div",ga,[S.value?((0,o.openBlock)(),(0,o.createBlock)(u.D,{key:0,icon:"",small:"",onClick:I},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{color:"teal"},{default:(0,o.withCtx)((()=>t[7]||(t[7]=[(0,o.createTextVNode)("mdi-check")]))),_:1})])),_:1})):(0,o.createCommentVNode)("",!0)])])),_:1})])),_:1}),(0,o.createVNode)(F.Jn,{elevation:"0",class:"pa-1"},{default:(0,o.withCtx)((()=>[_.value?((0,o.openBlock)(),(0,o.createBlock)(q.l,{key:0,type:"warning",density:"compact",variant:"tonal",class:"mb-4"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)(" メンバー数が上限（"+(0,o.toDisplayString)(C.value.maxMembers)+"名）に達しています。",1),t[8]||(t[8]=(0,o.createElementVNode)("br",null,null,-1)),t[9]||(t[9]=(0,o.createTextVNode)(" より多くのメンバーを追加するには、プランのアップグレードが必要です。 "))])),_:1})):(0,o.createCommentVNode)("",!0),(0,o.unref)(v)?((0,o.openBlock)(),(0,o.createBlock)(Nt.V,{key:1,elevation:"4",type:"table-tbody"})):((0,o.openBlock)(),(0,o.createBlock)(va.Py,{key:2,headers:y,items:(0,o.unref)(s).members,"hide-default-footer":"","items-per-page":-1,class:"member-table text-body-2 elevation-4 mobile-responsive-table"},{"no-data":(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",ha,[(0,o.createVNode)(p.wP,{size:"48",color:"grey-lighten-1",class:"mb-2"},{default:(0,o.withCtx)((()=>t[10]||(t[10]=[(0,o.createTextVNode)(" mdi-account-group-outline ")]))),_:1}),t[11]||(t[11]=(0,o.createElementVNode)("div",{class:"text-grey"},"メンバーが登録されていません",-1))])])),["item.icon"]:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{size:"x-large"},{default:(0,o.withCtx)((()=>t[12]||(t[12]=[(0,o.createTextVNode)("mdi-account-box-outline")]))),_:1})])),["item.id"]:(0,o.withCtx)((({item:e})=>[(0,o.createVNode)(Q.W,{value:e.id,dense:"","hide-details":"",readonly:""},null,8,["value"])])),["item.name"]:(0,o.withCtx)((({item:e})=>[(0,o.createVNode)(Q.W,{modelValue:e.name,"onUpdate:modelValue":t=>e.name=t,outlined:"",dense:"","hide-details":"",readonly:(0,o.unref)(f)?.id!==e.id,"error-messages":(0,o.unref)(f)?.id===e.id?(0,o.unref)(w).name:""},null,8,["modelValue","onUpdate:modelValue","readonly","error-messages"])])),["item.email"]:(0,o.withCtx)((({item:e})=>[(0,o.createVNode)(Q.W,{modelValue:e.email,"onUpdate:modelValue":t=>e.email=t,outlined:"",dense:"","hide-details":"",readonly:(0,o.unref)(f)?.id!==e.id,"error-messages":(0,o.unref)(f)?.id===e.id?(0,o.unref)(w).email:""},{append:(0,o.withCtx)((()=>[e.emailConfirmed?(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(p.wP,{key:0,color:"success"},{default:(0,o.withCtx)((()=>t[13]||(t[13]=[(0,o.createTextVNode)(" mdi-check-circle ")]))),_:1})),[[B.m_,"メール確認済み","top"]]):(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(p.wP,{key:1,color:"grey"},{default:(0,o.withCtx)((()=>t[14]||(t[14]=[(0,o.createTextVNode)(" mdi-email-search-outline ")]))),_:1})),[[B.m_,"メール確認中","top"]])])),_:2},1032,["modelValue","onUpdate:modelValue","readonly","error-messages"])])),["item.actions"]:(0,o.withCtx)((({item:e})=>[(0,o.createElementVNode)("div",wa,[(0,o.unref)(f)?.id===e.id?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(u.D,{icon:"",small:"",onClick:(0,o.unref)(U)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,null,{default:(0,o.withCtx)((()=>t[15]||(t[15]=[(0,o.createTextVNode)("mdi-close")]))),_:1})])),_:1},8,["onClick"])),[[B.m_,"キャンセル","top"]]),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(u.D,{icon:"",small:"",onClick:t=>(0,o.unref)(P)(e)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{color:"teal"},{default:(0,o.withCtx)((()=>t[16]||(t[16]=[(0,o.createTextVNode)("mdi-check")]))),_:1})])),_:2},1032,["onClick"])),[[B.m_,"保存","top"]])],64)):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(u.D,{icon:"",small:"",onClick:t=>(0,o.unref)(D)(e)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,null,{default:(0,o.withCtx)((()=>t[17]||(t[17]=[(0,o.createTextVNode)("mdi-pencil")]))),_:1})])),_:2},1032,["onClick"])),[[B.m_,"編集","top"]]),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(u.D,{icon:"",small:"",onClick:t=>(0,o.unref)(O)(e.id)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,null,{default:(0,o.withCtx)((()=>t[18]||(t[18]=[(0,o.createTextVNode)("mdi-delete")]))),_:1})])),_:2},1032,["onClick"])),[[B.m_,"削除","top"]])],64))])])),_:2},1032,["items"]))])),_:1}),(0,o.createVNode)(Z.Li,{class:"mt-4 mx-0 align-center"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,{cols:"12",sm:"2",class:"px-1"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Q.W,{modelValue:(0,o.unref)(m).id,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,o.unref)(m).id=e),label:"ID",maxlength:8,outlined:"",dense:"",color:"primary","error-messages":(0,o.unref)(h).id,class:"member-id-input mr-2"},null,8,["modelValue","error-messages"])])),_:1}),(0,o.createVNode)(Z.B6,{cols:"12",sm:"3",class:"px-1"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Q.W,{modelValue:(0,o.unref)(m).name,"onUpdate:modelValue":t[3]||(t[3]=e=>(0,o.unref)(m).name=e),label:"名前",outlined:"",dense:"",color:"primary","error-messages":(0,o.unref)(h).name,class:"member-name-input mr-2"},null,8,["modelValue","error-messages"])])),_:1}),(0,o.createVNode)(Z.B6,{cols:"12",sm:"5",class:"px-1"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Q.W,{modelValue:(0,o.unref)(m).email,"onUpdate:modelValue":t[4]||(t[4]=e=>(0,o.unref)(m).email=e),label:"メールアドレス",outlined:"",dense:"",color:"primary","error-messages":(0,o.unref)(h).email,class:"member-email-input mr-2"},null,8,["modelValue","error-messages"])])),_:1}),(0,o.createVNode)(Z.B6,{cols:"12",sm:"2",class:"px-1"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(u.D,{color:"primary",disabled:E.value,onClick:(0,o.unref)(T)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{class:"mr-1"},{default:(0,o.withCtx)((()=>t[19]||(t[19]=[(0,o.createTextVNode)("mdi-account-plus")]))),_:1}),t[20]||(t[20]=(0,o.createTextVNode)(" メンバー登録 "))])),_:1},8,["disabled","onClick"])])),_:1})])),_:1})])),_:1},512)])),_:1})])),_:1}))}};const Va=(0,k.A)(ka,[["__scopeId","data-v-e17f2c9c"]]);var ya=Va,xa=a(6756);const Na={class:"d-flex justify-end mb-4"},ba={class:"text-subtitle-1"},Ca={class:"ml-1 font-weight-bold"},_a={class:"d-flex flex-column align-center py-6"},Ea={class:"d-flex justify-end"};var Ba={__name:"OrganizationAccount",setup(e){const t=(0,i.Pj)(),a=(0,o.ref)(null),l=(0,o.inject)("showConfirmDialog"),r=(0,o.inject)("showNotification"),n=(0,o.inject)("showError"),c=t.getters["auth/organizationId"],s=(0,o.ref)(""),m=(0,o.ref)({organizationName:"",email:""}),f=(0,o.ref)([]),v=(0,o.ref)(!1),g=(0,o.ref)(!1),h=(0,o.ref)(null),w=(0,o.ref)(null),k=[{title:"組織ID",key:"organizationId",width:"130px"},{title:"組織名",key:"organizationName"},{title:"メールアドレス",key:"email"},{title:"操作",key:"actions",align:"center",sortable:!1,width:"130px"}],V=e=>{switch(e){case"CONFIRMED":return"mdi-check-circle";case"FORCE_CHANGE_PASSWORD":return"mdi-account-clock-outline";default:return"mdi-alert-circle"}},y=e=>{switch(e){case"CONFIRMED":return"success";case"FORCE_CHANGE_PASSWORD":return"grey";default:return"error"}},x=e=>{switch(e){case"CONFIRMED":return"有効";case"FORCE_CHANGE_PASSWORD":return"初期設定待ち";default:return"無効"}},N=async()=>{if(!a.value)return;const e=await a.value.validate();g.value=e.valid},b=()=>{N()},C=async()=>{v.value=!0;try{f.value=await(0,xa.P4)({parentOrganizationId:c})}catch(e){n("アカウント情報の取得に失敗しました",e)}finally{v.value=!1}},_=e=>e?.response?.data?.message||e?.message||"",E=async()=>{if(!g.value)return;const e=t.getters["auth/currentSubscription"];if(f.value.length>=e.accountCount)n(`現在のプランでは${e.accountCount}アカウントまでしか作成できません。プランをアップグレードしてください。`);else{v.value=!0;try{await(0,xa._m)({organizationId:s.value,...m.value,parentOrganizationId:c}),r("アカウントを作成しました"),s.value="",m.value={organizationName:"",email:""},g.value=!1,a.value&&a.value.reset(),await C()}catch(o){const e=_(o),t="アカウントの作成に失敗しました"+(e?`（${e}）`:"");n(t,o)}finally{v.value=!1}}},A=async e=>{const t=e.organizationName||e.organizationId||"未設定",a=await l("削除確認",`${t}のアカウントと組織情報を削除しますか？\nこの操作は取り消せません。`,"error");if(a){v.value=!0;try{await(0,xa.lw)(e.organizationId,e.email),await(0,te.fT)(e.organizationId),r("アカウントと組織情報を削除しました"),await C()}catch(o){n("アカウントの削除に失敗しました",o)}finally{v.value=!1}}},S=async e=>{try{await(0,xa.lk)(e.email),r("招待メールを再送信しました")}catch(t){n("招待メールの再送信に失敗しました",t)}},I=e=>{h.value={...e},w.value={...e}},D=async e=>{try{if(!z(e.email))return void n("有効なメールアドレスを入力してください");if(!e.organizationName)return void n("組織名は必須です");await(0,xa.z0)({organizationId:e.organizationId,organizationName:e.organizationName,email:e.email,oldEmail:h.value.email}),r("アカウント情報を更新しました"),h.value=null,w.value=null}catch(t){const e=_(t),a="アカウントの更新に失敗しました"+(e?`（${e}）`:"");n(a,t)}},T=()=>{if(w.value&&h.value){const e=f.value.findIndex((e=>e.organizationId===h.value.organizationId));-1!==e&&(f.value[e]={...w.value})}h.value=null,w.value=null},P=(0,o.computed)((()=>t.getters["auth/currentSubscription"].accountCount)),O=(0,o.computed)((()=>{const e=t.getters["auth/isParentAccount"],a=(0,d.P8)().adminFeatures.accountManagement;return e&&a}));return(0,o.onMounted)((async()=>{O.value?await C():n("この機能は親組織アカウントのみが利用できます")})),(e,t)=>O.value?((0,o.openBlock)(),(0,o.createBlock)(Z.IZ,{key:0,class:"account-management-container"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.Li,{dense:"",class:"pb-4"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,null,{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("h3",null,[(0,o.createVNode)(p.wP,{size:"large",class:"mr-1"},{default:(0,o.withCtx)((()=>t[4]||(t[4]=[(0,o.createTextVNode)(" mdi-account-cog ")]))),_:1}),t[5]||(t[5]=(0,o.createTextVNode)(" 組織アカウント管理 "))])])),_:1})])),_:1}),(0,o.createVNode)(F.Jn,{class:"account-card pt-4 px-md-6",outlined:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(G.n,{ref_key:"form",ref:a,modelValue:g.value,"onUpdate:modelValue":t[3]||(t[3]=e=>g.value=e),onSubmit:(0,o.withModifiers)(E,["prevent"])},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",Na,[(0,o.createElementVNode)("div",ba,[t[6]||(t[6]=(0,o.createTextVNode)(" 登録アカウント数: ")),(0,o.createElementVNode)("span",Ca,(0,o.toDisplayString)(f.value.length)+" / "+(0,o.toDisplayString)(P.value),1)])]),(0,o.createVNode)(F.Jn,{elevation:"0",class:"pa-1"},{default:(0,o.withCtx)((()=>[v.value?((0,o.openBlock)(),(0,o.createBlock)(Nt.V,{key:0,elevation:"4",type:"table-tbody"})):((0,o.openBlock)(),(0,o.createBlock)(va.Py,{key:1,loading:v.value,headers:k,items:f.value,"items-per-page":-1,"hide-default-footer":"",class:"account-table text-body-2 elevation-4 mobile-responsive-table"},{"no-data":(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",_a,[(0,o.createVNode)(p.wP,{size:"48",color:"grey-lighten-1",class:"mb-2"},{default:(0,o.withCtx)((()=>t[7]||(t[7]=[(0,o.createTextVNode)(" mdi-account-group-outline ")]))),_:1}),t[8]||(t[8]=(0,o.createElementVNode)("div",{class:"text-grey"},"アカウントが登録されていません",-1))])])),["item.organizationId"]:(0,o.withCtx)((({item:e})=>[(0,o.createVNode)(Q.W,{value:e.organizationId,dense:"","hide-details":"",readonly:""},null,8,["value"])])),["item.organizationName"]:(0,o.withCtx)((({item:e})=>[(0,o.createVNode)(Q.W,{modelValue:e.organizationName,"onUpdate:modelValue":t=>e.organizationName=t,outlined:"",dense:"","hide-details":"",readonly:h.value?.organizationId!==e.organizationId,required:""},null,8,["modelValue","onUpdate:modelValue","readonly"])])),["item.email"]:(0,o.withCtx)((({item:e})=>[(0,o.createVNode)(Q.W,{modelValue:e.email,"onUpdate:modelValue":t=>e.email=t,outlined:"",dense:"","hide-details":"",readonly:h.value?.organizationId!==e.organizationId,required:""},{append:(0,o.withCtx)((()=>[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(p.wP,{color:y(e.status)},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(V(e.status)),1)])),_:2},1032,["color"])),[[B.m_,x(e.status),"top"]])])),_:2},1032,["modelValue","onUpdate:modelValue","readonly"])])),["item.actions"]:(0,o.withCtx)((({item:e})=>[(0,o.createElementVNode)("div",Ea,["FORCE_CHANGE_PASSWORD"===e.status?(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(u.D,{key:0,icon:"",small:"",disabled:v.value,onClick:t=>S(e)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,null,{default:(0,o.withCtx)((()=>t[9]||(t[9]=[(0,o.createTextVNode)("mdi-email")]))),_:1})])),_:2},1032,["disabled","onClick"])),[[B.m_,"招待メールを再送信","top"]]):(0,o.createCommentVNode)("",!0),h.value?.organizationId===e.organizationId?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(u.D,{icon:"",small:"",disabled:v.value,onClick:T},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,null,{default:(0,o.withCtx)((()=>t[10]||(t[10]=[(0,o.createTextVNode)("mdi-close")]))),_:1})])),_:1},8,["disabled"])),[[B.m_,"キャンセル","top"]]),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(u.D,{icon:"",small:"",disabled:v.value,onClick:t=>D(e)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{color:"success"},{default:(0,o.withCtx)((()=>t[11]||(t[11]=[(0,o.createTextVNode)("mdi-check")]))),_:1})])),_:2},1032,["disabled","onClick"])),[[B.m_,"保存","top"]])],64)):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:2},[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(u.D,{icon:"",small:"",disabled:v.value,onClick:t=>I(e)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,null,{default:(0,o.withCtx)((()=>t[12]||(t[12]=[(0,o.createTextVNode)("mdi-pencil")]))),_:1})])),_:2},1032,["disabled","onClick"])),[[B.m_,"編集","top"]]),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(u.D,{icon:"",small:"",disabled:v.value,onClick:t=>A(e)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,null,{default:(0,o.withCtx)((()=>t[13]||(t[13]=[(0,o.createTextVNode)("mdi-delete")]))),_:1})])),_:2},1032,["disabled","onClick"])),[[B.m_,"削除","top"]])],64))])])),_:2},1032,["loading","items"]))])),_:1}),(0,o.createVNode)(Z.Li,{class:"mt-4"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,{cols:"12",sm:"3"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Q.W,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),label:"組織ID",outlined:"",dense:"",rules:[(0,o.unref)(j)],required:"",onInput:b},null,8,["modelValue","rules"])])),_:1}),(0,o.createVNode)(Z.B6,{cols:"12",sm:"5"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Q.W,{modelValue:m.value.organizationName,"onUpdate:modelValue":t[1]||(t[1]=e=>m.value.organizationName=e),label:"組織名",outlined:"",dense:"",rules:[e=>!!e||"組織名は必須です"],required:"",onInput:N},null,8,["modelValue","rules"])])),_:1}),(0,o.createVNode)(Z.B6,{cols:"12",sm:"4"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Q.W,{modelValue:m.value.email,"onUpdate:modelValue":t[2]||(t[2]=e=>m.value.email=e),label:"メールアドレス",outlined:"",dense:"",rules:[e=>!!e||"メールアドレスは必須です",e=>(0,o.unref)(z)(e)||"有効なメールアドレスを入力してください"],required:"",onInput:N},null,8,["modelValue","rules"])])),_:1})])),_:1}),(0,o.createVNode)(Z.Li,{class:"mt-2"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,{cols:"12",class:"d-flex justify-end"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(u.D,{color:"primary",type:"submit",loading:v.value,disabled:!g.value},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{class:"mr-1"},{default:(0,o.withCtx)((()=>t[14]||(t[14]=[(0,o.createTextVNode)("mdi-account-plus")]))),_:1}),t[15]||(t[15]=(0,o.createTextVNode)(" アカウント作成 "))])),_:1},8,["loading","disabled"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})):(0,o.createCommentVNode)("",!0)}};const Aa=(0,k.A)(Ba,[["__scopeId","data-v-03cd3612"]]);var Sa=Aa;const Ia=async e=>Mt.uE.post("/ses/check",{email:e}),Da=async e=>Mt.uE.post("/ses/verify",{email:e});var Ta=a(6813),Pa=a(223);const Oa={apiKey:"AIzaSyAxggCyq9kG85KgqxRyHTBA4LeZ73K_wFY",authDomain:"fluxweek-b9d9a.firebaseapp.com",projectId:"fluxweek-b9d9a",storageBucket:"fluxweek-b9d9a.appspot.com",messagingSenderId:"940087264635",appId:"1:940087264635:web:3bc11acbabfe4439fce9de",measurementId:"G-V6WMXXDDKX"},Ua=(0,Pa.Wp)(Oa),Ra={key:1},za={class:"text-body-2 text-grey pl-3"},Ma={class:"d-flex align-center mb-1"},Wa={class:"d-flex align-center mb-1"},La={class:"d-flex align-center"},ja={class:"v-input--error"},qa={class:"v-messages"},Fa={class:"v-messages__message pl-4"};var Ha={__name:"PushNortification",setup(e){const t=(0,i.Pj)(),a=(0,o.ref)(!1),l=(0,o.ref)("default"),r=(0,o.ref)(!1),n=(0,o.ref)(!1),c=(0,o.ref)(""),d=(0,o.ref)(navigator.onLine),m=(0,o.ref)(null),f=t.getters["auth/organizationId"],v=t.getters["auth/cognitoUserSub"],g=(0,o.computed)((()=>r.value?k.value?"mdi-bell-outline":"mdi-bell-off-outline":"mdi-progress-clock")),h=(0,o.computed)((()=>r.value&&k.value?"success":"grey")),w=(0,o.computed)((()=>r.value?k.value?"プッシュ通知: 有効":"プッシュ通知: 無効":"Service Worker初期化中")),k=(0,o.computed)((()=>"granted"===l.value&&a.value));(0,o.watch)(r,(async e=>{e&&(await b(),await C(),await(0,o.nextTick)())})),(0,o.onMounted)((()=>{window.addEventListener("online",V),window.addEventListener("offline",V),(0,o.nextTick)((async()=>{try{await y()}catch(e){}}))})),(0,o.onUnmounted)((()=>{window.removeEventListener("online",V),window.removeEventListener("offline",V),m.value&&clearInterval(m.value)}));const V=()=>{d.value=navigator.onLine},y=async()=>{if("serviceWorker"in navigator)try{const e=`${s.VJ}firebase-messaging-sw.js`,t=await navigator.serviceWorker.register(e,{scope:s.VJ});await N(t),r.value=!0,O(),await(0,o.nextTick)()}catch(e){P(`Service Workerの初期化に失敗しました: ${e.message}`),r.value=!1,await(0,o.nextTick)(),x()}else P("このブラウザはService Workerをサポートしていません。"),r.value=!1},x=()=>{window.hasShownReloadPrompt||(window.hasShownReloadPrompt=!0,confirm("Service Workerの初期化に失敗しました。ページを再読み込みしますか？")&&window.location.reload())},N=async e=>new Promise(((t,a)=>{const o=setTimeout((()=>{a(new Error("Service Worker ready timeout"))}),3e4),l=()=>{e.active&&navigator.serviceWorker.controller?(clearTimeout(o),t()):setTimeout(l,1e3)};e.active&&navigator.serviceWorker.controller?(clearTimeout(o),t()):(e.addEventListener("updatefound",l),navigator.serviceWorker.addEventListener("controllerchange",l),l())})),b=async()=>{"Notification"in window&&(l.value=Notification.permission)},C=async()=>{const e=await D();if(e)try{const t=await(0,te.GZ)(f,v);a.value=e===t}catch(t){P("サーバーでの購読確認に失敗しました。")}else a.value=!1},_=async()=>{if(r.value){if(O(),"default"===l.value){const e=await Notification.requestPermission();l.value=e,"granted"===e?await E():a.value=!1}else"granted"===l.value&&(a.value?await B():await E());await C()}else P("Service Workerの準備ができていません。しばらく待ってから再試行してください。")},E=async()=>{try{const e=(0,Ta.dG)(Ua),t=await navigator.serviceWorker.getRegistration(s.VJ),o=await(0,Ta.gf)(e,{serviceWorkerRegistration:t});o?(await A(o),a.value=!0):P("FCMトークンの取得に失敗しました。")}catch(e){P(`プッシュ通知の購読に失敗しました: ${e.message}`)}},B=async()=>{const e=await D();if(e)try{await S(),a.value=!1}catch(t){P("プッシュ通知の購読解除に失敗しました。")}},A=async e=>{try{const t=await(0,te.dM)(e,f,v);await I(t.endpointArn)}catch(t){throw t}},S=async()=>{try{await(0,te.ig)(f,v),await T()}catch(e){throw e}},I=async e=>{localStorage.setItem("endpointArn",e)},D=async()=>localStorage.getItem("endpointArn"),T=async()=>{localStorage.removeItem("endpointArn")},P=e=>{n.value=!0,c.value=e},O=()=>{n.value=!1,c.value=""},U=()=>{alert("ブラウザの通知設定を変更する方法:\n  1. ブラウザの設定/環境設定を開きます。\n  2. プライバシーとセキュリティ（または類似の項目）を探します。\n  3. サイトの設定（または権限）を見つけます。\n  4. 通知の設定を探し、このサイトの権限を「許可」に変更します。\n  5. ページを再読み込みしてください。")},R=async()=>{if("caches"in window){const e=await caches.keys();await Promise.all(e.map((e=>caches.delete(e))))}},z=async()=>{if("serviceWorker"in navigator){const e=await navigator.serviceWorker.getRegistrations();for(let t of e)await t.unregister();await R(),window.location.reload()}};return(e,t)=>((0,o.openBlock)(),(0,o.createBlock)(Z.IZ,{class:"pa-0"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.Li,{align:"center",justify:"start","no-gutters":""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,{cols:"12"},{default:(0,o.withCtx)((()=>["default"===l.value||"granted"===l.value?((0,o.openBlock)(),(0,o.createBlock)(Ye.N,{key:0,"model-value":k.value,color:"primary","hide-details":"",inset:"",disabled:!r.value,"onUpdate:modelValue":_},{prepend:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{color:h.value,class:"mr-1",size:"large"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(g.value),1)])),_:1},8,["color"]),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(w.value),1)])),_:1},8,["model-value","disabled"])):"denied"===l.value?((0,o.openBlock)(),(0,o.createElementBlock)("div",Ra,[t[1]||(t[1]=(0,o.createElementVNode)("span",{class:"text-error mx-2"},"プッシュ通知が拒否されています。",-1)),(0,o.createVNode)(u.D,{color:"grey",small:"",onClick:U},{default:(0,o.withCtx)((()=>t[0]||(t[0]=[(0,o.createTextVNode)(" 設定変更方法を表示 ")]))),_:1})])):(0,o.createCommentVNode)("",!0)])),_:1}),(0,o.createVNode)(Z.B6,{cols:"12",class:"mt-2"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",za,[(0,o.createElementVNode)("div",Ma,[(0,o.createVNode)(p.wP,{size:"small",class:"mr-2",color:a.value?"success":"grey"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(a.value?"mdi-check-circle":"mdi-circle-outline"),1)])),_:1},8,["color"]),(0,o.createElementVNode)("span",null,"通知設定: "+(0,o.toDisplayString)(a.value?"登録済み":"未登録"),1)]),(0,o.createElementVNode)("div",Wa,[(0,o.createVNode)(p.wP,{size:"small",class:"mr-2",color:r.value?"success":"grey"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(r.value?"mdi-check-circle":"mdi-progress-clock"),1)])),_:1},8,["color"]),(0,o.createElementVNode)("span",null,"システム準備状況: "+(0,o.toDisplayString)(r.value?"完了":"準備中"),1)]),(0,o.createElementVNode)("div",La,[(0,o.createVNode)(p.wP,{size:"small",class:"mr-2",color:"granted"===l.value?"success":"grey"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)("granted"===l.value?"mdi-check-circle":"mdi-alert-circle"),1)])),_:1},8,["color"]),(0,o.createElementVNode)("span",null,"ブラウザの許可: "+(0,o.toDisplayString)("granted"===l.value?"許可済み":"denied"===l.value?"拒否":"未設定"),1)])])])),_:1}),n.value?((0,o.openBlock)(),(0,o.createBlock)(Z.B6,{key:0,cols:"11"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",ja,[(0,o.createElementVNode)("div",qa,[(0,o.createElementVNode)("div",Fa,(0,o.toDisplayString)(c.value),1)])])])),_:1})):(0,o.createCommentVNode)("",!0),n.value?((0,o.openBlock)(),(0,o.createBlock)(Z.B6,{key:1,cols:"1",class:"d-flex justify-end"},{default:(0,o.withCtx)((()=>[r.value?((0,o.openBlock)(),(0,o.createBlock)(u.D,{key:0,icon:"mdi-reload",color:"error",density:"comfortable",onClick:z})):(0,o.createCommentVNode)("",!0)])),_:1})):(0,o.createCommentVNode)("",!0),d.value?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(Z.B6,{key:2,cols:"auto"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Be.x,{color:"warning",small:""},{default:(0,o.withCtx)((()=>t[2]||(t[2]=[(0,o.createTextVNode)(" オフライン ")]))),_:1})])),_:1}))])),_:1})])),_:1}))}};const Ga=Ha;var Za=Ga,Qa=a(496),Ja=a(2234),Ka=a(1982);const Ya={class:"d-flex align-center mt-2"},Xa={class:"d-flex align-center justify-start"},$a={class:"d-flex align-center"},eo={class:"text-subtitle-1"},to={class:"d-flex align-center gap-4"},ao={key:0,class:"text-caption mb-3 text-warning"},oo={class:"d-flex justify-end mt-4"},lo={class:"d-flex align-center gap-4"};var ro={__name:"ReportSetting",setup(e){const t=(0,n.rd)(),a=(0,i.Pj)(),l=(0,o.inject)("showNotification"),r=(0,o.inject)("showError"),s=(0,o.ref)(null),m=(0,o.ref)(!1),f=(0,o.ref)(!1),v=(0,o.ref)("request"),g=(0,o.computed)((()=>(0,d.P8)())),h=(0,o.ref)(null),w=a.getters["auth/organizationId"],{isMobile:k}=(0,c.Q)(),V=()=>{const e=(0,o.ref)("Pending"),t=(0,o.ref)(!1),a=(0,o.computed)((()=>({Success:"success",Failed:"error",Pending:"grey",Checking:"grey",Error:"error"}[e.value]||"grey"))),n=(0,o.computed)((()=>({Success:"mdi-check-circle",Failed:"mdi-alert-circle",Pending:"mdi-progress-clock",Checking:"mdi-progress-clock",Error:"mdi-alert"}[e.value]||"mdi-progress-clock"))),i=(0,o.computed)((()=>({Success:"検証済み",Failed:"未検証",Pending:"検証中",Checking:"検証中",Error:"エラー"}[e.value]||"検証中"))),c=async a=>{if(a&&z(a))try{e.value="Checking";const o=await Ia(a);e.value=o.status,"Pending"!==o.status||t.value||l("メールアドレスの検証が保留中です。メールボックスを確認してください。","info")}catch(o){e.value="Error",r("メールアドレスの検証状態の確認中にエラーが発生しました。",o)}else e.value="Failed"},s=async e=>{if(e&&z(e)){t.value=!0;try{await Da(e),l("検証メールを送信しました。メールを確認して検証を完了してください。","info"),await c(e)}catch(a){r("メールアドレスの検証に失敗しました。",a)}finally{t.value=!1}}else r("有効なメールアドレスを入力してください。")};return{status:e,statusColor:a,statusIcon:n,statusText:i,check:c,verify:s,verifying:t}},{status:y,statusColor:x,statusIcon:N,statusText:C,check:_,verify:E,verifying:A}=V(),S=(0,o.reactive)({requestEnabled:!0,sender:"",senderName:"",requestDayOfWeek:"monday",requestTime:"06:00",reportWeek:-1}),I=(0,o.ref)(null),D=(0,o.computed)((()=>I.value&&JSON.stringify(S)!==JSON.stringify(I.value))),T=[e=>!!e||"メールアドレスは必須です",e=>z(e)||"有効なメールアドレスを入力してください"],P=[e=>!!e||"送信者名は必須です",e=>{if(!e)return!0;const t=L(e);return t.message||!0}],O=[{text:"月曜日",value:"monday"},{text:"火曜日",value:"tuesday"},{text:"水曜日",value:"wednesday"},{text:"木曜日",value:"thursday"},{text:"金曜日",value:"friday"},{text:"土曜日",value:"saturday"},{text:"日曜日",value:"sunday"}],U=(0,o.computed)((()=>Array.from({length:24},((e,t)=>{const a=`${t.toString().padStart(2,"0")}:00`;return{text:a,value:a}})))),R=[{text:"前週",value:-1},{text:"当週",value:0}];(0,o.watch)((()=>S.sender),((e,t)=>{if(e!==t){if(z(e)){const t=setTimeout((()=>_(e)),500);return()=>clearTimeout(t)}y.value="Failed"}}));const M=async()=>{if(f.value&&D.value)if(await _(S.sender),"Success"===y.value)try{const e={...h.value,...S};await(0,te.L_)(e),l("報告依頼設定を更新しました"),I.value=JSON.parse(JSON.stringify(S))}catch(e){r("報告依頼設定の保存に失敗しました",e)}else r("送信元メールアドレスが検証されていません。設定を保存できません。")},W=(0,o.ref)(!1),j=async()=>{if(g.value.adminFeatures.notifications)try{const e=!W.value;await(0,te.ao)(w,{notifyByEmail:e}),W.value=e}catch(e){r("メール通知設定の更新に失敗しました",e),W.value=!W.value}else r("この機能はプロプラン以上でご利用いただけます。")},H=(0,o.ref)([]),J=(0,o.ref)([]),K=(0,o.ref)(!1),Y=(0,o.computed)((()=>{const e=[...H.value].sort(),t=[...J.value].sort();return JSON.stringify(e)!==JSON.stringify(t)})),X=(0,o.computed)((()=>g.value.organizationFeatures.weeklyReportAdvice?tt._4:Object.fromEntries(Object.entries(tt._4).filter((([e])=>tt.XG.includes(e)))))),$=(0,o.computed)((()=>H.value.length>0)),ee=e=>{if(!g.value.organizationFeatures.weeklyReportAdvice)return void r("この機能はプロプラン以上でご利用いただけます。");const t=H.value.indexOf(e);-1===t?H.value.push(e):H.value.splice(t,1)},ae=async()=>{if($.value){K.value=!0;try{const e=a.getters["auth/organizationId"];await(0,te.ao)(e,{advisors:H.value}),J.value=[...H.value],l("アドバイザー設定を保存しました")}catch(e){r("アドバイザー設定の保存に失敗しました",e)}finally{K.value=!1}}else r("少なくとも1つのアドバイザーを選択してください")};return(0,o.onMounted)((async()=>{m.value=!0;try{const e=await(0,te.SA)(w);h.value=e,e&&Object.keys(e).length>0&&(Object.assign(S,{sender:e.sender||"",senderName:e.senderName||"",requestEnabled:e.requestEnabled??!1,requestTime:e.requestTime||"06:00",requestDayOfWeek:e.requestDayOfWeek||"monday",reportWeek:e.reportWeek||-1}),I.value=JSON.parse(JSON.stringify(S)),await _(S.sender),H.value=e.features?.advisors||tt.XG,J.value=[...H.value],W.value=e.features?.notifyByEmail??!1)}catch(e){r("報告依頼設定の取得に失敗しました",e)}finally{m.value=!1}})),(e,a)=>((0,o.openBlock)(),(0,o.createBlock)(Z.IZ,{class:"report-settings-container"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.Li,{dense:"",class:"pb-4"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,null,{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("h3",null,[(0,o.createVNode)(p.wP,{size:"large",class:"mr-1"},{default:(0,o.withCtx)((()=>a[14]||(a[14]=[(0,o.createTextVNode)("mdi-calendar-clock")]))),_:1}),a[15]||(a[15]=(0,o.createTextVNode)(" 週次報告設定 "))])])),_:1})])),_:1}),m.value?((0,o.openBlock)(),(0,o.createBlock)(F.Jn,{key:0,class:"pa-6 rounded-lg",outlined:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Nt.V,{type:"text, chip@2, ossein, text, paragraph, button"})])),_:1})):(0,o.createCommentVNode)("",!0),m.value?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(Ka.hM,{key:1,modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=e=>v.value=e),class:"mb-4"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Ka.U7,{value:"request",class:"text-body-1"},{default:(0,o.withCtx)((()=>a[16]||(a[16]=[(0,o.createTextVNode)("報告依頼設定")]))),_:1}),(0,o.createVNode)(Ka.U7,{value:"notification",class:"text-body-1"},{default:(0,o.withCtx)((()=>a[17]||(a[17]=[(0,o.createTextVNode)("通知設定")]))),_:1}),(0,o.createVNode)(Ka.U7,{value:"advisor",class:"text-body-1"},{default:(0,o.withCtx)((()=>a[18]||(a[18]=[(0,o.createTextVNode)("アドバイザー設定")]))),_:1})])),_:1},8,["modelValue"])),m.value?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(F.OQ,{key:2,class:"pa-0"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Ka.l4,{modelValue:v.value,"onUpdate:modelValue":a[13]||(a[13]=e=>v.value=e),class:"elevation-4"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Ka.Yg,{value:"request"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(F.Jn,{class:"setting-card rounded-lg",outlined:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(F.OQ,{class:"px-6 pt-6"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(G.n,{ref_key:"form",ref:s,modelValue:f.value,"onUpdate:modelValue":a[9]||(a[9]=e=>f.value=e),onSubmit:(0,o.withModifiers)(M,["prevent"])},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.Li,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,{cols:"12",md:"6"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Q.W,{modelValue:S.sender,"onUpdate:modelValue":a[1]||(a[1]=e=>S.sender=e),label:"送信元メールアドレス",outlined:"",dense:"","hide-details":"auto",rules:T,color:"Success"===(0,o.unref)(y)?"success":"",error:"Failed"===(0,o.unref)(y)},{append:(0,o.withCtx)((()=>[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(p.wP,{color:(0,o.unref)(x)},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)((0,o.unref)(N)),1)])),_:1},8,["color"])),[[B.m_,(0,o.unref)(C),"top"]])])),_:1},8,["modelValue","color","error"])])),_:1}),(0,o.createVNode)(Z.B6,{cols:"12",md:"6"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",Ya,[(0,o.unref)(z)(S.sender)&&"Success"!==(0,o.unref)(y)&&"Checking"!==(0,o.unref)(y)?((0,o.openBlock)(),(0,o.createBlock)(u.D,{key:0,color:"secondary",small:"",class:"mr-2","prepend-icon":"mdi-card-account-mail",loading:(0,o.unref)(A),onClick:a[2]||(a[2]=e=>(0,o.unref)(E)(S.sender))},{default:(0,o.withCtx)((()=>a[19]||(a[19]=[(0,o.createTextVNode)(" メールアドレスを検証する ")]))),_:1},8,["loading"])):(0,o.createCommentVNode)("",!0),(0,o.unref)(z)(S.sender)&&"Pending"===(0,o.unref)(y)?((0,o.openBlock)(),(0,o.createBlock)(u.D,{key:1,color:"info",small:"",variant:"outlined","prepend-icon":"mdi-refresh",onClick:a[3]||(a[3]=e=>(0,o.unref)(_)(S.sender))},{default:(0,o.withCtx)((()=>a[20]||(a[20]=[(0,o.createTextVNode)(" 検証状態を確認 ")]))),_:1})):(0,o.createCommentVNode)("",!0)])])),_:1}),(0,o.createVNode)(Z.B6,{cols:"12",md:"6"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Q.W,{modelValue:S.senderName,"onUpdate:modelValue":a[4]||(a[4]=e=>S.senderName=e),label:"送信者名",outlined:"",dense:"","hide-details":"auto",rules:P},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.createVNode)(F.Jn,{outlined:"",class:"mt-8"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(F.ri,null,{default:(0,o.withCtx)((()=>a[21]||(a[21]=[(0,o.createTextVNode)("自動送信設定")]))),_:1}),(0,o.createVNode)(F.OQ,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.Li,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,{cols:"12",md:"2",class:"pl-5 d-flex align-center"},{default:(0,o.withCtx)((()=>a[22]||(a[22]=[(0,o.createElementVNode)("span",{class:"text-body-1"},"報告対象週",-1)]))),_:1}),(0,o.createVNode)(Z.B6,{cols:"12",md:"10",class:"d-flex justify-start align-center"},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(R,(e=>(0,o.createElementVNode)("span",{key:e.value,class:"mr-4"},[(0,o.createVNode)(Ja.$,{modelValue:S.reportWeek,"onUpdate:modelValue":a[5]||(a[5]=e=>S.reportWeek=e),row:"",dense:"","hide-details":""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Qa.i,{label:e.text,value:e.value,color:S.reportWeek===e.value?"primary":"grey"},null,8,["label","value","color"])])),_:2},1032,["modelValue"])]))),64))])),_:1})])),_:1}),(0,o.createVNode)(Z.Li,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,{cols:"12",class:"py-1"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",Xa,[(0,o.createElementVNode)("div",$a,[(0,o.createVNode)(p.wP,{color:S.requestEnabled?"success":"grey",class:"mr-2",size:"large"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(S.requestEnabled?"mdi-timer-outline":"mdi-timer-off-outline"),1)])),_:1},8,["color"]),(0,o.createElementVNode)("span",eo,[a[23]||(a[23]=(0,o.createElementVNode)("span",{class:"d-none d-sm-inline"},"報告依頼の自動送信は",-1)),a[24]||(a[24]=(0,o.createTextVNode)("現在 ")),(0,o.createElementVNode)("strong",null,(0,o.toDisplayString)(S.requestEnabled?"有効":"無効"),1),a[25]||(a[25]=(0,o.createTextVNode)(" です "))])]),a[26]||(a[26]=(0,o.createElementVNode)("span",{class:"mx-3"},null,-1)),(0,o.createVNode)(Ye.N,{modelValue:S.requestEnabled,"onUpdate:modelValue":a[6]||(a[6]=e=>S.requestEnabled=e),color:"primary",class:"mr-3",density:"compact",inset:"","hide-details":""},null,8,["modelValue"])])])),_:1})])),_:1}),(0,o.createVNode)(Z.Li,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,{cols:"12",sm:"4"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Ge.d,{modelValue:S.requestDayOfWeek,"onUpdate:modelValue":a[7]||(a[7]=e=>S.requestDayOfWeek=e),items:O,label:"送信曜日","item-title":"text","item-value":"value",outlined:"",dense:"","hide-details":"auto",disabled:!S.requestEnabled},null,8,["modelValue","disabled"])])),_:1}),(0,o.createVNode)(Z.B6,{cols:"12",sm:"4"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Ge.d,{modelValue:S.requestTime,"onUpdate:modelValue":a[8]||(a[8]=e=>S.requestTime=e),items:U.value,label:"送信時間","item-title":"text","item-value":"value",outlined:"",dense:"","hide-details":"auto",disabled:!S.requestEnabled,rules:[e=>null!==e||"時間を選択してください"]},{"prepend-inner":(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,null,{default:(0,o.withCtx)((()=>a[27]||(a[27]=[(0,o.createTextVNode)("mdi-clock-outline")]))),_:1})])),_:1},8,["modelValue","items","disabled","rules"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.createVNode)(Z.Li,{class:"mt-2"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(Z.B6,{cols:"12",class:"d-flex justify-end"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(u.D,{color:"primary",type:"submit",loading:m.value,disabled:!f.value||!D.value},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{class:"mr-1"},{default:(0,o.withCtx)((()=>a[28]||(a[28]=[(0,o.createTextVNode)("mdi-check")]))),_:1}),a[29]||(a[29]=(0,o.createTextVNode)(" 更新する "))])),_:1},8,["loading","disabled"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,o.createVNode)(Ka.Yg,{value:"notification",eager:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(F.Jn,{class:"setting-card rounded-lg"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(F.OQ,{class:"px-6"},{default:(0,o.withCtx)((()=>[g.value.adminFeatures.notifications?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[a[30]||(a[30]=(0,o.createElementVNode)("p",{class:"text-body-1 my-2"}," 通知を有効にすると週次報告が送信されたときに通知を受け取ることができます。 ",-1)),(0,o.createElementVNode)("div",null,[(0,o.createVNode)(Ye.N,{modelValue:W.value,"onUpdate:modelValue":a[10]||(a[10]=e=>W.value=e),color:"primary","hide-details":"",inset:"",onClick:j},{prepend:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{color:W.value?"success":"grey",class:"mr-1",size:"large"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(W.value?"mdi-email-outline":"mdi-email-off-outline"),1)])),_:1},8,["color"]),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(W.value?"メール通知: 有効":"メール通知: 無効"),1)])),_:1},8,["modelValue"])]),(0,o.createVNode)(Za)],64)):((0,o.openBlock)(),(0,o.createBlock)(q.l,{key:1,type:"info",variant:"tonal",class:"mt-4 rounded-lg"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",to,[a[32]||(a[32]=(0,o.createElementVNode)("span",null,"通知機能はプロプラン以上でご利用いただけます。",-1)),(0,o.createVNode)(Z.hc),(0,o.unref)(k)?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(u.D,{key:0,color:"primary",onClick:a[11]||(a[11]=e=>(0,o.unref)(t).push({name:"Billing"}))},{default:(0,o.withCtx)((()=>a[31]||(a[31]=[(0,o.createTextVNode)(" プランをアップグレード ")]))),_:1}))])])),_:1}))])),_:1})])),_:1})])),_:1}),(0,o.createVNode)(Ka.Yg,{value:"advisor"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(F.Jn,{class:"setting-card rounded-lg"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(F.OQ,{class:"px-6"},{default:(0,o.withCtx)((()=>[g.value.adminFeatures.advisorSettings?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[a[37]||(a[37]=(0,o.createElementVNode)("p",{class:"mt-2 mb-4"}," メンバーは選択したアドバイザーから週次報告に対するアドバイスを受け取ることができます。 ",-1)),$.value?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("p",ao,[(0,o.createVNode)(p.wP,{color:"warning",size:"small",class:"mr-1"},{default:(0,o.withCtx)((()=>a[33]||(a[33]=[(0,o.createTextVNode)("mdi-alert-circle")]))),_:1}),a[34]||(a[34]=(0,o.createTextVNode)(" 少なくとも1つのアドバイザーを選択してください "))])),(0,o.createVNode)(Z.Li,null,{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(X.value,((e,t)=>((0,o.openBlock)(),(0,o.createBlock)(Z.B6,{key:t,cols:"12",sm:"6",md:"3"},{default:(0,o.withCtx)((()=>[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(F.Jn,{variant:"outlined",class:(0,o.normalizeClass)(["advisor-card",{"advisor-selected":H.value.includes(t)}]),elevation:H.value.includes(t)?4:0,onClick:e=>ee(t)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(b.y,{src:e.image,height:"120",fill:"",class:"advisor-image mx-6 mt-4"},null,8,["src"]),(0,o.createVNode)(F.mm,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(F.ri,{class:"text-subtitle-2 text-center"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.title),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","elevation","onClick"])),[[B.m_,e.description,"bottom"]])])),_:2},1024)))),128))])),_:1}),(0,o.createElementVNode)("div",oo,[(0,o.createVNode)(u.D,{color:"primary",loading:K.value,disabled:!$.value||!Y.value,onClick:ae},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p.wP,{class:"mr-1"},{default:(0,o.withCtx)((()=>a[35]||(a[35]=[(0,o.createTextVNode)("mdi-check")]))),_:1}),a[36]||(a[36]=(0,o.createTextVNode)(" 更新する "))])),_:1},8,["loading","disabled"])])],64)):((0,o.openBlock)(),(0,o.createBlock)(q.l,{key:1,type:"info",variant:"tonal",class:"mt-4 rounded-lg"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",lo,[a[39]||(a[39]=(0,o.createElementVNode)("span",null,"アドバイザー設定はプロプラン以上でご利用いただけます。",-1)),(0,o.createVNode)(Z.hc),(0,o.unref)(k)?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(u.D,{key:0,color:"primary",onClick:a[12]||(a[12]=e=>(0,o.unref)(t).push({name:"Billing"}))},{default:(0,o.withCtx)((()=>a[38]||(a[38]=[(0,o.createTextVNode)(" プランをアップグレード ")]))),_:1}))])])),_:1}))])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}))])),_:1}))}};const no=(0,k.A)(ro,[["__scopeId","data-v-25333588"]]);var io=no;const co=[{path:"/",name:"Root",component:()=>a.e(200).then(a.bind(a,200)),meta:{hideNavigation:!0,hideMascot:!0,fullWidth:!0},beforeEnter:async(e,t,a)=>{try{const e=await O.A.dispatch("auth/fetchAuthToken");e?a("/admin"):a()}catch(o){a()}}},{path:"/signin",name:"SignIn",component:$,meta:{hideNavigation:!0,hideMascot:!0}},{path:"/signup",name:"SignUp",component:$,meta:{hideNavigation:!0,hideMascot:!0}},{path:"/admin",name:"Overview",component:he,meta:{requiresAuth:!0}},{path:"/admin/dashboard",name:"Dashboard",component:et,meta:{requiresAuth:!0}},{path:"/admin/organization",name:"OrganizationManagement",component:ya,meta:{requiresAuth:!0}},{path:"/admin/accounts",name:"OrganizationAccount",component:Sa,meta:{requiresAuth:!0}},{path:"/admin/reports",name:"WeeklyReviewSelector",component:sa,meta:{requiresAuth:!0}},{path:"/admin/reports/:weekString",name:"WeeklyReview",component:sa,props:!0,meta:{requiresAuth:!0}},{path:"/admin/report-setting",name:"ReportSetting",component:io,props:!0,meta:{requiresAuth:!0}},{path:"/reports/:organizationId/:memberUuid",name:"WeeklyReportSelector",component:zt,props:!0,meta:{hideNavigation:!0}},{path:"/reports/:organizationId/:memberUuid/:weekString",name:"WeeklyReport",component:zt,props:!0,meta:{hideNavigation:!0}},{path:"/view/:token",name:"WeeklyReportSummary",component:fa,props:!0,meta:{hideNavigation:!0,hideAnimation:!0}},{path:"/admin/member-reports/:memberUuid",name:"MemberReports",component:()=>Promise.all([a.e(350),a.e(103)]).then(a.bind(a,6103)),props:!0,meta:{requiresAuth:!0}},{path:"/account-setting",name:"AccountSetting",component:()=>a.e(434).then(a.bind(a,53))},{path:"/billing",name:"Billing",component:()=>a.e(73).then(a.bind(a,7073)),meta:{requiresAuth:!0}},{path:"/member/mail/:memberUuid",name:"MailConfirmed",component:()=>a.e(921).then(a.bind(a,9921)),props:!0,meta:{hideNavigation:!0,hideAnimation:!0}},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>a.e(260).then(a.bind(a,2260)),meta:{hideNavigation:!0,hideAnimation:!0}}],so=(0,n.aE)({history:(0,n.LA)(s.VJ),routes:co});so.beforeEach((async(e,t,a)=>{if(e.matched.some((e=>e.meta.requiresAuth)))try{const t=await O.A.dispatch("auth/fetchAuthToken");t?(await O.A.dispatch("auth/fetchUser"),a()):a({name:"SignIn",query:{redirect:e.fullPath}})}catch(o){a({name:"SignIn",query:{redirect:e.fullPath}})}else a()})),so.afterEach((()=>{}));var uo=so,mo=(a(6153),a(5524),a(7768)),po=(0,mo.$N)({theme:{themes:{light:{colors:{primary:"#039BE5",secondary:"#00ACC1",error:"#D32F2F",menu:"#6980B5"}}}},defaults:{VCard:{elevation:4},VRating:{hover:!0}}});async function fo(){const e=await a.e(53).then(a.t.bind(a,5371,23));e.load({google:{families:["Agbalumo"]}})}var vo=a(1051),go={Auth:{Cognito:{region:"ap-northeast-1",userPoolId:"ap-northeast-1_bBaqROOm5",userPoolClientId:"bj5b62c44ur0drn8jc7isk0sm",signUpVerificationMethod:"code",loginWith:{oauth:{domain:"https://fluxweek.auth.ap-northeast-1.amazoncognito.com",scopes:["email","openid","aws.cognito.signin.user.admin"],redirectSignIn:"https://plasticgrammer.github.io/quantumbird/",redirectSignOut:"https://plasticgrammer.github.io/quantumbird/",responseType:"code"}}}}};try{vo.H.configure(go,{ssr:!0})}catch(wo){}fo();const ho=(0,o.createApp)(P);ho.use(uo),ho.use(O.A),ho.use(po),ho.config.errorHandler=(e,t,a)=>{},ho.mount("#app")},6756:function(e,t,a){a.d(t,{P4:function(){return c},_m:function(){return r},lk:function(){return s},lw:function(){return i},z0:function(){return n}});var o=a(9423);const l="/account",r=async e=>o.uE.post(l,e),n=async e=>o.uE.put(l,e),i=async(e,t)=>o.uE.delete(l,{organizationId:e,email:t}),c=async e=>o.uE.get(l,e),s=async e=>{const t=await o.uE.post(`${l}/resend-invitation`,{email:e});return t.data}},9423:function(e,t,a){a.d(t,{uE:function(){return y}});a(4114);var o=a(6299),l=a(3652);const r="prod",n=`https://cuk7ajid2e.execute-api.ap-northeast-1.amazonaws.com/${r}`,i=600,c=o.Ay.create({baseURL:n,headers:{"Content-Type":"application/json"},timeout:3e4,withCredentials:!1});let s=0,d=null,u=!1,m=[];const p=()=>{s++,null===d&&(d=setTimeout((()=>{l.A.dispatch("setLoading",!0)}),i))},f=()=>{s--,0===s&&(clearTimeout(d),d=null,l.A.dispatch("setLoading",!1))},v={CORS:"CORS_ERROR",NETWORK:"NETWORK_ERROR",AUTH:"AUTH_ERROR",UNKNOWN:"UNKNOWN_ERROR"},g=e=>{if("ERR_NETWORK"===e.code&&!e.response){const t=e.message.includes("CORS")||e.message.includes("Network Error")||e.message.includes("cross-origin");return t?v.CORS:v.NETWORK}return 401===e.response?.status?v.AUTH:v.UNKNOWN},h=e=>{const t=g(e);return t===v.AUTH};c.interceptors.request.use((e=>{p();const t=l.A.getters["auth/token"];return t&&(e.headers["Authorization"]=`Bearer ${t}`),e}),(e=>(f(),Promise.reject(e))));const w=(e,t=null)=>{m.forEach((a=>{e?a.reject(e):a.resolve(t)})),m=[]};c.interceptors.response.use((e=>(f(),e)),(async e=>{f();const t=e.config,a=g(e);if(a===v.CORS&&!t._corsRetry){t._corsRetry=!0;try{const e=await l.A.dispatch("auth/fetchAuthToken");return t.headers["Authorization"]=`Bearer ${e}`,c(t)}catch(o){return await l.A.dispatch("auth/signOut"),Promise.reject(o)}}if(h(e)&&!t._retry){if(u)return new Promise(((e,t)=>{m.push({resolve:e,reject:t})})).then((e=>(t.headers["Authorization"]=`Bearer ${e}`,c(t)))).catch((e=>Promise.reject(e)));t._retry=!0,u=!0;try{const e=await l.A.dispatch("auth/fetchAuthToken");return w(null,e),t.headers["Authorization"]=`Bearer ${e}`,c(t)}catch(o){return w(o,null),await l.A.dispatch("auth/signOut"),Promise.reject(o)}finally{u=!1}}if(a===v.NETWORK&&!t._networkRetry){t._networkRetry=!0;const e=l.A.getters["auth/token"];return e&&(t.headers["Authorization"]=`Bearer ${e}`),new Promise((e=>setTimeout(e,1e3))).then((()=>c(t)))}return Promise.reject(e)}));const k=e=>{if(e.response){const t=e.response.data.error||e.response.data.message||"エラーが発生しました";throw new Error(t)}throw e},V=async(e,t,a=null,l=null,r={})=>{try{const o={method:e,url:t,...r};a&&(o.data=a),l&&(o.params=l);const n=await c(o);return n.data}catch(n){throw o.Ay.isCancel(n),k(n)}},y={get:(e,t,a)=>V("GET",e,null,t,a),post:(e,t,a)=>V("POST",e,t,null,a),put:(e,t,a)=>V("PUT",e,t,null,a),delete:(e,t,a)=>V("DELETE",e,null,t,a)}},1059:function(e,t,a){a.d(t,{Sj:function(){return c},Wx:function(){return i},XG:function(){return r},_4:function(){return n}});var o=a(9423);const l="/bedrock",r=["manager","career","mental"],n={manager:{title:"マネジメントアドバイザー",description:"課題解決の視点から業務改善のアドバイスを提供します",icon:"mdi-account-supervisor",color:"pink",image:a(1924)},career:{title:"キャリアアドバイザー",description:"スキル開発とキャリア形成のアドバイスを提供します",icon:"mdi-school",color:"deep-purple",image:a(6450)},mental:{title:"メンタルサポーター",description:"ストレス管理とセルフケアのアドバイスを提供します",icon:"mdi-heart",color:"red",image:a(2291)},reframe:{title:"リフレーミングマスター",description:"課題をポジティブ視点で捉え直すアドバイスを提供します",icon:"mdi-border-outside",color:"cyan",image:a(3063)},scenario:{title:"ストーリーアーキテクト",description:"成長のストーリーとして状況を再構築します",icon:"mdi-script-text",color:"orange-darken-2",image:a(5230)},detective:{title:"ミステリーディテクティブ",description:"状況の背後にある真相を探り出します",icon:"mdi-magnify",color:"brown",image:a(1920)},timeNavi:{title:"クロノスナビゲーター",description:"時間軸を超えた視点でアドバイスを提供します",icon:"mdi-clock-time-eight",color:"indigo",image:a(1151)}},i=async(e,t,a)=>{try{const r=await o.uE.post(`${l}/advice`,{memberUuid:e,weekString:t,advisorRole:a});return{advice:r.advice||"",weekString:r.weekString,memberUuid:r.memberUuid,remainingTickets:r.remainingTickets||0}}catch(r){throw new Error("週次報告のアドバイス取得に失敗しました。")}},c=async e=>{try{const t=await o.uE.post(`${l}/summary`,{memberUuid:e});return{summary:t.data.summary||"",insights:{positive:t.data.insights?.positive||[],negative:t.data.insights?.negative||[]}}}catch(t){throw t instanceof Error?t:new Error("週次報告のサマリー生成に失敗しました。")}}},4577:function(e,t,a){a.d(t,{A$:function(){return i},ON:function(){return n},Xf:function(){return r},bi:function(){return c},cx:function(){return s},rF:function(){return d}});var o=a(9423);const l="/member",r=async e=>o.uE.get(l,{memberUuid:e}),n=async e=>o.uE.put(l,e),i=async e=>o.uE.put(`${l}/mail`,{verifyEmail:!0,memberUuid:e}),c=async e=>o.uE.post(l,e),s=async e=>o.uE.delete(l,{memberUuid:e}),d=async e=>o.uE.get(l,{organizationId:e})},1114:function(e,t,a){a.d(t,{Dp:function(){return i},GZ:function(){return m},L_:function(){return r},SA:function(){return s},ao:function(){return n},dM:function(){return d},fT:function(){return c},ig:function(){return u}});var o=a(9423);const l="/organization",r=async e=>{const t={...e};return delete t.members,o.uE.put(l,t)},n=async(e,t)=>o.uE.put(l,{organizationId:e,features:t}),i=async e=>o.uE.delete(l,{organizationId:e}),c=async e=>o.uE.delete(l,{organizationId:e,mode:"complete"}),s=async e=>{try{return await o.uE.get(l,{organizationId:e})}catch(t){if(t.message.includes("not found"))return null;throw t}},d=async(e,t,a)=>o.uE.post(`${l}/push-subscription`,{fcmToken:e,organizationId:t,adminId:a}),u=async(e,t)=>o.uE.delete(`${l}/push-subscription`,{organizationId:e,adminId:t}),m=async(e,t)=>{const a=await o.uE.get(`${l}/push-subscription`,{organizationId:e,adminId:t});return a.endpointArn}},2599:function(e,t,a){a.d(t,{GH:function(){return d},J5:function(){return i},Ky:function(){return r},M2:function(){return u},NP:function(){return s},cI:function(){return n},zA:function(){return c}});var o=a(9423);const l="/payment",r=async e=>o.uE.post(`${l}/create-subscription`,e),n=async e=>{const t=await o.uE.post(`${l}/change-plan`,e);return"canceled"===t.subscription?.status&&t.subscription?.currentPeriodEnd&&(t.message=`次回支払い日（${new Date(1e3*t.subscription.currentPeriodEnd).toLocaleDateString()}）でフリープランに変更されます`),t},i=async e=>{const t=await o.uE.post(`${l}/payment-methods`,{email:e});return t},c=async({token:e,customerId:t})=>{const a=await o.uE.post(`${l}/update-payment-method`,{token:e,customerId:t});return a},s=async e=>{const t=await o.uE.post(`${l}/invoices`,{customerId:e});return t},d=async e=>{const t=await o.uE.post(`${l}/subscription-info`,{customerId:e});return t},u=async e=>n({subscriptionId:e,priceId:"price_free",accountCount:0})},3704:function(e,t,a){a.d(t,{A0:function(){return s},Cl:function(){return n},Om:function(){return f},SA:function(){return r},Xf:function(){return m},YV:function(){return u},bU:function(){return p},ly:function(){return i},oj:function(){return v},y_:function(){return d},zC:function(){return c}});var o=a(9423);const l="/public",r=async e=>{try{return await o.uE.get(`${l}/organization`,{organizationId:e})}catch(t){if(t.message.includes("not found"))return null;throw t}},n=async e=>o.uE.post(`${l}/organization`,e),i=async(e,t)=>o.uE.get(`${l}/weekly-report`,{memberUuid:e,weekString:t}),c=async e=>o.uE.post(`${l}/weekly-report`,e),s=async e=>o.uE.put(`${l}/weekly-report`,e),d=async(e,t)=>o.uE.get(`${l}/weekly-report`,{organizationId:e,weekString:t}),u=async e=>o.uE.get(`${l}/member`,{organizationId:e}),m=async e=>o.uE.get(`${l}/member`,{memberUuid:e}),p=async e=>{const t=await o.uE.get(`${l}/project`,{memberUuid:e});return t||[]},f=async(e,t)=>(await o.uE.put(`${l}/member`,{memberUuid:e,extraInfo:t}),!0),v=async(e,t)=>(await o.uE.put(`${l}/member`,{memberUuid:e,projects:t}),!0)},6945:function(e,t,a){a.d(t,{A0:function(){return r},Wz:function(){return u},eF:function(){return d},gc:function(){return i},ly:function(){return n},vc:function(){return s},wm:function(){return c}});var o=a(9423);const l="/weekly-report",r=async e=>o.uE.put(l,e),n=async(e,t)=>o.uE.get(l,{memberUuid:e,weekString:t}),i=async e=>o.uE.get(`${l}/member/${e}`),c=async e=>o.uE.get(`${l}/export`,{organizationId:e}),s=async(e,t)=>o.uE.get(`${l}/status`,{organizationId:e,weekString:t}),d=async e=>o.uE.get(`${l}/stats`,{organizationId:e}),u=async(e,t,a)=>o.uE.post(`${l}/feedback`,{memberUuid:e,weekString:t,feedback:a})},3652:function(e,t,a){a.d(t,{A:function(){return p}});var o=a(834),l=a(406),r=a(6047),n=a(6211),i=a(2599);const c={CACHE_DURATION:3e5,ERROR_MESSAGES:{AUTH:"認証エラー：再度ログインしてから試してください",RATE_LIMIT:"しばらく時間をおいてから再度お試しください",GENERIC:"エラーが発生しました",DELETE_ACCOUNT:"アカウントの削除中にエラーが発生しました",NO_TOKEN:"認証情報が見つかりません。再度ログインしてください",SUBSCRIPTION_UPDATE:"サブスクリプション情報の更新権限がありません。管理者に連絡してください",TEMP_PASSWORD:"初回ログインのため、パスワードの変更が必要です",PASSWORD_RESET:"パスワードのリセットが必要です",PASSWORD_CHANGE_REQUIRED:"仮パスワードでのログインのため、パスワードの変更が必要です"}},s=e=>e=>{throw e},d=e=>{const t={NotAuthorizedException:e=>e.includes("unauthorized attribute")?c.ERROR_MESSAGES.SUBSCRIPTION_UPDATE:c.ERROR_MESSAGES.AUTH,LimitExceededException:()=>c.ERROR_MESSAGES.RATE_LIMIT,UserNotConfirmedException:()=>"メールアドレスの確認が完了していません。",UserNotFoundException:()=>"このメールアドレスに対応するアカウントが見つかりません。",InvalidParameterException:()=>"入力内容が正しくありません。",default:e=>e||c.ERROR_MESSAGES.GENERIC};return(t[e.name]||t.default)(e.message)};var u={namespaced:!0,state:()=>({user:null,token:null,lastTokenFetch:null,lastUserFetch:null,cognitoUserSub:null,subscription:{planId:null,accountCount:0,subscriptionId:null,stripeCustomerId:null}}),mutations:{setUser(e,t){e.user=t,e.lastUserFetch=Date.now()},setToken(e,t){e.token=t,e.lastTokenFetch=Date.now()},setCognitoUserSub(e,t){e.cognitoUserSub=t},clearAuthState(e){Object.assign(e,{user:null,token:null,lastTokenFetch:null,lastUserFetch:null,cognitoUserSub:null,subscription:{planId:null,accountCount:0,subscriptionId:null,stripeCustomerId:null}})},updateUserPolicyVersions(e,{tosVersion:t,privacyPolicyVersion:a}){e.user&&Object.assign(e.user,{tosVersion:t||e.user.tosVersion,privacyPolicyVersion:a||e.user.privacyPolicyVersion})},setSubscription(e,{planId:t,priceId:a,accountCount:o,subscriptionId:l,stripeCustomerId:r}){const n={planId:t,priceId:a,accountCount:parseInt(o||"0",10),subscriptionId:l||null,stripeCustomerId:r||null};e.subscription=n}},actions:{async fetchUser({commit:e,state:t,dispatch:a}){try{if(t.user&&Date.now()-t.lastUserFetch<c.CACHE_DURATION){const e=await a("validateToken").catch((()=>!1));if(e)return t.user}const l=await(0,r.Tv)(),n=await(0,r.$e)();if("NEW_PASSWORD_REQUIRED"===n.challengeName)throw new Error(c.ERROR_MESSAGES.PASSWORD_CHANGE_REQUIRED);const i={organizationId:l["custom:organizationId"],parentOrganizationId:l["custom:parentOrganizationId"],username:l.name,email:l.email,tosVersion:l["custom:tos_version"],privacyPolicyVersion:l["custom:pp_version"],stripeCustomerId:l["custom:stripeCustomerId"]};if(e("setUser",i),e("setCognitoUserSub",l.sub),l["custom:stripeCustomerId"])try{const{data:t}=await a("fetchSubscriptionInfo",l["custom:stripeCustomerId"]);e("setSubscription",{...t,stripeCustomerId:l["custom:stripeCustomerId"]})}catch(o){}return i}catch(o){throw e("clearAuthState"),o}},async fetchSubscriptionInfo({commit:e},t){try{const a=await(0,i.GH)(t);return e("setSubscription",a.data),a}catch(a){throw a}},async fetchAuthToken({commit:e,dispatch:t},{forceRefresh:a=!1}={}){try{const{tokens:t}=await(0,r.$e)({forceRefresh:a});if(!t?.idToken)throw e("clearAuthState"),new Error(c.ERROR_MESSAGES.NO_TOKEN);const o=t.idToken.toString();return e("setToken",o),o}catch(o){if("NewPasswordRequiredException"===o.name||"PasswordResetRequiredException"===o.name)throw o;if(e("clearAuthState"),!o.message?.includes("needs to be authenticated"))try{const{tokens:t}=await(0,r.$e)({forceRefresh:!0});if(t?.idToken){const a=t.idToken.toString();return e("setToken",a),a}}catch(l){}throw await t("handleAuthFailure",{error:o}),o}},async validateToken({dispatch:e,state:t}){try{return t.token?(await(0,r.$e)(),t.token):await e("fetchAuthToken",{forceRefresh:!0})}catch(a){return await e("fetchAuthToken",{forceRefresh:!0})}},async handleAuthFailure({dispatch:e},{error:t}={}){if("NewPasswordRequiredException"===t?.name)return Promise.reject(t);if("PasswordResetRequiredException"===t?.name)return Promise.reject(t);throw await e("signOut"),new Error(c.ERROR_MESSAGES.AUTH)},async signOut({commit:e}){try{await(0,r.CI)(),e("clearAuthState")}catch(t){throw s("signing out")(t),e("clearAuthState"),t}},async updatePassword(e,{oldPassword:t,newPassword:a}){try{return await(0,r.f3)({oldPassword:t,newPassword:a}),{success:!0}}catch(o){throw s("updating password")(o),new Error(d(o))}},async deleteUserAccount({commit:e}){try{return await(0,r.hG)(),e("clearAuthState"),{success:!0,message:"アカウントが正常に削除されました"}}catch(t){throw s("deleting user account")(t),new Error(d(t))}},async checkPolicyAcceptance({dispatch:e}){const t=await e("fetchUser");return{needsTosAcceptance:t.tosVersion!==n.If,needsPrivacyPolicyAcceptance:t.privacyPolicyVersion!==n.x7}},async updatePolicyAcceptance({commit:e},{tosAccepted:t,privacyPolicyAccepted:a}){try{const o={};return t&&n.If&&(o["custom:tos_version"]=n.If),a&&n.x7&&(o["custom:pp_version"]=n.x7),Object.keys(o).length>0&&(await(0,r.uF)({userAttributes:o}),e("updateUserPolicyVersions",{tosVersion:t?n.If:void 0,privacyPolicyVersion:a?n.x7:void 0})),{success:!0}}catch(o){throw s("updating policy acceptance")(o),o}},async updateSubscriptionAttributes({commit:e,dispatch:t},{stripeCustomerId:a}){try{if(await(0,r.uF)({userAttributes:{"custom:stripeCustomerId":a||""}}),a){const{data:o}=await t("fetchSubscriptionInfo",a);e("setSubscription",{...o,stripeCustomerId:a})}else e("setSubscription",{planId:"free",accountCount:0,subscriptionId:null,stripeCustomerId:null});return{success:!0}}catch(o){throw s("updating subscription info")(o),new Error(d(o))}},async completeNewPassword({dispatch:e,state:t},{newPassword:o}){try{const{confirmSignIn:l}=await Promise.resolve().then(a.bind(a,4559));return await l({challengeResponse:o,options:{userAttributes:{name:t.user?.email||""}}}),await e("fetchUser"),{success:!0}}catch(l){throw s("completing new password")(l),new Error(d(l))}}},getters:{organizationId:e=>e.user?.organizationId,parentOrganizationId:e=>e.user?.parentOrganizationId,name:e=>e.user?.username,email:e=>e.user?.email,isAuthenticated:e=>!!e.user,token:e=>e.token,cognitoUserSub:e=>e.cognitoUserSub,tosVersion:e=>e.user?.tosVersion,privacyPolicyVersion:e=>e.user?.privacyPolicyVersion,currentSubscription:e=>e.subscription||{planId:"free",accountCount:0},isParentAccount:e=>!e.user?.parentOrganizationId}},m=a(7315),p=(0,o.y$)({state:{loading:!1},mutations:{SET_LOADING(e,t){e.loading=t}},actions:{setLoading({commit:e},t){e("SET_LOADING",t)}},getters:{isLoading:e=>e.loading},modules:{auth:u,widget:m.A},plugins:[(0,l.A)({key:"weekly-report",paths:["auth","widget"],storage:window.localStorage})]})},7315:function(e,t,a){a.d(t,{e:function(){return o}});a(4114);const o={calendar:{component:"CalendarWidget",title:"報告状況",defaultExpanded:!0,defaultVisible:!0},overtime:{component:"OvertimeChart",title:"残業時間の遷移",defaultExpanded:!1,defaultVisible:!0},stress:{component:"StressChart",title:"ストレス評価の遷移",defaultExpanded:!1,defaultVisible:!0},disability:{component:"DisabilityChart",title:"タスク難易度の遷移",defaultExpanded:!1,defaultVisible:!1},achievement:{component:"AchievementChart",title:"タスク達成度の遷移",defaultExpanded:!1,defaultVisible:!1},organization:{component:"OrganizationWidget",title:"組織情報",defaultExpanded:!1,defaultVisible:!0},reportRequest:{component:"ReportRequestWidget",title:"報告依頼",defaultExpanded:!1,defaultVisible:!0},todo:{component:"TodoListWidget",title:"やることリスト",defaultExpanded:!1,defaultVisible:!0},weeklyReport:{component:"WeeklyReportWidget",title:"メンバーの週次報告",defaultExpanded:!1,defaultVisible:!0}},l=()=>({expandStates:Object.fromEntries(Object.entries(o).map((([e,t])=>[e,t.defaultExpanded??!1]))),widgetOrder:Object.keys(o),widgetVisibility:Object.fromEntries(Object.entries(o).map((([e,t])=>[e,t.defaultVisible??!1])))});t.A={namespaced:!0,state:l,mutations:{SET_WIDGET_STATE(e,{widgetId:t,isExpanded:a}){e.expandStates[t]=a},SET_WIDGET_ORDER(e,t){const a=e.widgetOrder.filter((t=>e.widgetVisibility[t])),o=e.widgetOrder.filter((t=>!e.widgetVisibility[t]));t.length===a.length&&t.every((t=>e.widgetVisibility[t]))&&(e.widgetOrder=[...t,...o])},SET_WIDGET_VISIBILITY(e,{widgetId:t,isVisible:a}){e.widgetVisibility={...e.widgetVisibility,[t]:a},a&&!e.widgetOrder.includes(t)&&e.widgetOrder.push(t)}},actions:{toggleWidget({commit:e,state:t},a){e("SET_WIDGET_STATE",{widgetId:a,isExpanded:!t.expandStates[a]})},updateWidgetOrder({commit:e,state:t},a){Array.isArray(a)&&a.length>0&&a.every((e=>t.widgetOrder.includes(e)))&&e("SET_WIDGET_ORDER",a)},async toggleWidgetVisibility({commit:e,state:t},a){const o=!t.widgetVisibility[a],l=Object.values(t.widgetVisibility).filter(Boolean).length;return!(!o&&l<=1)&&(e("SET_WIDGET_VISIBILITY",{widgetId:a,isVisible:o}),!0)}}}},6863:function(e,t,a){a.d(t,{A:function(){return f}});var o=a(689),l=a(3725),r=a(8703),n=a(6547);const i={class:"overtime-info flex-grow-1"},c={class:"d-flex align-center"},s={key:0,class:"text-body-1 font-weight-bold"},d=15;var u={__name:"OvertimeDisplay",props:{overtimeHours:{type:Number,required:!0}},setup(e){const t=e,a=(0,o.computed)((()=>0===t.overtimeHours?"blue":t.overtimeHours<=d/2?"blue-accent-1":t.overtimeHours<=d?"warning":"error")),u=(0,o.computed)((()=>Math.min(t.overtimeHours/d*100,100)));return(t,d)=>((0,o.openBlock)(),(0,o.createBlock)(l.Jn,{class:"mt-2",variant:"text",elevation:"0"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(l.OQ,{class:"d-flex align-center pa-2"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(r.wP,{color:a.value,class:"mr-2",size:"24"},{default:(0,o.withCtx)((()=>d[0]||(d[0]=[(0,o.createTextVNode)("mdi-clock-outline")]))),_:1},8,["color"]),(0,o.createElementVNode)("div",i,[(0,o.createElementVNode)("div",c,[d[1]||(d[1]=(0,o.createElementVNode)("span",{class:"text-subtitle-2 mr-2 mt-1"},"残業時間:",-1)),0===e.overtimeHours?((0,o.openBlock)(),(0,o.createElementBlock)("span",s," なし ")):((0,o.openBlock)(),(0,o.createElementBlock)("span",{key:1,class:(0,o.normalizeClass)(["text-body-1 font-weight-bold",a.value])},(0,o.toDisplayString)(e.overtimeHours)+"時間 ",3))]),(0,o.createVNode)(n.Z,{"model-value":u.value,color:a.value,height:"10",rounded:"",class:"w-75 opacity-80 mt-1"},null,8,["model-value","color"])])])),_:1})])),_:1}))}},m=a(6262);const p=(0,m.A)(u,[["__scopeId","data-v-1c360e7e"]]);var f=p},3571:function(e,t,a){a.d(t,{A:function(){return p}});var o=a(689),l=a(834),r=a(3725),n=a(8703);const i={class:"widget-container"},c={class:"d-flex justify-space-between align-center w-100"},s={class:"py-1"};var d={__name:"BaseWidget",props:{widgetId:{type:String,required:!0},title:{type:String,required:!0},icon:{type:String,required:!0},contentClass:{type:String,default:"pt-1 pb-3"},defaultCols:{type:Number,default:6}},setup(e){const t=e,a=(0,l.Pj)(),d=()=>{a.dispatch("widget/toggleWidget",t.widgetId)};return(t,a)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",i,[(0,o.createVNode)(r.Jn,{class:"widget"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(r.ri,{class:"text-subtitle-1 widget-title",onDblclick:d},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",c,[(0,o.createElementVNode)("div",s,[(0,o.createVNode)(n.wP,{small:"",class:"mr-1","aria-hidden":"true"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.icon),1)])),_:1}),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(e.title),1)]),(0,o.renderSlot)(t.$slots,"header-append")])])),_:3}),(0,o.createVNode)(r.OQ,{class:(0,o.normalizeClass)(e.contentClass)},{default:(0,o.withCtx)((()=>[(0,o.renderSlot)(t.$slots,"default")])),_:3},8,["class"])])),_:3})]))}},u=a(6262);const m=(0,u.A)(d,[["__scopeId","data-v-2a7c6598"]]);var p=m},6450:function(e,t,a){e.exports=a.p+"img/advisor_career.c860f611.png"},1920:function(e,t,a){e.exports=a.p+"img/advisor_detective.b0e053f4.png"},1924:function(e,t,a){e.exports=a.p+"img/advisor_manager.38f100a5.gif"},2291:function(e,t,a){e.exports=a.p+"img/advisor_mental.4e0cae5d.png"},3063:function(e,t,a){e.exports=a.p+"img/advisor_reframe.f00a3a0a.png"},5230:function(e,t,a){e.exports=a.p+"img/advisor_scenario.ca08b49d.png"},1151:function(e,t,a){e.exports=a.p+"img/advisor_time.59d73a68.png"},4348:function(e){e.exports="data:image/webp;base64,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"}},t={};function a(o){var l=t[o];if(void 0!==l)return l.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,o,l,r){if(!o){var n=1/0;for(d=0;d<e.length;d++){o=e[d][0],l=e[d][1],r=e[d][2];for(var i=!0,c=0;c<o.length;c++)(!1&r||n>=r)&&Object.keys(a.O).every((function(e){return a.O[e](o[c])}))?o.splice(c--,1):(i=!1,r<n&&(n=r));if(i){e.splice(d--,1);var s=l();void 0!==s&&(t=s)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[o,l,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};a.t=function(o,l){if(1&l&&(o=this(o)),8&l)return o;if("object"===typeof o&&o){if(4&l&&o.__esModule)return o;if(16&l&&"function"===typeof o.then)return o}var r=Object.create(null);a.r(r);var n={};e=e||[null,t({}),t([]),t(t)];for(var i=2&l&&o;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((function(e){n[e]=function(){return o[e]}}));return n["default"]=function(){return o},a.d(r,n),r}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,o){return a.f[o](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+(53===e?"webfontloader":e)+"."+{53:"c87d3aee",56:"fdf07aaa",73:"33bb276c",92:"aacc6c4c",103:"795d88b6",110:"a0ae53d0",113:"270ae4a4",200:"ea56080b",251:"f6fb6f91",260:"2fe95658",350:"a5ea8029",387:"84e70460",397:"5404cfaa",405:"6ac576fe",417:"4894be9e",434:"1520ea1f",453:"9ae56b13",490:"66ff5332",870:"79dabc76",921:"abef07c6",992:"8ad81a32"}[e]+".js"}}(),function(){a.miniCssF=function(e){return"css/"+e+"."+{73:"d8b05ff2",92:"c2fc60b6",103:"00eb34d7",113:"a27867ac",200:"5c5cea3d",251:"c7a043fb",260:"a5e257df",387:"c7a043fb",397:"06c31fab",405:"8eae92fc",417:"6bce2ab2",453:"5ddfe07b",490:"978c9700",870:"49238bf3",992:"c7a043fb"}[e]+".css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="weekly-report:";a.l=function(o,l,r,n){if(e[o])e[o].push(l);else{var i,c;if(void 0!==r)for(var s=document.getElementsByTagName("script"),d=0;d<s.length;d++){var u=s[d];if(u.getAttribute("src")==o||u.getAttribute("data-webpack")==t+r){i=u;break}}i||(c=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",t+r),i.src=o),e[o]=[l];var m=function(t,a){i.onerror=i.onload=null,clearTimeout(p);var l=e[o];if(delete e[o],i.parentNode&&i.parentNode.removeChild(i),l&&l.forEach((function(e){return e(a)})),t)return t(a)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),c&&document.head.appendChild(i)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,o,l,r){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",a.nc&&(n.nonce=a.nc);var i=function(a){if(n.onerror=n.onload=null,"load"===a.type)l();else{var o=a&&a.type,i=a&&a.target&&a.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+o+": "+i+")");c.name="ChunkLoadError",c.code="CSS_CHUNK_LOAD_FAILED",c.type=o,c.request=i,n.parentNode&&n.parentNode.removeChild(n),r(c)}};return n.onerror=n.onload=i,n.href=t,o?o.parentNode.insertBefore(n,o.nextSibling):document.head.appendChild(n),n},t=function(e,t){for(var a=document.getElementsByTagName("link"),o=0;o<a.length;o++){var l=a[o],r=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(r===e||r===t))return l}var n=document.getElementsByTagName("style");for(o=0;o<n.length;o++){l=n[o],r=l.getAttribute("data-href");if(r===e||r===t)return l}},o=function(o){return new Promise((function(l,r){var n=a.miniCssF(o),i=a.p+n;if(t(n,i))return l();e(o,i,null,l,r)}))},l={57:0};a.f.miniCss=function(e,t){var a={73:1,92:1,103:1,113:1,200:1,251:1,260:1,387:1,397:1,405:1,417:1,453:1,490:1,870:1,992:1};l[e]?t.push(l[e]):0!==l[e]&&a[e]&&t.push(l[e]=o(e).then((function(){l[e]=0}),(function(t){throw delete l[e],t})))}}}(),function(){a.b=document.baseURI||self.location.href;var e={57:0};a.f.j=function(t,o){var l=a.o(e,t)?e[t]:void 0;if(0!==l)if(l)o.push(l[2]);else{var r=new Promise((function(a,o){l=e[t]=[a,o]}));o.push(l[2]=r);var n=a.p+a.u(t),i=new Error,c=function(o){if(a.o(e,t)&&(l=e[t],0!==l&&(e[t]=void 0),l)){var r=o&&("load"===o.type?"missing":o.type),n=o&&o.target&&o.target.src;i.message="Loading chunk "+t+" failed.\n("+r+": "+n+")",i.name="ChunkLoadError",i.type=r,i.request=n,l[1](i)}};a.l(n,c,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,o){var l,r,n=o[0],i=o[1],c=o[2],s=0;if(n.some((function(t){return 0!==e[t]}))){for(l in i)a.o(i,l)&&(a.m[l]=i[l]);if(c)var d=c(a)}for(t&&t(o);s<n.length;s++)r=n[s],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(d)},o=self["webpackChunkweekly_report"]=self["webpackChunkweekly_report"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[504],(function(){return a(8192)}));o=a.O(o)})();
//# sourceMappingURL=index.d1981fd6.js.map