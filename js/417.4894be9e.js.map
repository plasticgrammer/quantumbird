{"version":3,"file":"js/417.4894be9e.js","mappings":"8eA6EA,MAAMA,EAAQC,EAMRC,EAAOC,EAEPC,GAAcC,EAAAA,EAAAA,MAAI,GAClBC,GAAwBD,EAAAA,EAAAA,MAAI,GAC5BE,GAAeF,EAAAA,EAAAA,MAAI,GAEnBG,GAASC,EAAAA,EAAAA,UAAS,CACtBC,IAAKA,IAAMV,EAAMW,WACjBC,IAAMC,GAAUX,EAAK,oBAAqBW,KAGtCC,GAAYL,EAAAA,EAAAA,WAAS,MAChBT,EAAMe,oBAAsBX,EAAYS,UACxCb,EAAMgB,8BAAgCV,EAAsBO,UAIvEI,EAAAA,EAAAA,QAAM,IAAMjB,EAAMW,aAAaO,IACzBA,IACFd,EAAYS,OAAQ,EACpBP,EAAsBO,OAAQ,EAC9BN,EAAaM,OAAQ,EACvB,IAGF,MAAMM,EAAqBA,KACzBC,OAAOC,KAAKC,EAAAA,GAAmB,SAAU,sBAAsB,EAG3DC,EAAoBA,KACxBH,OAAOC,KAAKG,EAAAA,GAAkB,SAAU,sBAAsB,EAG1DC,EAAeC,UACnB,IAAInB,EAAaM,OAAUC,EAAUD,MAArC,CAEAN,EAAaM,OAAQ,EACrB,UACQX,EAAK,UACXE,EAAYS,OAAQ,EACpBP,EAAsBO,OAAQ,CAChC,CAAE,QACAN,EAAaM,OAAQ,CACvB,CATkD,CASlD,EAGIc,EAAmBA,KACvBzB,EAAK,YAAY,E,iqFC5HnB,MAAM0B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://weekly-report/./src/components/PolicyAcceptanceDialog.vue","webpack://weekly-report/./src/components/PolicyAcceptanceDialog.vue?e69c"],"sourcesContent":["<template>\n  <v-dialog v-model=\"dialog\" persistent max-width=\"500px\">\n    <v-card>\n      <v-card-title class=\"text-h5\">ポリシーの更新</v-card-title>\n      <v-card-text class=\"py-2\">\n        <div class=\"px-2 mb-3\">\n          <p v-if=\"needsTosAcceptance && needsPrivacyPolicyAcceptance\">\n            利用規約とプライバシーポリシーが更新されました。<br>続行するには、両方に同意する必要があります。\n          </p>\n          <p v-else-if=\"needsTosAcceptance\">\n            利用規約が更新されました。<br>続行するには、同意する必要があります。\n          </p>\n          <p v-else-if=\"needsPrivacyPolicyAcceptance\">\n            プライバシーポリシーが更新されました。<br>続行するには、同意する必要があります。\n          </p>\n        </div>\n        <v-checkbox\n          v-if=\"needsTosAcceptance\"\n          v-model=\"tosAccepted\"\n          label=\"利用規約に同意します\"\n          hide-details\n          class=\"mb-2\"\n        >\n          <template #label>\n            <div>\n              <a \n                href=\"#\"\n                class=\"text-decoration-none\"\n                @click.prevent=\"openTermsOfService\"\n              >利用規約</a>に同意します\n            </div>\n          </template>\n        </v-checkbox>\n        <v-checkbox\n          v-if=\"needsPrivacyPolicyAcceptance\"\n          v-model=\"privacyPolicyAccepted\"\n          label=\"プライバシーポリシーに同意します\"\n          hide-details\n          class=\"mb-2\"\n        >\n          <template #label>\n            <div>\n              <a \n                href=\"#\"\n                class=\"text-decoration-none\"\n                @click.prevent=\"openPrivacyPolicy\"\n              >プライバシーポリシー</a>に同意します\n            </div>\n          </template>\n        </v-checkbox>\n      </v-card-text>\n      <v-card-actions class=\"px-4 pb-4\">\n        <v-btn\n          variant=\"text\"\n          :disabled=\"isSubmitting\"\n          @click=\"handledDisaccept\"\n        >\n          サインアウト\n        </v-btn>\n        <v-spacer></v-spacer>\n        <v-btn\n          color=\"primary\"\n          :disabled=\"!canAccept\"\n          :loading=\"isSubmitting\"\n          @click=\"handleAccept\"\n        >\n          同意して続行\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n\n<script setup>\nimport { ref, computed, watch } from 'vue'\nimport { termsOfServiceUrl, privacyPolicyUrl } from '@/config/environment'\n\nconst props = defineProps({\n  modelValue: Boolean,\n  needsTosAcceptance: Boolean,\n  needsPrivacyPolicyAcceptance: Boolean,\n})\n\nconst emit = defineEmits(['update:modelValue', 'accept', 'disaccept'])\n\nconst tosAccepted = ref(false)\nconst privacyPolicyAccepted = ref(false)\nconst isSubmitting = ref(false)\n\nconst dialog = computed({\n  get: () => props.modelValue,\n  set: (value) => emit('update:modelValue', value)\n})\n\nconst canAccept = computed(() => {\n  return (!props.needsTosAcceptance || tosAccepted.value) &&\n         (!props.needsPrivacyPolicyAcceptance || privacyPolicyAccepted.value)\n})\n\n// ダイアログが開かれる度にチェックボックスをリセット\nwatch(() => props.modelValue, (newValue) => {\n  if (newValue) {\n    tosAccepted.value = false\n    privacyPolicyAccepted.value = false\n    isSubmitting.value = false\n  }\n})\n\nconst openTermsOfService = () => {\n  window.open(termsOfServiceUrl, '_blank', 'noopener,noreferrer')\n}\n\nconst openPrivacyPolicy = () => {\n  window.open(privacyPolicyUrl, '_blank', 'noopener,noreferrer')\n}\n\nconst handleAccept = async () => {\n  if (isSubmitting.value || !canAccept.value) return\n  \n  isSubmitting.value = true\n  try {\n    await emit('accept')\n    tosAccepted.value = false\n    privacyPolicyAccepted.value = false\n  } finally {\n    isSubmitting.value = false\n  }\n}\n\nconst handledDisaccept = () => {\n  emit('disaccept')\n}\n</script>\n\n<style scoped>\n.v-card-text {\n  max-height: 70vh;\n  overflow-y: auto;\n}\n</style>","import script from \"./PolicyAcceptanceDialog.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PolicyAcceptanceDialog.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PolicyAcceptanceDialog.vue?vue&type=style&index=0&id=7186a5a4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7186a5a4\"]])\n\nexport default __exports__"],"names":["props","__props","emit","__emit","tosAccepted","ref","privacyPolicyAccepted","isSubmitting","dialog","computed","get","modelValue","set","value","canAccept","needsTosAcceptance","needsPrivacyPolicyAcceptance","watch","newValue","openTermsOfService","window","open","termsOfServiceUrl","openPrivacyPolicy","privacyPolicyUrl","handleAccept","async","handledDisaccept","__exports__"],"sourceRoot":""}