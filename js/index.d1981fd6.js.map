{"version":3,"file":"js/index.d1981fd6.js","mappings":"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","sources":["webpack://weekly-report/./src/composables/useCalendar.js","webpack://weekly-report/./src/composables/useResponsive.js","webpack://weekly-report/./src/config/environment.js","webpack://weekly-report/./src/config/plans.js","webpack://weekly-report/./src/components/UserMenu.vue","webpack://weekly-report/./src/components/UserMenu.vue?144d","webpack://weekly-report/./src/App.vue","webpack://weekly-report/./src/App.vue?7ccd","webpack://weekly-report/./src/utils/string-utils.js","webpack://weekly-report/./src/views/SignIn.vue","webpack://weekly-report/./src/views/SignIn.vue?093c","webpack://weekly-report/./src/components/StarBackground.vue","webpack://weekly-report/./src/components/StarBackground.vue?fb14","webpack://weekly-report/./src/views/Overview.vue","webpack://weekly-report/./src/views/Overview.vue?c8a8","webpack://weekly-report/./src/composables/useReport.js","webpack://weekly-report/./src/composables/useWidgets.js","webpack://weekly-report/./src/components/Calendar.vue","webpack://weekly-report/./src/components/Calendar.vue?da16","webpack://weekly-report/./src/components/widget/CalendarWidget.vue","webpack://weekly-report/./src/components/widget/CalendarWidget.vue?fae6","webpack://weekly-report/./src/components/widget/OrganizationWidget.vue","webpack://weekly-report/./src/components/widget/OrganizationWidget.vue?2765","webpack://weekly-report/./src/components/widget/ReportRequestWidget.vue","webpack://weekly-report/./src/components/widget/WeeklyReportWidget.vue","webpack://weekly-report/./src/components/widget/WeeklyReportWidget.vue?3866","webpack://weekly-report/./src/views/Dashboard.vue","webpack://weekly-report/./src/views/Dashboard.vue?040e","webpack://weekly-report/./src/components/WeekSelector.vue","webpack://weekly-report/./src/components/WeekSelector.vue?2541","webpack://weekly-report/./src/components/ProjectSelector.vue","webpack://weekly-report/./src/components/ProjectSelector.vue?177f","webpack://weekly-report/./src/composables/useRatingLogic.js","webpack://weekly-report/./src/components/RatingItem.vue","webpack://weekly-report/./src/components/RatingItem.vue?601d","webpack://weekly-report/./src/components/ReportForm.vue","webpack://weekly-report/./src/components/ReportForm.vue?fb44","webpack://weekly-report/./src/views/WeeklyReport.vue","webpack://weekly-report/./src/views/WeeklyReport.vue?64c1","webpack://weekly-report/./src/services/secureParameterService.js","webpack://weekly-report/./src/services/sendRequestService.js","webpack://weekly-report/./src/components/ReviewCompleteDialog.vue","webpack://weekly-report/./src/components/ReviewCompleteDialog.vue?74b8","webpack://weekly-report/./src/components/ReviewForm.vue","webpack://weekly-report/./src/components/ReviewForm.vue?8f95","webpack://weekly-report/./src/views/WeeklyReview.vue","webpack://weekly-report/./src/views/WeeklyReview.vue?616d","webpack://weekly-report/./src/views/WeeklyReportSummary.vue","webpack://weekly-report/./src/views/WeeklyReportSummary.vue?d55e","webpack://weekly-report/./src/views/OrganizationManagement.vue","webpack://weekly-report/./src/views/OrganizationManagement.vue?6169","webpack://weekly-report/./src/views/OrganizationAccount.vue","webpack://weekly-report/./src/views/OrganizationAccount.vue?4ba3","webpack://weekly-report/./src/services/sesService.js","webpack://weekly-report/./src/config/firebase-config.js","webpack://weekly-report/./src/components/PushNortification.vue","webpack://weekly-report/./src/components/PushNortification.vue?d917","webpack://weekly-report/./src/views/ReportSetting.vue","webpack://weekly-report/./src/views/ReportSetting.vue?5ee6","webpack://weekly-report/./src/router/index.js","webpack://weekly-report/./src/plugins/vuetify.js","webpack://weekly-report/./src/plugins/webfontloader.js","webpack://weekly-report/./src/config/amplify-config.js","webpack://weekly-report/./src/main.js","webpack://weekly-report/./src/services/accountService.js","webpack://weekly-report/./src/services/apiClient.js","webpack://weekly-report/./src/services/bedrockService.js","webpack://weekly-report/./src/services/memberService.js","webpack://weekly-report/./src/services/organizationService.js","webpack://weekly-report/./src/services/paymentService.js","webpack://weekly-report/./src/services/publicService.js","webpack://weekly-report/./src/services/reportService.js","webpack://weekly-report/./src/store/modules/auth.js","webpack://weekly-report/./src/store/index.js","webpack://weekly-report/./src/store/modules/widget.js","webpack://weekly-report/./src/components/OvertimeDisplay.vue","webpack://weekly-report/./src/components/OvertimeDisplay.vue?4b1e","webpack://weekly-report/./src/components/widget/BaseWidget.vue","webpack://weekly-report/./src/components/widget/BaseWidget.vue?c112","webpack://weekly-report/webpack/bootstrap","webpack://weekly-report/webpack/runtime/chunk loaded","webpack://weekly-report/webpack/runtime/compat get default export","webpack://weekly-report/webpack/runtime/create fake namespace object","webpack://weekly-report/webpack/runtime/define property getters","webpack://weekly-report/webpack/runtime/ensure chunk","webpack://weekly-report/webpack/runtime/get javascript chunk filename","webpack://weekly-report/webpack/runtime/get mini-css chunk filename","webpack://weekly-report/webpack/runtime/global","webpack://weekly-report/webpack/runtime/hasOwnProperty shorthand","webpack://weekly-report/webpack/runtime/load script","webpack://weekly-report/webpack/runtime/make namespace object","webpack://weekly-report/webpack/runtime/publicPath","webpack://weekly-report/webpack/runtime/css loading","webpack://weekly-report/webpack/runtime/jsonp chunk loading","webpack://weekly-report/webpack/startup"],"sourcesContent":["import { computed } from 'vue'\n\nexport const useCalendar = () => {\n  const MILLISECONDS_PER_DAY = 24 * 60 * 60 * 1000\n  const WEEKDAYS = ['日', '月', '火', '水', '木', '金', '土']\n\n  const calendarWeeks = computed(() => createWeeks(6))\n\n  const createWeeks = (weekCount) => {\n    const weeks = []\n    const today = new Date()\n    today.setHours(0, 0, 0, 0)\n\n    let currentDate = new Date(today.getFullYear(), today.getMonth(), today.getDate() - 7 * (weekCount - 1))\n    currentDate.setDate(currentDate.getDate() - ((currentDate.getDay() + 6) % 7))\n\n    for (let i = 0; i < weekCount; i++) {\n      const startDate = new Date(currentDate)\n      weeks.push(createWeekItem(startDate, i - weekCount + 1))\n      currentDate.setDate(currentDate.getDate() + 7)\n    }\n    return weeks\n  }\n\n  const createWeekItem = (startDate, weekOffset) => {\n    const days = Array.from({ length: 7 }, (_, i) => new Date(startDate.getTime() + i * MILLISECONDS_PER_DAY))\n    const endDate = new Date(startDate.getTime() + 6 * MILLISECONDS_PER_DAY)\n    endDate.setHours(23, 59, 59, 999)\n    return { startDate, endDate, weekOffset, days }\n  }\n\n  const getWeekOffset = (() => {\n    const today = new Date()\n    const currentWeekMonday = new Date(today)\n    currentWeekMonday.setDate(today.getDate() - today.getDay() + (today.getDay() === 0 ? -6 : 1))\n    currentWeekMonday.setHours(0, 0, 0, 0)\n\n    return (weekStartDate) => {\n      const tempDate = new Date(weekStartDate)\n      tempDate.setHours(0, 0, 0, 0)\n      const diffTime = tempDate.getTime() - currentWeekMonday.getTime()\n      return Math.floor(diffTime / (MILLISECONDS_PER_DAY * 7))\n    }\n  })()\n\n  const isWeekInRange = (week) => {\n    if (!week?.startDate || !week?.endDate) return false\n\n    const today = new Date()\n    today.setHours(0, 0, 0, 0)\n\n    // 過去5週間前の月曜日を取得\n    const minDate = new Date(today)\n    minDate.setDate(today.getDate() - (5 * 7))\n    const minMonday = new Date(minDate)\n    minMonday.setDate(minDate.getDate() - minDate.getDay() + (minDate.getDay() === 0 ? -6 : 1))\n    minMonday.setHours(0, 0, 0, 0)\n\n    // 今週の日曜日を取得（現在の週の最終日）\n    const currentWeekEnd = new Date(today)\n    const daysUntilSunday = 7 - today.getDay()\n    currentWeekEnd.setDate(today.getDate() + daysUntilSunday)\n    currentWeekEnd.setHours(23, 59, 59, 999)\n\n    return week.startDate >= minMonday && week.endDate <= currentWeekEnd\n  }\n\n  const getWeekNumber = (date) => {\n    const d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()))\n    const dayNum = d.getUTCDay() || 7\n    d.setUTCDate(d.getUTCDate() + 4 - dayNum)\n    const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1))\n    return Math.ceil((((d - yearStart) / 86400000) + 1) / 7)\n  }\n\n  const shouldShowMonth = (date, weekIndex, dayIndex) =>\n    date.getDate() === 1 || (weekIndex === 0 && dayIndex === 0)\n\n  const formatShortMonth = (date) => date.toLocaleDateString('ja-JP', { month: 'short' })\n\n  const isToday = (() => {\n    const today = new Date()\n    today.setHours(0, 0, 0, 0)\n    const todayTime = today.getTime()\n    return (date) => date.getTime() === todayTime\n  })()\n\n  const isSaturday = (date) => date.getDay() === 6\n  const isSunday = (date) => date.getDay() === 0\n\n  const getStringFromWeek = (week) => {\n    const date = new Date(week.startDate)\n    date.setDate(date.getDate() + 3)\n    const year = date.getFullYear()\n    const weekNumber = getWeekNumber(date)\n    return `${year}-W${weekNumber.toString().padStart(2, '0')}`\n  }\n\n  const getWeekFromString = (weekString) => {\n    const [year, weekNumber] = weekString.split('-W').map(Number)\n\n    // ISO 8601 週番号の計算\n    // 1月4日が含まれる週を第1週とする\n    const jan4th = new Date(year, 0, 4)\n    const startOfYear = new Date(jan4th)\n    startOfYear.setDate(jan4th.getDate() - jan4th.getDay() + (jan4th.getDay() === 0 ? -6 : 1))\n\n    const targetDate = new Date(startOfYear)\n    targetDate.setDate(startOfYear.getDate() + (weekNumber - 1) * 7)\n\n    // その週の月曜日を取得\n    const weekStart = new Date(targetDate)\n    weekStart.setHours(0, 0, 0, 0)\n\n    return createWeekItem(weekStart, getWeekOffset(weekStart))\n  }\n\n  const getPreviousWeekString = (weekString) => {\n    if (!weekString) {\n      return getStringFromWeek(calendarWeeks.value[calendarWeeks.value.length - 2])\n    }\n\n    const [year, week] = weekString.split('-W').map(Number)\n    const date = new Date(year, 0, 4) // 1月4日から計算開始\n    date.setDate(date.getDate() + (week - 1) * 7) // 指定週の木曜日付近に移動\n    date.setDate(date.getDate() - 7) // 1週前に移動\n\n    // 前週の年と週番号を取得\n    const prevYear = date.getFullYear()\n    const prevWeek = getWeekNumber(date)\n\n    return `${prevYear}-W${prevWeek.toString().padStart(2, '0')}`\n  }\n\n  const getCurrentWeekString = () => getStringFromWeek(calendarWeeks.value[calendarWeeks.value.length - 1])\n\n  const getWeekJpText = (relativeWeekIndex) => {\n    if (relativeWeekIndex === 0) return '今週'\n    if (relativeWeekIndex === -1) return '先週'\n    if (relativeWeekIndex === 1) return '来週'\n    return relativeWeekIndex < 0 ? `${Math.abs(relativeWeekIndex)}週前` : `${relativeWeekIndex}週後`\n  }\n\n  const formatFullDateTimeJp = (date) => {\n    if (!(date instanceof Date) || isNaN(date)) return ''\n    const year = date.getFullYear()\n    const month = date.getMonth() + 1\n    const day = date.getDate()\n    const weekday = WEEKDAYS[date.getDay()]\n    const hour = date.getHours().toString().padStart(2, '0')\n    const minute = date.getMinutes().toString().padStart(2, '0')\n    return `${year}/${month}/${day} (${weekday}) ${hour}:${minute}`\n  }\n\n  const formatDateJp = (date) => {\n    const year = date.getFullYear()\n    const month = (date.getMonth() + 1).toString().padStart(2, '0')\n    const day = date.getDate().toString().padStart(2, '0')\n    return `${year}/${month}/${day}`\n  }\n\n  const formatDateTimeJp = (date) => {\n    const formattedDate = formatDateJp(date)\n    const formattedTime = date.toLocaleTimeString('ja-JP', { hour: '2-digit', minute: '2-digit' })\n    return `${formattedDate} ${formattedTime}`\n  }\n\n  const formatDateRange = (week) => {\n    const options = { year: 'numeric', month: 'long', day: 'numeric' }\n    return `${week.startDate.toLocaleDateString('ja-JP', options)} - ${week.endDate.toLocaleDateString('ja-JP', options)}`\n  }\n\n  const formatWeekLabel = (weekString) => {\n    if (!weekString) return ''\n\n    const [year, week] = weekString.split('-W')\n    return `${year}年${week}週`\n  }\n\n  return {\n    calendarWeeks,\n    createWeeks,\n    isWeekInRange,\n    getWeekNumber,\n    formatShortMonth,\n    isToday,\n    isSaturday,\n    isSunday,\n    shouldShowMonth,\n    getStringFromWeek,\n    getWeekFromString,\n    getPreviousWeekString,\n    getCurrentWeekString,\n    getWeekJpText,\n    formatDateJp,\n    formatDateTimeJp,\n    formatFullDateTimeJp,\n    formatDateRange,\n    formatWeekLabel\n  }\n}","import { computed } from 'vue'\nimport { useDisplay } from 'vuetify'\n\nexport function useResponsive() {\n  const { smAndDown, width } = useDisplay()\n\n  const isMobile = computed(() => {\n    // 640px未満をモバイルとして扱う\n    return width.value < 640\n  })\n\n  const isTablet = computed(() => {\n    // 640px以上、1024px未満をタブレットとして扱う\n    return width.value >= 640 && width.value < 1024\n  })\n\n  const isDesktop = computed(() => {\n    // 1024px以上をデスクトップとして扱う\n    return width.value >= 1024\n  })\n\n  return {\n    isMobile,\n    isTablet,\n    isDesktop,\n    smAndDown\n  }\n}","const isProd = process.env.NODE_ENV === 'production'\n\nfunction getRedirectUrl() {\n  if (!isProd) {\n    // 開発環境では環境変数からポート番号を取得\n    const port = process.env.VUE_APP_PORT || process.env.PORT || 8080\n    return `http://localhost:${port}/`\n  }\n  // 本番環境では現在のホストを使用\n  return `${window.location.protocol}//${window.location.host}/`\n}\n\nfunction getRootUrl() {\n  const { protocol, host } = window.location\n  return `${protocol}//${host}`\n}\n\nexport const redirectUrl = getRedirectUrl()\nexport const rootUrl = getRootUrl()\nexport const contextPath = '/'\nexport const feedbackUrl = 'https://forms.gle/suRGEcRXE33xvFu19'\n\n// 静的ファイルのベースURLを環境に応じて設定\nconst staticBaseUrl = isProd ? process.env.VUE_APP_STATIC_URL || '' : rootUrl\n\nexport const termsOfServiceUrl = `${staticBaseUrl}/legal/terms-of-service.html`\nexport const termsOfServiceVersion = '1.02'\nexport const privacyPolicyUrl = `${staticBaseUrl}/legal/privacy-policy.html`\nexport const privacyPolicyVersion = '1.02'\nexport const specifiedCommercialTransactionsUrl = `${staticBaseUrl}/legal/specified-commercial-transactions.html`\n\nconst config = {\n  isProd,\n  redirectUrl,\n  rootUrl,\n  feedbackUrl\n}\n\nexport default config","import store from '@/store'\nimport { defaultAdvisors } from '@/services/bedrockService'\n\n// 環境変数からpriceIdを取得\nconst STRIPE_PRO_PRICE_ID = process.env.VUE_APP_STRIPE_PRO_PRICE_ID\nconst STRIPE_BUSINESS_PRICE_ID = process.env.VUE_APP_STRIPE_BUSINESS_PRICE_ID\n\n/*\n * プラン定義\n * - 管理者機能の制御は adminFeatures にて設定\n * - 組織情報として更新する必要があるものは organizationFeatures にて設定\n */\nexport const plans = [\n  {\n    planId: 'free',\n    priceId: 'price_free',\n    name: 'フリープラン',\n    price: 0,\n    features: ['利用制限あり（報告通知など）', 'メンバー数最大３名', '基本AIアドバイザーのみ'],\n    adminFeatures: {\n      maxMembers: 3,\n      notifications: false,\n      advisorSettings: false,\n      accountManagement: false\n    },\n    organizationFeatures: {\n      weeklyReportAdvice: true,\n      notifyByEmail: false, // メール通知なしにリセット\n      notifySubscriptions: {}, // ブラウザ通知なしにリセット\n      advisors: defaultAdvisors // デフォルトのアドバイザーのみにリセット\n    }\n  },\n  {\n    planId: 'pro',\n    priceId: STRIPE_PRO_PRICE_ID,\n    name: 'プロプラン',\n    price: 1000,\n    features: ['基本機能が使用可', 'メンバー数最大１０名', '全てのAIアドバイザー'],\n    adminFeatures: {\n      maxMembers: 10,\n      notifications: true,\n      advisorSettings: true,\n      accountManagement: false\n    },\n    organizationFeatures: {\n      weeklyReportAdvice: true\n    }\n  },\n  {\n    planId: 'business',\n    priceId: STRIPE_BUSINESS_PRICE_ID,\n    name: 'ビジネスプラン',\n    price: 2000,\n    pricePerAccount: 500,\n    getPrice: (accountCount) => 2000 + (accountCount * 500),\n    priceDescription: ['+ ¥500/アカウント'],\n    features: ['基本機能が使用可', 'メンバー数無制限', '全てのAIアドバイザー', 'アカウント管理機能'],\n    adminFeatures: {\n      maxMembers: -1,\n      notifications: true,\n      advisorSettings: true,\n      accountManagement: true\n    },\n    organizationFeatures: {\n      weeklyReportAdvice: true\n    }\n  }\n]\n\nexport const getCurrentSubscription = () => store.getters['auth/currentSubscription']\n\nexport const getCurrentPlan = () => {\n  // 親組織IDがある場合は子アカウントなのでビジネスプランとして扱う\n  const parentOrganizationId = store.getters['auth/parentOrganizationId']\n  if (parentOrganizationId) {\n    return plans.find(p => p.planId === 'business')\n  }\n\n  const subscription = getCurrentSubscription()\n  const planId = subscription?.planId || 'free'\n  return plans.find(p => p.planId === planId) || plans[0]\n}\n","<template>\n  <div \n    class=\"user-menu-wrapper\"\n  >\n    <v-list nav role=\"menu\">\n      <v-list-item\n        :title=\"user.email\"\n        :subtitle=\"user.organizationId\"\n        class=\"dense-list-item cursor-pointer\"\n        prepend-icon=\"mdi-account-circle\"\n      >\n        <template #append>\n          <div class=\"mr-n2\">\n            <v-icon :icon=\"showDropdown ? 'mdi-chevron-up' : 'mdi-chevron-down'\" color=\"grey-lighten-1\"></v-icon>\n          </div>\n        </template>\n      </v-list-item>\n    </v-list>\n    <v-menu\n      v-model=\"showDropdown\"\n      activator=\"parent\"\n      location=\"top\"\n      @focus=\"showDropdown = true\"\n      @update:model-value=\"handleDropdownChange\"\n    >\n      <v-list nav role=\"menu\" class=\"brightness120\" :bg-color=\"bgColor\">\n        <v-list-item>\n          <v-list-item-title class=\"text-body-2 py-2 opacity-80\">\n            <div>{{ user.email }}</div>\n            <v-btn\n              prepend-icon=\"mdi-wallet-membership\"\n              :class=\"{ 'px-2': !mobile }\"\n              variant=\"plain\"\n              @click=\"handleBillingClick\"\n            >\n              {{ currentPlan.name }}\n            </v-btn>\n          </v-list-item-title>\n        </v-list-item>\n\n        <v-divider></v-divider>\n\n        <v-list-item\n          prepend-icon=\"mdi-cog-outline\"\n          title=\"アカウント設定\"\n          link\n          @click=\"navigateToAccounttSetting\"\n        >\n        </v-list-item>\n\n        <template v-if=\"mobile\">\n          <v-list-item\n            v-for=\"item in helpMenuItems\"\n            :key=\"item.title\"\n            v-bind=\"item\"\n            link\n            @click=\"item.onClick\"\n          >\n          </v-list-item>\n        </template>\n        <template v-else>\n          <v-list-item\n            prepend-icon=\"mdi-help-circle-outline\"\n            title=\"ヘルプとサポート\"\n          >\n            <template #append>\n              <v-icon icon=\"mdi-chevron-right\"></v-icon>\n            </template>\n            <v-menu\n              v-model=\"showLearnMoreSubmenu\"\n              activator=\"parent\"\n              location=\"right\"\n              open-on-hover\n              :close-delay=\"300\"\n              :open-delay=\"100\"\n            >\n              <v-list class=\"pa-0 brightness120\" :bg-color=\"bgColor\">\n                <v-list-item\n                  v-for=\"item in helpMenuItems\"\n                  :key=\"item.title\"\n                  v-bind=\"item\"\n                  link\n                  @click=\"item.onClick\"\n                >\n                </v-list-item>\n              </v-list>\n            </v-menu>\n          </v-list-item>\n        </template>\n\n        <v-list-item\n          prepend-icon=\"mdi-logout-variant\"\n          title=\"サインアウト\"\n          @click=\"handleSignOut\"\n        >\n        </v-list-item>\n      </v-list>\n    </v-menu>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, inject } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\nimport { feedbackUrl, termsOfServiceUrl, privacyPolicyUrl, specifiedCommercialTransactionsUrl } from '@/config/environment'\nimport { getCurrentPlan } from '@/config/plans'\n\ndefineProps({\n  bgColor: {\n    type: String,\n    default: 'menu'\n  },\n  mobile: {\n    type: Boolean,\n    default: false\n  }\n})\n\nconst showNotification = inject('showNotification')\nconst emit = defineEmits(['sign-out', 'close'])\n\nconst store = useStore()\nconst router = useRouter()\nconst showDropdown = ref(false)\nconst showLearnMoreSubmenu = ref(false)\n\nconst user = computed(() => ({\n  organizationId: store.getters['auth/organizationId'],\n  username: store.getters['auth/name'],\n  email: store.getters['auth/email']\n}))\n\nconst currentPlan = computed(() => getCurrentPlan())\nconst isParentAccount = computed(() => store.getters['auth/isParentAccount'])\n\nconst navigateToAccounttSetting = () => {\n  router.push({ name: 'AccountSetting' })\n}\n\nconst openFeedbackForm = () => {\n  window.open(feedbackUrl, '_blank', 'noopener,noreferrer')\n}\n\nconst openTermsOfService = () => {\n  window.open(termsOfServiceUrl, '_blank', 'noopener,noreferrer')\n}\n\nconst openPrivacyPolicy = () => {\n  window.open(privacyPolicyUrl, '_blank', 'noopener,noreferrer')\n}\n\nconst openSpecifiedCommercialTransactions = () => {\n  window.open(specifiedCommercialTransactionsUrl, '_blank', 'noopener,noreferrer')\n}\n\nconst helpMenuItems = computed(() => ([\n  {\n    prependIcon: 'mdi-comment-quote-outline',\n    title: 'フィードバック',\n    onClick: openFeedbackForm\n  },\n  {\n    prependIcon: 'mdi-file-document-outline',\n    title: '利用規約',\n    onClick: openTermsOfService\n  },\n  {\n    prependIcon: 'mdi-shield-account-outline',\n    title: 'プライバシーポリシー',\n    onClick: openPrivacyPolicy\n  },\n  {\n    prependIcon: 'mdi-shopping-outline',\n    title: '特定商取引法に基づく表記',\n    onClick: openSpecifiedCommercialTransactions\n  }\n]))\n\nconst handleSignOut = () => {\n  emit('sign-out')\n}\n\nconst handleDropdownChange = (value) => {\n  showDropdown.value = value\n  if (!value) {\n    emit('close')\n  }\n}\n\nconst handleBillingClick = () => {\n  if (isParentAccount.value) {\n    router.push({ name: 'Billing' })\n  } else {\n    showNotification('支払い設定は親アカウントでのみ変更可能です。', 'warning')\n  }\n}\n</script>\n\n<style scoped>\n.user-menu-wrapper {\n  width: 100%;\n}\n\n:deep(.v-list-item-title) {\n  font-size: 0.925rem !important;\n  font-weight: 400;\n}\n\n:deep(.v-list-item .text-body-2) {\n  font-size: 0.925rem !important;\n}\n</style>","import script from \"./UserMenu.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./UserMenu.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./UserMenu.vue?vue&type=style&index=0&id=18c3125c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-18c3125c\"]])\n\nexport default __exports__","<template>\n  <v-app id=\"main\" aria-label=\"Main application\">\n    <template v-if=\"showAnimation\">\n      <div class=\"wave-container\">\n        <div class=\"wave\"></div>\n        <div class=\"wave\"></div>\n        <v-img\n          v-if=\"!isMobile && showMascot\"\n          src=\"@/assets/images/rakko.webp\"\n          width=\"340\"\n          class=\"on-wave mx-auto\"\n          :style=\"bgImageStyle\"\n          alt=\"Cute sea otter mascot floating on waves\"\n          loading=\"lazy\"\n        ></v-img>\n      </div>\n    </template>\n\n    <!-- Notification snackbar -->\n    <v-snackbar\n      v-model=\"notification.show\"\n      :color=\"getNotificationColor\"\n      :timeout=\"5000\"\n      location=\"top\"\n      max-width=\"960px\"\n      :width=\"`calc(100vw - ${navigationWidth + 20}px)`\"\n      class=\"custom-snackbar\"\n      role=\"alert\"\n      aria-live=\"assertive\"\n    >\n      <div class=\"text-subtitle-1 d-flex align-center py-1\">\n        <v-icon\n          :icon=\"getNotificationIcon\"\n          class=\"mr-2\"\n          color=\"white\"\n          aria-hidden=\"true\"\n        />\n        {{ notification.message }}\n      </div>\n      <template #actions>\n        <v-btn\n          color=\"white\"\n          variant=\"text\"\n          icon=\"mdi-close\"\n          aria-label=\"Close notification\"\n          @click=\"closeNotification\"\n        >\n        </v-btn>\n      </template>\n    </v-snackbar>\n\n    <!-- Navigation drawer -->\n    <template v-if=\"showNavigation\">\n      <v-navigation-drawer\n        v-if=\"!isMobile\"\n        v-model=\"drawer\"\n        :rail=\"isRailModeActive\"\n        permanent\n        location=\"left\"\n        :width=\"255\"\n        color=\"menu\"\n        class=\"navigation-drawer d-print-none\"\n        aria-label=\"Main navigation\"\n        @mouseenter=\"isHovered = true\"\n        @mouseleave=\"isHovered = false\"\n      >\n        <v-list role=\"menu\">\n          <v-list-item class=\"dense-list-item pr-2\">\n            <template #prepend>\n              <v-icon \n                v-ripple\n                icon=\"mdi-menu\"\n                class=\"opacity-100 mr-1 my-3\"\n                role=\"button\"\n                aria-label=\"Toggle drawer mode\"\n                tabindex=\"0\"\n                @click=\"toggleDrawerMode\"\n              ></v-icon>\n            </template>\n            <v-list-item-title>\n              <v-img\n                src=\"@/assets/logo.png\"\n                class=\"cursor-pointer mr-2\"\n                alt=\"application logo\"\n                role=\"link\"\n                aria-label=\"Go to Overview\"\n                tabindex=\"0\"\n                loading=\"lazy\"\n                @click=\"navigateTo({ name: 'Overview' })\"\n              ></v-img>\n            </v-list-item-title>\n            <template #append>\n              <v-icon \n                :icon=\"isRailMode ? 'mdi-format-horizontal-align-right' : 'mdi-format-horizontal-align-left'\"\n                role=\"button\"\n                :aria-label=\"isRailMode ? 'Expand drawer' : 'Collapse drawer'\"\n                tabindex=\"0\"\n                @click=\"toggleDrawerMode\"\n              ></v-icon>\n            </template>\n          </v-list-item>\n        </v-list>\n        <v-divider></v-divider>\n        <v-list nav role=\"menu\">\n          <v-list-item\n            v-for=\"item in navigationItems\"\n            :key=\"item.value\"\n            :prepend-icon=\"item.icon\"\n            :value=\"item.value\"\n            role=\"menuitem\"\n            :aria-label=\"item.title\"\n            @click=\"navigateTo(item.route)\"\n          >\n            <v-list-item-title class=\"pl-2\">{{ item.title }}</v-list-item-title>\n          </v-list-item>\n        </v-list>\n\n        <!-- User menu -->\n        <template #append>\n          <v-divider />\n          <UserMenu \n            @sign-out=\"handleSignOut\"\n            @close=\"showUserMenu = false\"\n          />\n        </template>\n      </v-navigation-drawer>\n\n      <!-- Mobile bottom navigation -->\n      <v-bottom-navigation\n        v-else\n        bg-color=\"menu\"\n        class=\"d-print-none\"\n        grow\n        role=\"navigation\"\n        aria-label=\"Mobile navigation\"\n      >\n        <v-btn\n          v-for=\"item in navigationItems\"\n          :key=\"item.value\"\n          :value=\"item.value\"\n          :aria-label=\"item.title\"\n          class=\"pb-3\"\n          @click=\"navigateTo(item.route)\"\n        >\n          <v-icon size=\"x-large\" aria-hidden=\"true\">\n            {{ item.icon }}\n          </v-icon>\n        </v-btn>\n        <v-btn\n          value=\"user-menu\"\n          aria-label=\"ユーザーメニュー\"\n          class=\"pb-3\"\n          @click=\"showMobileUserMenu = true\"\n        >\n          <v-icon size=\"x-large\" aria-hidden=\"true\">\n            mdi-account-circle\n          </v-icon>\n        </v-btn>\n      </v-bottom-navigation>\n      \n      <DialogUserMenu \n        v-model=\"showMobileUserMenu\"\n        @sign-out=\"handleSignOut\"\n      />\n    </template>\n\n    <!-- Main content area -->\n    <v-main id=\"main-content\" :class=\"{ 'noshift': isRailModeActive }\" :style=\"appStyle\" role=\"main\">\n      <div v-if=\"!isFullWidthPage\" class=\"content-wrapper\">\n        <router-view />\n      </div>\n      <router-view v-else />\n    </v-main>\n\n    <!-- Confirmation dialog -->\n    <ConfirmationDialog ref=\"confirmDialog\" />\n    <!-- Loading overlay -->\n    <LoadingOverlay :style=\"bgImageStyle\" />\n    <!-- Policy Acceptance Dialog -->\n    <PolicyAcceptanceDialog\n      v-model=\"showPolicyDialog\"\n      :needs-tos-acceptance=\"needsTosAcceptance\"\n      :needs-privacy-policy-acceptance=\"needsPrivacyPolicyAcceptance\"\n      @accept=\"handlePolicyAcceptance\"\n      @disaccept=\"handlePolicyDisacceptance\"\n    />\n  </v-app>\n</template>\n\n<script setup>\nimport { ref, provide, reactive, computed, watch, onMounted, defineAsyncComponent } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useStore } from 'vuex'\nimport { useResponsive } from './composables/useResponsive'\nimport UserMenu from './components/UserMenu.vue'\nimport { getCurrentPlan } from './config/plans'\n\nconst ConfirmationDialog = defineAsyncComponent(() => import('./components/ConfirmationDialog.vue'))\nconst LoadingOverlay = defineAsyncComponent(() => import('./components/LoadingOverlay.vue'))\nconst PolicyAcceptanceDialog = defineAsyncComponent(() => import('./components/PolicyAcceptanceDialog.vue'))\nconst DialogUserMenu = defineAsyncComponent(() => import('./components/DialogUserMenu.vue'))\n\nconst router = useRouter()\nconst store = useStore()\nconst { isMobile } = useResponsive()\n\nconst currentPlan = computed(() => getCurrentPlan())\n\n// Convert navigationItems to computed property\nconst navigationItems = computed(() => {\n  const items = [\n    { \n      icon: 'mdi-view-dashboard', \n      title: 'ダッシュボード', \n      value: 'Dashboard', \n      route: { name: 'Dashboard' }\n    },\n    { \n      icon: 'mdi-calendar-multiple-check', \n      title: '週次報告レビュー', \n      value: 'WeeklyReview', \n      route: { name: 'WeeklyReviewSelector' }\n    },\n    { \n      icon: 'mdi-calendar-clock', \n      title: '週次報告設定', \n      value: 'ReportSetting', \n      route: { name: 'ReportSetting' }\n    },\n    { \n      icon: 'mdi-domain', \n      title: '組織情報管理', \n      value: 'Organization', \n      route: { name: 'OrganizationManagement' }\n    },\n  ]\n\n  if (currentPlan.value.adminFeatures.accountManagement && store.getters['auth/isParentAccount']) {\n    items.push({\n      icon: 'mdi-account-cog',\n      title: '組織アカウント管理',\n      value: 'OrganizationAccount',\n      route: { name: 'OrganizationAccount' }\n    })\n  }\n\n  return items\n})\n\nconst confirmDialog = ref(null)\nconst drawer = ref(true)\nconst isRailMode = ref(true)\nconst isHovered = ref(false)\nconst showAnimation = ref(true)\nconst showMascot = ref(true)\nconst showNavigation = ref(true)\nconst showPolicyDialog = ref(false)\nconst showUserMenu = ref(false)\nconst needsTosAcceptance = ref(false)\nconst needsPrivacyPolicyAcceptance = ref(false)\nconst isPolicyCheckPending = ref(true)\nconst isAuthenticated = computed(() => store.getters['auth/isAuthenticated'])\nconst showMobileUserMenu = ref(false)\n\nrouter.beforeEach((to, from, next) => {\n  showAnimation.value = !to.meta.hideAnimation\n  showMascot.value = !to.meta.hideMascot\n  showNavigation.value = !to.meta.hideNavigation\n  next()\n})\n\nconst isRailModeActive = computed(() => !isMobile.value && isRailMode.value && !(isHovered.value || showUserMenu.value))\nconst navigationWidth = computed(() => isRailModeActive.value ? 56 : 255)\n\nconst appStyle = computed(() => ({\n  paddingBottom: (router.currentRoute.value.meta.hideAnimation ? 30 : 260) + 'px'\n}))\n\nconst bgImageStyle = computed(() => ({\n  marginLeft: (isMobile.value || router.currentRoute.value.meta.hideNavigation \n    ? 20 \n    : 20 + navigationWidth.value / 2) + 'px !important',\n  bottom: (isMobile.value ? 30 : -10) + 'px !important'\n}))\n\nconst toggleDrawerMode = () => {\n  isRailMode.value = !isRailMode.value\n  isHovered.value = false\n}\n\nconst notification = reactive({\n  show: false,\n  type: 'success',\n  message: ''\n})\n\nconst getNotificationIcon = computed(() => {\n  switch (notification.type) {\n  case 'success': return 'mdi-check-circle'\n  case 'error': return 'mdi-alert-circle'\n  case 'warning': return 'mdi-alert'\n  case 'info': return 'mdi-information'\n  default: return 'mdi-bell'\n  }\n})\n\nconst getNotificationColor = computed(() => {\n  switch (notification.type) {\n  case 'error': return 'error'\n  case 'warning': return 'warning'\n  default: return 'info'\n  }\n})\n\nconst showNotification = (message, type, error = false) => {\n  notification.show = true\n  notification.type = type || 'success'\n  notification.message = message\n  if (error) {\n    console.error(error)\n  }\n}\n\nconst showError = (message, error) => {\n  showNotification(message, 'error', error)\n}\n\nconst closeNotification = () => {\n  notification.show = false\n}\n\nconst showConfirmDialogGlobal = async (title, message, color = 'primary') => {\n  if (!confirmDialog.value) {\n    console.error('Confirmation dialog component not found')\n    return false\n  }\n  try {\n    return await confirmDialog.value.open(title, message, color)\n  } catch (error) {\n    console.error('Error showing confirmation dialog:', error)\n    return false\n  }\n}\n\nprovide('showConfirmDialog', showConfirmDialogGlobal)\nprovide('showNotification', showNotification)\nprovide('showError', showError)\n\nconst navigateTo = (route, params = {}) => {\n  router.push({ ...route, params: { ...route.params, ...params } })\n  if (isMobile.value) {\n    drawer.value = false\n  }\n}\n\nconst checkPolicies = async () => {\n  if (!isAuthenticated.value) {\n    isPolicyCheckPending.value = false\n    return\n  }\n\n  try {\n    const { needsTosAcceptance: needsTos, needsPrivacyPolicyAcceptance: needsPrivacy } = \n      await store.dispatch('auth/checkPolicyAcceptance')\n    \n    needsTosAcceptance.value = needsTos\n    needsPrivacyPolicyAcceptance.value = needsPrivacy\n    \n    if (needsTos || needsPrivacy) {\n      showPolicyDialog.value = true\n    }\n  } catch (error) {\n    console.error('Policy check failed:', error)\n    showError('ポリシーの確認に失敗しました。')\n  } finally {\n    isPolicyCheckPending.value = false\n  }\n}\n\nconst handlePolicyAcceptance = async () => {\n  try {\n    await store.dispatch('auth/updatePolicyAcceptance', {\n      tosAccepted: needsTosAcceptance.value,\n      privacyPolicyAccepted: needsPrivacyPolicyAcceptance.value,\n    })\n    showPolicyDialog.value = false\n    needsTosAcceptance.value = false\n    needsPrivacyPolicyAcceptance.value = false\n    showNotification('ポリシーの同意が更新されました。', 'success')\n  } catch (error) {\n    console.error('Policy acceptance update failed:', error)\n    showError('ポリシーの更新に失敗しました。再度お試しください。')\n  }\n}\n\nconst handlePolicyDisacceptance = async () => {\n  try {\n    await store.dispatch('auth/signOut')\n    showPolicyDialog.value = false\n    router.push({ name: 'SignIn' })\n  } catch (error) {\n    console.error('サインアウトに失敗しました', error)\n  }\n}\n\nconst handleSignOut = async () => {\n  try {\n    await store.dispatch('auth/signOut')\n    router.push({ name: 'SignIn' })\n  } catch (error) {\n    console.error('サインアウトに失敗しました', error)\n  }\n}\n\nwatch(isAuthenticated, (newValue) => {\n  if (newValue) {\n    checkPolicies()\n  } else {\n    isPolicyCheckPending.value = false\n    showPolicyDialog.value = false\n    needsTosAcceptance.value = false\n    needsPrivacyPolicyAcceptance.value = false\n  }\n})\n\nonMounted(() => {\n  // 事前ロード\n  const img = new Image()\n  img.src = new URL('@/assets/images/rakko.webp', import.meta.url).href\n  // ローカルストレージからRailModeの状態を読み込む\n  const savedRailMode = localStorage.getItem('railMode')\n  isRailMode.value = savedRailMode !== null ? JSON.parse(savedRailMode) : true\n\n  checkPolicies()\n})\n\nwatch(isRailMode, (newValue) => {\n  // RailModeの状態が変更されたときにローカルストレージに保存\n  localStorage.setItem('railMode', JSON.stringify(newValue))\n})\n\n// メタデータに基づいてレイアウトを制御\nconst isFullWidthPage = computed(() => {\n  return router.currentRoute.value.meta.fullWidth || false\n})\n</script>\n\n<style>\n#main {\n  position: relative;\n  background-color: #f1f8fe;\n  z-index: 0;\n  min-height: 100vh;\n}\n\n.wave-container {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 200px;\n  overflow: hidden;\n  z-index: -1;\n}\n\n.wave {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 200%;\n  height: 100%;\n  background: url('./assets/wave.svg') repeat-x;\n  animation: wave 48s cubic-bezier(0.36, 0.45, 0.63, 0.53) infinite;\n  transform: translate3d(0, 0, 0);\n  will-change: transform;\n}\n\n.wave:nth-of-type(2) {\n  animation: wave 30s cubic-bezier(0.36, 0.45, 0.63, 0.53) reverse infinite;\n  opacity: 0.7;\n  z-index: -3;\n}\n\n@keyframes wave {\n  0% {\n    transform: translateX(-5%);\n  }\n  50% {\n    transform: translateX(-30%);\n  }\n  100% {\n    transform: translateX(-5%);\n  }\n}\n\n.on-wave {\n  position: fixed;\n  bottom: -10px;\n  left: 50%;\n  transform: translateX(-50%);\n  transition: margin-left 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n  width: 100%;\n  animation: float 16s ease-in-out infinite;\n  z-index: -2;\n}\n\n@keyframes float {\n  0%,\n  100% {\n    transform: translateX(-50%) translateY(-0px);\n  }\n  25% {\n    transform: translateX(-49%) translateY(-25px);\n  }\n  50% {\n    transform: translateX(-50%) translateY(-10px);\n  }\n  75% {\n    transform: translateX(-51%) translateY(-35px);\n  }\n}\n\n.custom-snackbar .v-snackbar__wrapper {\n  border-radius: 8px !important;\n}\n\n.custom-snackbar .v-snackbar__content {\n  border-radius: 8px !important;\n}\n</style>\n\n<style scoped>\n.v-application#main {\n  max-width: 100%;\n  margin: 0 auto;\n}\n\n.content-wrapper {\n  max-width: 960px;\n  margin: 0 auto;\n  padding: 0 16px;\n}\n\n.navigation-drawer {\n  z-index: 1000;\n  transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14),\n    0 1px 10px 0 rgba(0, 0, 0, 0.12) !important;\n}\n\n#main .v-main.noshift {\n  padding-left: 56px !important;\n}\n\n@media (max-width: 600px) {\n  .content-wrapper {\n    max-width: 100%;\n    padding: 4px;\n  }\n\n  .v-container {\n    padding: 8px;\n  }\n}\n</style>","import script from \"./App.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=ddac534e&lang=css\"\nimport \"./App.vue?vue&type=style&index=1&id=ddac534e&scoped=true&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-ddac534e\"]])\n\nexport default __exports__","export const isValidEmail = (email) => {\n  // RFC 5322に基づくメールアドレス検証の正規表現\n  const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n  return re.test(email)\n}\n\n/**\n * メールの送信者名のバリデーション結果\n * @typedef {Object} SenderNameValidationResult\n * @property {boolean} isValid - 有効な場合はtrue\n * @property {string} message - エラーメッセージ（有効な場合は空文字列）\n */\n\n/**\n * MIME encoded-word形式でエンコードした場合の長さを計算\n * @param {string} text - 対象文字列\n * @returns {number} エンコード後の長さ\n */\nfunction getMimeEncodedLength(text) {\n  // UTF-8でバイト配列に変換\n  const utf8Bytes = new TextEncoder().encode(text)\n  // Base64エンコード後の長さを計算（4文字毎に3バイトをエンコード）\n  const base64Length = Math.ceil(utf8Bytes.length / 3) * 4\n  // MIME encoded-word形式の全体の長さを計算\n  // =?UTF-8?B?{encoded-text}?=\n  return 10 + base64Length\n}\n\n// メール送信で問題が発生しやすい文字のパターン\nconst PROBLEMATIC_CHARS = {\n  // 丸付き文字、組文字\n  circled: /[㈱㈲㈳㈴㈵㈶㈷㈸㈹㈺㈻㈼㈽㈾㈿]/,\n  // ローマ数字\n  romanNumerals: /[ⅠⅡⅢⅣⅤⅥⅦⅧⅨⅩⅪⅫⅰⅱⅲⅳⅴⅵⅶⅷⅸⅹⅺⅻ]/,\n  // 囲み文字（丸、角）\n  enclosed: /[①②③④⑤⑥⑦⑧⑨⑩⑪⑫⑬⑭⑮⑯⑰⑱⑲⑳❶❷❸❹❺❻❼❽❾❿⓫⓬⓭⓮⓯⓰⓱⓲⓳⓴]/,\n  // 機種依存文字（一部）\n  deviceDependent: /[℡№℃℉]/\n}\n\n/**\n * メールの送信者名として有効かチェックする\n * @param {string} name - チェックする送信者名\n * @returns {SenderNameValidationResult} バリデーション結果\n */\nexport function validateSenderName(name) {\n  if (typeof name !== 'string') {\n    return { isValid: false, message: '送信者名は文字列で入力してください' }\n  }\n\n  // 制御文字をチェック\n  for (let i = 0; i < name.length; i++) {\n    const code = name.charCodeAt(i)\n    if (code < 32 || code === 127) {\n      return { isValid: false, message: '送信者名に制御文字は使用できません' }\n    }\n  }\n\n  // 問題が発生しやすい文字をチェック\n  for (const [, pattern] of Object.entries(PROBLEMATIC_CHARS)) {\n    if (pattern.test(name)) {\n      const examples = name.match(pattern).join(' ')\n      return {\n        isValid: false,\n        message: `送信者名に使用できない文字が含まれています（${examples}）。これらの文字はメール送信時に問題が発生する可能性があります。`\n      }\n    }\n  }\n\n  // エスケープされていない特殊文字をチェック\n  const unescapedSpecialChars = /(?<!\\\\)[()[\\]<>;:,\\\\]/\n  if (unescapedSpecialChars.test(name)) {\n    return { isValid: false, message: '送信者名に使用できない特殊文字が含まれています（()[]<>;:,\\\\）' }\n  }\n\n  // エスケープされていない二重引用符をチェック\n  const unescapedQuotes = /(?<!\\\\)\"/\n  if (unescapedQuotes.test(name)) {\n    return { isValid: false, message: '送信者名にエスケープされていない二重引用符（\"）は使用できません' }\n  }\n\n  // MIME encoded-word形式でエンコードした場合の長さをチェック\n  const encodedLength = getMimeEncodedLength(name)\n  if (encodedLength > 75) { // RFC 2047では75文字以内を推奨\n    return { isValid: false, message: '送信者名が長すぎます（エンコード後約30文字以内）' }\n  }\n\n  return { isValid: true, message: '' }\n}\n\nexport const isValidOrganizationId = (value) => {\n  if (!value) return false\n  if (value.length < 3 || value.length > 20) return false\n  return /^[a-zA-Z0-9_-]+$/.test(value)\n}\n\nexport const validateOrganizationId = (value) => {\n  if (!value) return '組織IDは必須です'\n  if (value.length < 3) return '組織IDは3文字以上で入力してください'\n  if (value.length > 20) return '組織IDは20文字以下で入力してください'\n  return /^[a-zA-Z0-9_-]+$/.test(value) || '組織IDは英数字、ハイフン、アンダースコアのみで入力してください'\n}\n","<template>\n  <v-container>\n    <v-card max-width=\"500\" class=\"mx-auto mt-6 px-4 rounded-lg\">\n      <v-card-title class=\"mt-1 mb-4\">\n        <div class=\"text-center mb-5\">\n          <router-link to=\"/\" class=\"text-indigo-darken-2 text-decoration-none\">\n            <h1 class=\"logo-font\">fluxweek</h1>\n          </router-link>\n        </div>\n        <v-icon size=\"large\" class=\"mr-1\">mdi-bird</v-icon>\n        {{ title }}\n      </v-card-title>\n      <v-card-text>\n        <v-alert\n          v-if=\"successMessage\"\n          type=\"success\"\n          class=\"resultMessage mb-4\"\n          dismissible\n          @click:close=\"successMessage = ''\"\n        >\n          {{ successMessage }}\n        </v-alert>        \n        <v-alert \n          v-if=\"errorMessage\" \n          type=\"error\" \n          class=\"resultMessage mb-4\"\n          dismissible\n          @click:close=\"errorMessage = ''\"\n        >\n          {{ errorMessage }}\n          <div v-if=\"isAlreadyAuthenticated\">\n            <v-btn\n              color=\"white\"\n              variant=\"tonal\"\n              class=\"mt-2\"\n              @click=\"handleSignOut\"\n            >\n              ログアウトする\n            </v-btn>\n          </div>\n        </v-alert>\n\n        <!-- サインインフォーム -->\n        <v-form v-if=\"currentView === 'signIn'\" @submit.prevent=\"handleSignIn\">\n          <v-text-field\n            v-model=\"signInEmail\"\n            label=\"メールアドレス\"\n            required\n          />\n          <v-text-field\n            v-model=\"signInPassword\"\n            label=\"パスワード\"\n            type=\"password\"\n            required\n          />\n          <v-btn\n            color=\"primary\"\n            type=\"submit\"\n            block\n            class=\"mt-4\"\n            :loading=\"loading\"\n          >\n            サインイン\n          </v-btn>\n        </v-form>\n\n        <!-- サインアップフォーム -->\n        <v-form v-else-if=\"currentView === 'signUp'\" ref=\"signUpForm\" @submit.prevent=\"handleSignUpSubmit\">\n          <v-text-field\n            v-model=\"signUpEmail\"\n            label=\"メールアドレス\"\n            type=\"email\"\n            required\n            :rules=\"[v => !!v || 'メールアドレスは必須です', v => /.+@.+\\..+/.test(v) || '有効なメールアドレスを入力してください']\"\n          />\n          <v-text-field\n            v-model=\"signUpPassword\"\n            label=\"パスワード\"\n            type=\"password\"\n            required\n            :rules=\"[v => !!v || 'パスワードは必須です', v => v.length >= 8 || 'パスワードは8文字以上である必要があります']\"\n          />\n          <v-text-field\n            v-model=\"organizationId\"\n            label=\"組織ID\"\n            required\n            :rules=\"[validateOrganizationId]\"\n            @input=\"clearErrorMessage\"\n          />\n          <v-text-field\n            v-model=\"organizationName\"\n            label=\"組織名\"\n            required\n            :rules=\"[v => !!v || '組織名は必須です']\"\n          />\n          <v-checkbox\n            v-model=\"agreeToTerms\"\n            label=\"利用規約に同意する\"\n            required\n            hide-details\n          >\n            <template #label>\n              <span>\n                <a href=\"#\" @click.prevent=\"openTermsOfService\">利用規約</a>に同意する\n              </span>\n            </template>\n          </v-checkbox>\n          <v-checkbox\n            v-model=\"agreeToPrivacy\"\n            label=\"プライバシーポリシーに同意する\"\n            required\n            hide-details\n          >\n            <template #label>\n              <span>\n                <a href=\"#\" @click.prevent=\"openPrivacyPolicy\">プライバシーポリシー</a>に同意する\n              </span>\n            </template>\n          </v-checkbox>\n          <v-btn\n            color=\"primary\"\n            type=\"submit\"\n            block\n            class=\"mt-4\"\n            :loading=\"loading\"\n            :disabled=\"loading || !isAgreedToAll\"\n          >\n            サインアップ\n          </v-btn>\n        </v-form>\n\n        <!-- 確認コードフォーム -->\n        <v-form v-else-if=\"currentView === 'confirm'\" @submit.prevent=\"confirmSignUpUser\">\n          <v-text-field\n            v-model=\"confirmEmail\"\n            label=\"メールアドレス\"\n            required\n          />\n          <v-text-field\n            v-model=\"confirmCode\"\n            label=\"確認コード\"\n            required\n          />\n          <v-btn\n            color=\"primary\"\n            type=\"submit\"\n            block\n            class=\"mt-4\"\n            :loading=\"loading\"\n          >\n            確認\n          </v-btn>\n          <v-btn\n            text\n            color=\"secondary\"\n            :disabled=\"loading\"\n            class=\"mt-2\"\n            @click=\"resendConfirmationCode\"\n          >\n            確認コードを再送信\n          </v-btn>\n        </v-form>\n\n        <!-- パスワード変更フォーム -->\n        <v-form v-else-if=\"currentView === 'changePassword'\" @submit.prevent=\"handleChangePassword\">\n          <v-text-field\n            v-model=\"newPassword\"\n            label=\"新しいパスワード\"\n            type=\"password\"\n            required\n            :rules=\"[\n              v => !!v || 'パスワードは必須です',\n              v => v.length >= 8 || 'パスワードは8文字以上である必要があります'\n            ]\"\n          />\n          <v-text-field\n            v-model=\"confirmNewPassword\"\n            label=\"新しいパスワード（確認）\"\n            type=\"password\"\n            required\n            :rules=\"[\n              v => !!v || 'パスワードの確認は必須です',\n              v => v === newPassword || 'パスワードが一致しません'\n            ]\"\n          />\n          <v-btn\n            color=\"primary\"\n            type=\"submit\"\n            block\n            class=\"mt-4\"\n            :loading=\"loading\"\n          >\n            パスワードを変更\n          </v-btn>\n        </v-form>\n\n        <v-card-actions>\n          <v-spacer />\n          <v-btn\n            text\n            color=\"primary\"\n            @click=\"toggleView\"\n          >\n            {{ toggleButtonText }}\n          </v-btn>\n        </v-card-actions>\n      </v-card-text>\n    </v-card>\n  </v-container>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { useStore } from 'vuex'\nimport { signIn, signUp, confirmSignUp, resendSignUpCode, confirmSignIn, signOut } from '@aws-amplify/auth'\nimport { termsOfServiceUrl, privacyPolicyUrl, termsOfServiceVersion, privacyPolicyVersion } from '@/config/environment'\nimport { getOrganization, submitOrganization } from '@/services/publicService'\nimport { validateOrganizationId } from '@/utils/string-utils'\n\nconst router = useRouter()\nconst store = useStore()\nconst route = useRoute()\n\n// State\nconst currentView = ref(route.path === '/signup' ? 'signUp' : 'signIn')\nconst signInEmail = ref('')\nconst signInPassword = ref('')\nconst signUpEmail = ref('')\nconst signUpPassword = ref('')\nconst organizationId = ref('')\nconst organizationName = ref('')\nconst confirmEmail = ref('')\nconst confirmCode = ref('')\nconst newPassword = ref('')\nconst confirmNewPassword = ref('')\nconst loading = ref(false)\nconst successMessage = ref('')\nconst errorMessage = ref('')\nconst signUpForm = ref(null)\nconst agreeToTerms = ref(false)\nconst agreeToPrivacy = ref(false)\nconst isAlreadyAuthenticated = ref(false)\n\n// Computed properties\nconst title = computed(() => {\n  const titles = {\n    signIn: 'サインイン',\n    signUp: 'サインアップ',\n    confirm: '確認コードの入力',\n    changePassword: 'パスワード変更'\n  }\n  return titles[currentView.value] || ''\n})\n\nconst toggleButtonText = computed(() => {\n  const texts = {\n    signIn: 'アカウントを作成',\n    signUp: 'サインインに戻る',\n    confirm: 'サインインに戻る',\n    changePassword: 'サインインに戻る'\n  }\n  return texts[currentView.value] || ''\n})\n\nconst isAgreedToAll = computed(() => agreeToTerms.value && agreeToPrivacy.value)\n\n// Methods\n\nconst clearErrorMessage = () => {\n  errorMessage.value = ''\n}\n\nconst handleSignIn = async () => {\n  loading.value = true\n  errorMessage.value = ''\n  successMessage.value = ''\n  try {\n    const signInResult = await signIn({ \n      username: signInEmail.value, \n      password: signInPassword.value \n    })\n\n    // 仮パスワードでのサインインの場合\n    if (signInResult.nextStep?.signInStep === 'CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED') {\n      currentView.value = 'changePassword'\n      // セッション情報を保持\n      sessionStorage.setItem('requiresNewPassword', 'true')\n      sessionStorage.setItem('tempUsername', signInEmail.value)\n      return\n    }\n\n    // 通常のサインイン成功の場合\n    try {\n      await store.dispatch('auth/fetchUser')\n      await router.push('/admin')\n    } catch (fetchError) {\n      console.error('User fetch error:', fetchError)\n      if (fetchError.message?.includes('NEW_PASSWORD_REQUIRED')) {\n        currentView.value = 'changePassword'\n        return\n      }\n      throw fetchError\n    }\n\n  } catch (error) {\n    console.error('SignIn error:', error)\n    handleAuthError(error)\n  } finally {\n    loading.value = false\n  }\n}\n\nconst handleSignUpSubmit = async () => {\n  errorMessage.value = ''\n  const { valid } = await signUpForm.value.validate()\n  \n  if (!valid) {\n    errorMessage.value = 'すべての必須フィールドを正しく入力してください。'\n    return\n  }\n\n  if (!validateOrganizationId(organizationId.value)) {\n    errorMessage.value = '組織IDは英数字のみで入力してください。'\n    return\n  }\n\n  const org = await getOrganization(organizationId.value)\n  if (org) {\n    errorMessage.value = 'この組織IDは既に使用されています。'\n    return\n  }\n\n  await signUpUser()\n}\n\nconst signUpUser = async () => {\n  loading.value = true\n  try {\n    const { user } = await signUp({\n      username: signUpEmail.value,\n      password: signUpPassword.value,\n      options: {\n        userAttributes: {\n          email: signUpEmail.value,\n          name: signUpEmail.value,\n          'custom:organizationId': organizationId.value,\n          'custom:tos_version': termsOfServiceVersion,\n          'custom:pp_version': privacyPolicyVersion\n        }\n      }\n    })\n    console.log('サインアップ成功:', user)\n    confirmEmail.value = signUpEmail.value\n    currentView.value = 'confirm'\n    successMessage.value = '確認コードを送信しました。メールをご確認ください。'\n  } catch (error) {\n    console.error('サインアップエラー:', error)\n    errorMessage.value = error.message || 'サインアップに失敗しました。入力内容を確認してください。'\n  } finally {\n    loading.value = false\n  }\n}\n\nconst confirmSignUpUser = async () => {\n  loading.value = true\n  errorMessage.value = ''\n  try {\n    await confirmSignUp({ username: confirmEmail.value, confirmationCode: confirmCode.value })\n\n    // 組織情報を登録\n    const organization = { \n      organizationId: organizationId.value, \n      name: organizationName.value, \n      sender: 'notify@fluxweek.com',\n      senderName: organizationName.value \n    }\n    await submitOrganization(organization)\n    currentView.value = 'signIn'\n    successMessage.value = '確認が完了しました。サインインしてください。'\n  } catch (error) {\n    console.error('確認エラー:', error)\n    errorMessage.value = '確認に失敗しました。コードを確認してください。'\n  } finally {\n    loading.value = false\n  }\n}\n\nconst resendConfirmationCode = async () => {\n  loading.value = true\n  errorMessage.value = ''\n  try {\n    await resendSignUpCode({ username: confirmEmail.value })\n    successMessage.value = '確認コードが再送信されました。メールをご確認ください。'\n  } catch (error) {\n    console.error('再送信エラー:', error)\n    errorMessage.value = '確認コードの再送信に失敗しました。'\n  } finally {\n    loading.value = false\n  }\n}\n\nconst handleChangePassword = async () => {\n  if (newPassword.value !== confirmNewPassword.value) {\n    errorMessage.value = 'パスワードが一致しません'\n    return\n  }\n\n  loading.value = true\n  errorMessage.value = ''\n\n  try {\n    if (sessionStorage.getItem('requiresNewPassword') === 'true') {\n      // 仮パスワードによるサインインの場合の処理\n      const username = sessionStorage.getItem('tempUsername')\n      await confirmSignIn({\n        challengeResponse: newPassword.value,\n        options: {\n          userAttributes: {\n            name: username // Add name attribute\n          }\n        }\n      })\n      await store.dispatch('auth/fetchUser')\n      await router.push('/admin')\n    } else {\n      // 通常のパスワード変更の処理\n      await store.dispatch('auth/updatePassword', {\n        oldPassword: signInPassword.value,\n        newPassword: newPassword.value\n      })\n    }\n\n    sessionStorage.removeItem('requiresNewPassword')\n    sessionStorage.removeItem('tempUsername')\n    successMessage.value = 'パスワードが正常に変更されました'\n    currentView.value = 'signIn'\n    newPassword.value = ''\n    confirmNewPassword.value = ''\n    signInPassword.value = ''\n  } catch (error) {\n    console.error('Password change error:', error)\n    errorMessage.value = error.message || 'パスワードの変更に失敗しました'\n  } finally {\n    loading.value = false\n  }\n}\n\nconst handleSignOut = async () => {\n  loading.value = true\n  try {\n    await signOut()\n    errorMessage.value = ''\n    isAlreadyAuthenticated.value = false\n    successMessage.value = 'ログアウトしました。再度サインインしてください。'\n  } catch (error) {\n    console.error('Signout error:', error)\n    errorMessage.value = 'ログアウトに失敗しました。'\n  } finally {\n    loading.value = false\n  }\n}\n\nconst handleAuthError = (error) => {\n  console.log('Auth error type:', error.name) // デバッグログ\n  console.log('Auth error message:', error.message) // デバッグログ\n\n  const errorMessages = {\n    UserAlreadyAuthenticatedException: '既にサインインしています。一度サインアウトしてから再試行してください。',\n    UserNotConfirmedException: 'ユーザーアカウントが確認されていません。確認コードを入力してください。',\n    NotAuthorizedException: 'メールアドレスまたはパスワードが正しくありません。',\n    UserNotFoundException: 'このメールアドレスに対応するアカウントが見つかりません。',\n    NewPasswordRequiredException: '初回ログインのため、パスワードの変更が必要です。',\n    PasswordResetRequiredException: 'パスワードのリセットが必要です。'\n  }\n\n  // 確認コード入力が必要な場合\n  if (error.name === 'UserNotConfirmedException') {\n    confirmEmail.value = signInEmail.value\n    currentView.value = 'confirm'\n    errorMessage.value = errorMessages[error.name]\n    return\n  }\n\n  // パスワード変更が必要な場合の処理を修正\n  if (error.name === 'NewPasswordRequiredException' || \n      error.message?.includes('NEW_PASSWORD_REQUIRED')) {\n    currentView.value = 'changePassword'\n    return\n  }\n\n  if (error.name === 'UserAlreadyAuthenticatedException') {\n    isAlreadyAuthenticated.value = true\n  }\n\n  // エラーメッセージの設定\n  errorMessage.value = errorMessages[error.name] || \n    error.message || \n    'サインインに失敗しました。入力内容を確認してください。'\n}\n\nconst toggleView = () => {\n  currentView.value = currentView.value === 'signIn' ? 'signUp' : 'signIn'\n  errorMessage.value = ''\n}\n\nconst openTermsOfService = () => {\n  window.open(termsOfServiceUrl, '_blank', 'noopener,noreferrer')\n}\n\nconst openPrivacyPolicy = () => {\n  window.open(privacyPolicyUrl, '_blank', 'noopener,noreferrer')\n}\n</script>\n\n<style>\n.resultMessage {\n  white-space: pre-line;\n}\n\n.logo-font {\n  color: inherit;\n}\n</style>","import script from \"./SignIn.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SignIn.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./SignIn.vue?vue&type=style&index=0&id=3cbf54c2&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n  <div id=\"star-container\" class=\"star-background\"></div>\n</template>\n\n<script setup>\nimport { defineProps, onMounted, onUnmounted } from 'vue'\n\nconst props = defineProps({\n  totalStars: {\n    type: Number,\n    default: 100\n  },\n  maxSize: {\n    type: Number,\n    default: 5\n  },\n  minSize: {\n    type: Number,\n    default: 2\n  },\n  starColor: {\n    type: String,\n    default: 'white'\n  },\n  batchSize: {\n    type: Number,\n    default: 50\n  },\n  baseSpeed: {\n    type: Number,\n    default: 3\n  },\n  speedVariation: {\n    type: Number,\n    default: 2\n  },\n  moveUp: {\n    type: Boolean,\n    default: false\n  },\n  moveDistance: {\n    type: Number,\n    default: 100\n  }\n})\n\nconst createStar = () => {\n  const starEl = document.createElement('span')\n  starEl.className = 'star'\n  const size = Math.random() * (props.maxSize - props.minSize) + props.minSize\n  const duration = Math.random() * props.speedVariation + props.baseSpeed\n\n  Object.assign(starEl.style, {\n    width: `${size}px`,\n    height: `${size}px`,\n    left: `${Math.random() * 100}%`,\n    top: `${Math.random() * 100}%`,\n    backgroundColor: props.starColor,\n    position: 'absolute',\n    borderRadius: '50%',\n    animation: props.moveUp \n      ? `starTwinkle ${duration}s ease-in-out infinite, moveUp ${duration}s linear infinite`\n      : `starTwinkle ${duration}s ease-in-out infinite`\n  })\n\n  return starEl\n}\n\nonMounted(() => {\n  const container = document.getElementById('star-container')\n  if (!container) return\n\n  for (let i = 0; i < props.totalStars; i++) {\n    container.appendChild(createStar())\n  }\n})\n\nonUnmounted(() => {\n  const container = document.getElementById('star-container')\n  if (container) {\n    container.innerHTML = ''\n  }\n})\n</script>\n\n<style>\n.star-background {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  overflow: hidden;\n  z-index: -999;\n}\n\n.star {\n  position: absolute;\n  border-radius: 50%;\n  opacity: 0;\n  transform: scale(0.5);\n}\n\n/* 削除: 未使用のスタイル\n.star.animate {\n  animation: twinkle 3s ease-in-out infinite;\n}\n*/\n\n@keyframes starTwinkle {\n  0% {\n    opacity: 0;\n    transform: scale(0.5);\n  }\n  50% {\n    opacity: 1;\n    transform: scale(1);\n  }\n  100% {\n    opacity: 0;\n    transform: scale(0.7);\n  }\n}\n\n@keyframes moveUp {\n  0% {\n    transform: translateY(0);\n  }\n  50% {\n    transform: translateY(-50px);\n  }\n  100% {\n    transform: translateY(-100px);\n  }\n}\n</style>","import script from \"./StarBackground.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./StarBackground.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./StarBackground.vue?vue&type=style&index=0&id=36b5b3c4&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n  <v-container class=\"content-container\">\n    <StarBackground\n      :total-stars=\"6\"\n      :max-size=\"50\"\n      :min-size=\"15\"\n      star-color=\"#CFE8FC\"\n      :base-speed=\"10\"\n      :speed-variation=\"3\"\n      :move-up=\"true\"\n      :move-distance=\"160\"\n    />\n\n    <v-alert\n      :icon=\"isMobile ? undefined : 'mdi-comment-text'\"\n      class=\"mx-auto mt-8 mb-12 border-md text-center\"\n      color=\"blue-lighten-5\"\n      max-width=\"600\"\n      min-height=\"100\"\n      variant=\"flat\"\n      :closable=\"!isMobile\"\n    >\n      <v-container \n        v-if=\"!isLoading\"\n        class=\"text-body-1 px-0\"\n      >\n        <p v-if=\"members.length === 0\">\n          最初に組織情報の登録が必要です。<br>\n          <v-btn\n            color=\"black\"\n            variant=\"outlined\"\n            :to=\"{ name: 'OrganizationManagement' }\"\n            class=\"mt-3\"\n          >\n            <v-icon class=\"mr-1\" small>\n              mdi-domain\n            </v-icon>\n            組織情報管理\n          </v-btn>\n        </p>\n        <p v-else-if=\"!organization.requestEnabled\">\n          報告依頼の自動送信がオフとなっています。<br>\n          <v-btn\n            color=\"black\"\n            variant=\"outlined\"\n            :to=\"{ name: 'ReportSetting' }\"\n            class=\"mt-3\"\n          >\n            <v-icon class=\"mr-1\" small>\n              mdi-calendar-clock\n            </v-icon>\n            週次報告設定\n          </v-btn>\n        </p>\n        <p v-else-if=\"reportStatus['pending'].count\">\n          先週分の確認待ちの報告があります。<br>\n          <v-badge \n            color=\"info\"\n            :content=\"reportStatus['pending'].count\"\n            class=\"mt-3\"\n          >\n            <v-btn \n              color=\"black\"\n              variant=\"outlined\"\n              :to=\"{ name: 'WeeklyReview', params: { weekString } }\" \n            >\n              <v-icon class=\"mr-1\" small left>\n                mdi-calendar-multiple-check\n              </v-icon>\n              週次報告レビュー\n            </v-btn>\n          </v-badge>\n        </p>\n        <p v-else>\n          各種状況を確認してください。<br>\n          <v-btn\n            color=\"black\"\n            variant=\"outlined\"\n            :to=\"{ name: 'Dashboard' }\"\n            class=\"mt-3\"\n          >\n            <v-icon class=\"mr-1\" small>\n              mdi-view-dashboard\n            </v-icon>\n            ダッシュボード\n          </v-btn>\n        </p>\n      </v-container>\n      <div v-else>\n        <v-progress-circular \n          size=\"42\"\n          width=\"8\"\n          indeterminate\n        ></v-progress-circular>\n      </div>\n    </v-alert>\n  </v-container>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { useStore } from 'vuex'\nimport { useCalendar } from '@/composables/useCalendar'\nimport { useResponsive } from '@/composables/useResponsive'\nimport { getOrganization } from '@/services/organizationService'\nimport { getReportStatus } from '@/services/reportService'\nimport { listOrganizationMembers } from '@/services/memberService'\nimport StarBackground from '@/components/StarBackground.vue'\n\nconst store = useStore()\nconst organizationId = store.getters['auth/organizationId']\nconst { getPreviousWeekString } = useCalendar()\nconst { isMobile } = useResponsive()\n\nconst isLoading = ref(true)\nconst organization = ref({})\nconst members = ref([])\nconst reportStatus = ref('')\nconst weekString = ref('')\n\nconst fetchOrganizationInfo = async () => {\n  try {\n    const [org, memberList] = await Promise.all([\n      getOrganization(organizationId),\n      listOrganizationMembers(organizationId)\n    ])\n    organization.value = org\n    members.value = memberList\n  } catch (err) {\n    console.error('Failed to fetch organization info:', err)\n  }\n}\n\nconst fetchReportStatus = async () => {\n  try {\n    weekString.value = getPreviousWeekString()\n    const status = await getReportStatus(organizationId, weekString.value)\n    reportStatus.value = {\n      ...status,\n      reportedCount: status.pending.count + status.inFeedback.count + status.confirmed.count\n    }\n  } catch (err) {\n    console.error('Failed to fetch report status:', err)\n    throw err\n  }\n}\n\nconst fetchAll = async () => {\n  isLoading.value = true\n  try {\n    await Promise.all([\n      fetchOrganizationInfo(),\n      fetchReportStatus()\n    ])\n  } catch (err) {\n    console.error('Error initializing dashboard:', err)\n  } finally {\n    isLoading.value = false\n  }\n}\n\nonMounted(fetchAll)\n</script>\n","import script from \"./Overview.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Overview.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","export function useReport() {\n\n  const initialReport = (organizationId, memberUuid, weekString) => {\n    const initialRatings = ratingItems.reduce((acc, item) => {\n      acc[item.key] = 0\n      return acc\n    }, {})\n\n    return {\n      organizationId,\n      memberUuid,\n      weekString,\n      projects: [{ name: '', workItems: [{ content: '' }] }],\n      overtimeHours: 0,\n      issues: '',\n      improvements: '',\n      rating: initialRatings\n    }\n  }\n\n  const ratingItems = [\n    {\n      key: 'stress',\n      label: 'ストレス度',\n      itemLabels: ['余裕あり', '', '', '', '極限状態'],\n      negative: true\n    },\n    {\n      key: 'disability',\n      label: 'タスク遂行の難易度',\n      itemLabels: ['易しい', '', '', '', '難しい'],\n      negative: true\n    },\n    {\n      key: 'achievement',\n      label: 'タスク目標の達成度',\n      itemLabels: ['課題あり', '', '', '', '理想以上'],\n      negative: false\n    }\n  ]\n\n  const statusOptions = [\n    { value: 'all', text: '全て', color: 'indigo' },\n    { value: 'none', text: '報告なし', color: 'error' },\n    { value: 'pending', text: '確認待ち', color: 'success' },\n    { value: 'feedback', text: 'フィードバック中', color: 'warning' },\n    { value: 'approved', text: '確認済み', color: 'primary' }\n  ]\n\n  const getStatusText = (status) => {\n    const option = statusOptions.find((e) => e.value === status)\n    return option ? option.text : ''\n  }\n\n  const getStatusColor = (status) => {\n    const option = statusOptions.find((e) => e.value === status)\n    return option ? option.color : ''\n  }\n\n  return {\n    initialReport,\n    ratingItems,\n    statusOptions,\n    getStatusText,\n    getStatusColor\n  }\n}  ","import { computed } from 'vue'\nimport { useStore } from 'vuex'\nimport { WIDGET_DEFINITIONS } from '@/store/modules/widget'\n\nexport const useWidgets = () => {\n  const store = useStore()\n\n  const visibleWidgets = computed(() =>\n    store.state.widget.widgetOrder\n      .filter(id => store.state.widget.widgetVisibility[id])\n  )\n\n  const widgetActions = {\n    isExpanded: (id) => computed(() => store.state.widget.expandStates[id]),\n    isVisible: (id) => computed(() => store.state.widget.widgetVisibility[id]),\n    toggle: (id) => store.dispatch('widget/toggleWidget', id),\n    toggleVisibility: (id) => store.dispatch('widget/toggleWidgetVisibility', id),\n    updateOrder: (newOrder) => {\n      // 表示中のウィジェットのみの並び順を更新\n      if (Array.isArray(newOrder) && newOrder.length > 0) {\n        const currentVisible = visibleWidgets.value\n        if (newOrder.length === currentVisible.length &&\n          newOrder.every(id => currentVisible.includes(id))) {\n          store.dispatch('widget/updateWidgetOrder', newOrder)\n        }\n      }\n    }\n  }\n\n  const getWidgetComponent = (widgetId) => {\n    return WIDGET_DEFINITIONS[widgetId]?.component\n  }\n\n  return {\n    ...widgetActions,\n    visibleWidgets,\n    widgetOrder: computed(() => store.state.widget.widgetOrder),\n    expandStates: computed(() => store.state.widget.expandStates),\n    WIDGET_DEFINITIONS,\n    getWidgetComponent\n  }\n}","<template>\n  <v-row\n    class=\"weekdays align-center\"\n    no-gutters\n  >\n    <v-col class=\"week-number-header\">\n      週\n    </v-col>\n    <v-col\n      v-for=\"day in weekdays\"\n      :key=\"day.label\"\n      :class=\"['weekday-header', day.class]\"\n    >\n      {{ day.label }}\n    </v-col>\n  </v-row>\n  <transition-group\n    name=\"week-transition\"\n    tag=\"div\"\n  >\n    <v-row\n      v-for=\"(week, weekIndex) in calendarWeeks\"\n      :key=\"getWeekKey(week)\" \n      no-gutters\n      class=\"week-row align-center\"\n      :class=\"{ \n        'selected': isSelected(week), \n        'hovered': isHovered(week),\n      }\"\n      :style=\"{ '--fade-delay': `${weekIndex * .05}s` }\"\n      @click=\"onSelectWeek(week)\"\n      @mouseenter=\"onHoverWeek(week)\"\n      @mouseleave=\"onLeaveWeek(week)\"\n    >\n      <v-col class=\"week-number\">\n        {{ getWeekJpText(week.weekOffset) }}\n      </v-col>\n      <v-col\n        v-for=\"(day, dayIndex) in week.days\"\n        :key=\"day.toISOString()\"\n        :class=\"[\n          'day',\n          { 'today': isToday(day) },\n          { 'saturday': isSaturday(day) },\n          { 'sunday': isSunday(day) }\n        ]\"\n      >\n        <span\n          v-if=\"shouldShowMonth(day, weekIndex, dayIndex)\"\n          class=\"month\"\n          :style=\"{ fontSize: monthFontSize }\"\n        >\n          {{ formatShortMonth(day) }}\n        </span>\n        <span class=\"date\">{{ day.getDate() }}</span>\n      </v-col>\n    </v-row>\n  </transition-group>\n</template>\n\n<script setup>\nimport { ref, toRefs, onMounted, onUnmounted, computed } from 'vue'\nimport { useCalendar } from '@/composables/useCalendar'\n\nconst props = defineProps({\n  calendarWeeks: {\n    type: Array,\n    required: true\n  },\n  onSelectWeek: {\n    type: Function,\n    default: () => {}\n  },\n  isSelected: {\n    type: Function,\n    default: () => {}\n  },\n})\n\nconst {\n  calendarWeeks,\n  onSelectWeek,\n  isSelected\n} = toRefs(props)\n\nconst { \n  shouldShowMonth,\n  formatShortMonth, \n  isToday, \n  isSaturday, \n  isSunday, \n  getStringFromWeek,\n  getWeekJpText\n} = useCalendar()\n\nconst hoveredWeek = ref(null)\n\nconst onHoverWeek = (week) => {\n  hoveredWeek.value = week\n}\n\nconst onLeaveWeek = () => {\n  hoveredWeek.value = null\n}\n\nconst isHovered = (week) => {\n  return hoveredWeek.value && week.weekOffset === hoveredWeek.value.weekOffset\n}\n\nconst weekdays = [\n  { label: '月', class: '' },\n  { label: '火', class: '' },\n  { label: '水', class: '' },\n  { label: '木', class: '' },\n  { label: '金', class: '' },\n  { label: '土', class: 'saturday' },\n  { label: '日', class: 'sunday' },\n]\n\n// getWeekKey is an alias for getStringFromWeek\nconst getWeekKey = getStringFromWeek\n\nconst containerWidth = ref(0)\nconst monthFontSize = computed(() => {\n  return containerWidth.value >= 600 ? '1em' : '0.75em'\n})\n\nconst updateContainerWidth = () => {\n  const container = document.querySelector('.week-row')\n  if (container) {\n    containerWidth.value = container.offsetWidth\n  }\n}\n\nonMounted(() => {\n  updateContainerWidth()\n  window.addEventListener('resize', updateContainerWidth)\n})\n\nonUnmounted(() => {\n  window.removeEventListener('resize', updateContainerWidth)\n})\n</script>\n\n<style scoped>\n/* 要素が追加される時（enter）と削除される時（leave） */\n.week-transition-enter-active,\n.week-transition-leave-active {\n  height: 3em;\n  transition: all 0.2s ease-out;\n  transition-delay: var(--fade-delay, 0s);\n}\n\n/* 要素が追加される直前の状態（enter-from）と、削除される直後の状態（leave-to） */\n.week-transition-enter-from,\n.week-transition-leave-to {\n  height: 0;\n  opacity: 0;\n}\n\n.week-row {\n  cursor: pointer;\n}\n\n.week-row.selected {\n  background-color: rgba(179, 215, 255, 0.6) !important;\n}\n\n.week-row.hovered {\n  background-color: rgba(179, 215, 255, 0.3);\n}\n\n.weekdays {\n  background-color: #f0f0f0;\n  font-weight: bold;\n}\n\n.weekday-header,\n.week-number-header {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 2.5em;\n}\n\n.weekday,\n.week-number,\n.day {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 3.3em;\n}\n\n.week-number-header,\n.week-number {\n  font-weight: bold;\n  background-color: #e0e0e0;\n  border-right: 1px solid #ccc;\n  font-size: 1.2em;\n  max-width: 80px;\n  min-width: 60px;\n}\n\n.week-number {\n  text-orientation: upright;\n  white-space: nowrap;\n}\n\n.week-row:hover .week-number {\n  background-color: #d0d0d0;\n}\n\n.week-row.selected .week-number {\n  background-color: #b3d7ff;\n}\n\n.weekday {\n  text-align: center;\n}\n\n.day {\n  text-align: center;\n  position: relative;\n  margin-top: 2px;\n}\n\n.day.today {\n  background-color: #f3f9ff;\n  border: 1px solid #82B1FF;\n  border-radius: 12px;\n  font-weight: 600;\n  color: #3b82c4;\n  overflow: hidden;\n}\n\n.day.saturday {\n  color: #0000ff;\n}\n\n.day.sunday {\n  color: #ff0000;\n}\n\n.date {\n  font-size: 1.2em;\n}\n\n.month {\n  position: absolute;\n  top: 2px;\n  left: 6px;\n  color: navy;\n}\n</style>","import script from \"./Calendar.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Calendar.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Calendar.vue?vue&type=style&index=0&id=0d94eb90&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0d94eb90\"]])\n\nexport default __exports__","<template>\n  <BaseWidget\n    widget-id=\"calendar\"\n    title=\"報告状況\"\n    icon=\"mdi-calendar-multiple-check\"\n  >\n    <v-row>\n      <v-col cols=\"12\" :md=\"expanded ? 9 : 12\">\n        <v-card max-width=\"560\" class=\"mx-auto calendar-card\">\n          <v-container class=\"pa-0 position-relative\">\n            <div v-for=\"(week, index) in calendarWeeks\" :key=\"index\" :class=\"{ 'd-none': index !== weekIndex }\">\n              <Calendar :calendar-weeks=\"[week]\" />\n            </div>\n            <v-btn\n              v-if=\"weekIndex > 0\"\n              class=\"calendar-nav-btn calendar-nav-btn-left\"\n              icon=\"mdi-arrow-left-thick\"\n              size=\"small\"\n              fab\n              aria-label=\"前の週へ\"\n              @click=\"handleWeekChange(-1)\"\n            ></v-btn>\n            <v-btn\n              v-if=\"weekIndex < calendarWeeks.length - 1\"\n              class=\"calendar-nav-btn calendar-nav-btn-right\"\n              icon=\"mdi-arrow-right-thick\"\n              size=\"small\"\n              fab\n              aria-label=\"次の週へ\"\n              @click=\"handleWeekChange(1)\"\n            ></v-btn>\n          </v-container>\n        </v-card>\n        <v-badge \n          class=\"mt-6\"\n          :color=\"statusCounts['pending'] ? 'info' : 'transparent'\"\n          :content=\"statusCounts['pending'] || ''\"\n        >\n          <v-btn \n            color=\"black\" variant=\"outlined\"\n            :to=\"{ name: 'WeeklyReview', params: { weekString } }\"\n            aria-label=\"週次報告レビューへ移動\"\n          >\n            <v-icon class=\"mr-1\" small left aria-hidden=\"true\">\n              mdi-calendar-multiple-check\n            </v-icon>\n            週次報告レビュー\n          </v-btn>\n        </v-badge>\n      </v-col>\n      <v-col \n        cols=\"12\" \n        :md=\"expanded ? 3 : 12\" \n        :class=\"[\n          'd-flex',\n          expanded ? 'flex-sm-column' : 'flex-wrap',\n          'align-start',\n          'pt-2'\n        ]\"\n      >\n        <span \n          v-for=\"status in filteredStatusOptions\" \n          :key=\"status.value\"\n          :class=\"{ 'status-chip-wrapper': !expanded }\"\n        >\n          <v-chip\n            v-if=\"statusCounts[status.value] > 0\"\n            v-tooltip:end=\"getTooltipText(statusMembers[status.value])\"\n            class=\"ma-1\"\n            :value=\"status.value\"\n            :color=\"status.color\"\n            label\n          >\n            {{ status.text }}: {{ statusCounts[status.value] }}\n          </v-chip>\n        </span>\n      </v-col>\n    </v-row>\n  </BaseWidget>\n</template>\n\n<script setup>\nimport { useWidgets } from '@/composables/useWidgets'\nimport Calendar from '../Calendar.vue'\nimport BaseWidget from './BaseWidget.vue'\n\nconst props = defineProps({\n  calendarWeeks: { type: Array, required: true },\n  weekIndex: { type: Number, required: true },\n  statusCounts: { type: Object, required: true },\n  statusMembers: { type: Object, required: true },\n  filteredStatusOptions: { type: Array, required: true },\n  weekString: { type: String, required: true }\n})\n\nconst emit = defineEmits(['update:weekIndex'])\nconst { isExpanded } = useWidgets()\nconst expanded = isExpanded('calendar')\n\nconst handleWeekChange = (delta) => {\n  const newIndex = delta > 0\n    ? Math.min(props.calendarWeeks.length - 1, props.weekIndex + 1)\n    : Math.max(0, props.weekIndex - 1)\n  emit('update:weekIndex', newIndex)\n}\n\nconst getTooltipText = (members) => {\n  if (!members) return ''\n  return members.map(member => member.name || member.displayName || '').filter(Boolean).join(', ')\n}\n</script>\n\n<style scoped>\n.calendar-small :deep(.v-date-picker-month) {\n  height: 240px;\n}\n\n.calendar-small :deep(.v-date-picker-month__day) {\n  width: 28px;\n  height: 28px;\n  font-size: 0.9rem;\n}\n\n.calendar-small :deep(.v-date-picker-controls) {\n  display: none;\n}\n\n.calendar-card {\n  overflow: visible !important;\n  max-width: v-bind(expanded ? '560px': '100%');\n  margin: 0 auto;\n}\n\n.position-relative {\n  position: relative;\n}\n\n.calendar-nav-btn {\n  opacity: 0.6;\n  position: absolute;\n  bottom: 6px;\n}\n\n.calendar-nav-btn-left {\n  left: -30px;\n}\n\n.calendar-nav-btn-right {\n  right: -30px;\n}\n\n.widget :deep(.v-card-title) {\n  user-select: none;\n}\n\n.status-chip-wrapper {\n  display: inline-block;\n}\n</style>","import script from \"./CalendarWidget.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CalendarWidget.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./CalendarWidget.vue?vue&type=style&index=0&id=768aba2c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-768aba2c\"]])\n\nexport default __exports__","<template>\n  <BaseWidget\n    widget-id=\"organization\"\n    title=\"組織情報\"\n    icon=\"mdi-domain\"\n  >\n    <v-container class=\"pa-0 d-flex flex-column\" style=\"height: 100%\">\n      <div class=\"flex-grow-1\">\n        <p class=\"text-body-1 mb-2\">\n          {{ organization?.name }}\n        </p>\n        <p class=\"text-body-2 mb-1\">\n          メンバー: {{ memberCount }} 人\n        </p>\n      </div>\n      <div>\n        <v-btn\n          color=\"black\" variant=\"outlined\"\n          :to=\"{ name: 'OrganizationManagement' }\"\n          aria-label=\"組織情報管理ページへ移動\"\n        >\n          <v-icon class=\"mr-1\" small aria-hidden=\"true\">\n            mdi-domain\n          </v-icon>\n          組織情報管理\n        </v-btn>\n      </div>\n    </v-container>\n  </BaseWidget>\n</template>\n\n<script setup>\nimport { computed } from 'vue'\nimport BaseWidget from './BaseWidget.vue'\n\nconst props = defineProps({\n  organization: {\n    type: Object,\n    required: true\n  },\n  members: {\n    type: Array,\n    required: true\n  }\n})\n\nconst memberCount = computed(() => props.members.length)\n</script>","import script from \"./OrganizationWidget.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./OrganizationWidget.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import script from \"./ReportRequestWidget.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ReportRequestWidget.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n  <BaseWidget\n    widget-id=\"weeklyReport\"\n    title=\"メンバーの週次報告\"\n    icon=\"mdi-calendar-account\"\n  >\n    <v-container class=\"pa-0 d-flex flex-column\" style=\"height: 100%\">\n      <div class=\"flex-grow-1\">\n        <v-select\n          v-model=\"selectedMember\"\n          :items=\"members\"\n          item-title=\"name\"\n          item-value=\"memberUuid\"\n          label=\"メンバー選択\"\n          density=\"comfortable\"\n          variant=\"outlined\"\n          hide-details\n          prepend-inner-icon=\"mdi-account\"\n        ></v-select>\n      </div>\n      <div>\n        <v-btn\n          color=\"black\"\n          variant=\"outlined\"\n          :disabled=\"!selectedMember\"\n          x-small\n          aria-label=\"選択したメンバーの週次報告ページを新しいタブで開く\"\n          @click=\"navigateToReport\"\n        >\n          週次報告（代理入力）\n          <v-icon icon=\"mdi-open-in-new\" end small aria-hidden=\"true\" />\n        </v-btn>\n      </div>\n    </v-container>\n  </BaseWidget>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport { rootUrl } from '@/config/environment'\nimport BaseWidget from './BaseWidget.vue'\n\nconst props = defineProps({\n  members: {\n    type: Array,\n    required: true\n  },\n  weekString: {\n    type: String,\n    required: true\n  },\n  organizationId: {\n    type: String,\n    required: true\n  }\n})\n\nconst selectedMember = ref(null)\n\nconst navigateToReport = () => {\n  if (!selectedMember.value) return\n  \n  const baseUrl = `${rootUrl}/reports/${props.organizationId}/${selectedMember.value}`\n  const url = props.weekString ? `${baseUrl}/${props.weekString}` : baseUrl\n  \n  window.open(url, '_blank', 'noopener,noreferrer')\n}\n</script>","import script from \"./WeeklyReportWidget.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WeeklyReportWidget.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n  <v-container>\n    <v-row dense class=\"pb-2\">\n      <v-col cols=\"6\">\n        <h3>\n          <v-icon \n            size=\"large\" \n            class=\"mr-1\"\n            aria-hidden=\"true\"\n          >\n            mdi-view-dashboard\n          </v-icon>\n          ダッシュボード\n        </h3>\n      </v-col>\n      <v-col cols=\"6\" class=\"d-flex justify-end align-center pe-3\">\n        <v-menu \n          v-model=\"isMenuOpen\"\n          :close-on-content-click=\"false\"\n        >\n          <template #activator=\"{ props }\">\n            <v-btn\n              v-tooltip=\"'ウィジェットの表示設定'\"\n              v-bind=\"props\"\n              icon=\"mdi-cog\"\n              aria-label=\"ウィジェット設定\"\n              class=\"opacity-80 mr-2\"\n              density=\"comfortable\"\n            ></v-btn>\n          </template>\n          <v-list class=\"rounded-lg\">\n            <v-list-subheader>表示するウィジェット</v-list-subheader>\n            <v-list-item \n              v-for=\"(def, id) in WIDGET_DEFINITIONS\" \n              :key=\"id\" \n              class=\"px-5\"\n              @click.stop=\"handleVisibilityChange(id)\"\n            >\n              <v-list-item-title class=\"text-body-2\">{{ def.title }}</v-list-item-title>\n              <template #append>\n                <v-switch\n                  :model-value=\"store.state.widget.widgetVisibility[id]\"\n                  hide-details\n                  inset\n                  density=\"compact\"\n                  color=\"primary\"\n                ></v-switch>\n              </template>\n            </v-list-item>\n            <v-divider class=\"my-2\"></v-divider>\n            <v-list-subheader\n              v-tooltip=\"{\n                text: 'タイトル部分をドラッグして位置を変更できます。',\n                location: 'top'\n              }\"\n            >\n              並び替えするには\n              <v-icon\n                class=\"ml-1\"\n                icon=\"mdi-help-circle-outline\"\n              ></v-icon>\n            </v-list-subheader>\n            <v-list-subheader\n              v-tooltip=\"{\n                text: 'タイトル部分のダブルクリックで表示サイズを切り替えできます。',\n                location: 'top'\n              }\"\n            >\n              サイズ変更するには\n              <v-icon\n                class=\"ml-1\"\n                icon=\"mdi-help-circle-outline\"\n              ></v-icon>\n            </v-list-subheader>\n          </v-list>\n        </v-menu>\n        <v-btn\n          v-tooltip=\"'データを最新の状態に更新'\"\n          icon=\"mdi-reload\"\n          aria-label=\"データを更新\"\n          class=\"opacity-80\"\n          density=\"comfortable\"\n          @click=\"handleReload\"\n        ></v-btn>\n      </v-col>\n    </v-row>\n\n    <v-row v-if=\"!isLoading\" dense>\n      <v-container fluid class=\"widgets-container pa-0\">\n        <VueDraggable\n          v-model=\"currentWidgets\"\n          :component-data=\"{\n            tag: 'div',\n            type: 'transition-group',\n            name: !isLoading ? 'flip-list' : null\n          }\"\n          class=\"widgets-grid\"\n          item-key=\"id\"\n          handle=\".widget-title\"\n          :animation=\"200\"\n          ghost-class=\"widget-ghost\"\n          :disabled=\"isLoading\"\n          :delay=\"isMobile ? 300 : 0\"\n          :touch-action=\"'pan-y'\"\n          :force-fallback=\"isMobile\"\n        >\n          <template #item=\"{ element }\">\n            <div \n              :class=\"[\n                'widget-item', \n                { 'expanded': isMobile || expandStates[element.id] }\n              ]\"\n            >\n              <component :is=\"element.component\" v-bind=\"element.props\" />\n            </div>\n          </template>\n        </VueDraggable>\n      </v-container>\n    </v-row>\n  </v-container>\n</template>\n\n<script setup>\nimport { ref, computed, watch, onMounted, defineAsyncComponent, nextTick } from 'vue'\nimport { markRaw } from 'vue'\nimport VueDraggable from 'vuedraggable'\nimport { useStore } from 'vuex'\nimport { useCalendar } from '@/composables/useCalendar'\nimport { useReport } from '@/composables/useReport'\nimport { useWidgets } from '@/composables/useWidgets'\nimport { useResponsive } from '@/composables/useResponsive'\nimport { getOrganization } from '@/services/organizationService'\nimport { getReportStatus, getStatsData } from '@/services/reportService'\nimport { listOrganizationMembers } from '@/services/memberService'\nimport CalendarWidget from '@/components/widget/CalendarWidget.vue'\nimport OrganizationWidget from '@/components/widget/OrganizationWidget.vue'\nimport ReportRequestWidget from '@/components/widget/ReportRequestWidget.vue'\nimport WeeklyReportWidget from '@/components/widget/WeeklyReportWidget.vue'\n\nconst components = {\n  CalendarWidget: markRaw(CalendarWidget),\n  OrganizationWidget: markRaw(OrganizationWidget),\n  ReportRequestWidget: markRaw(ReportRequestWidget),\n  WeeklyReportWidget: markRaw(WeeklyReportWidget),\n  OvertimeChart: defineAsyncComponent(() => \n    import('@/components/chart/OvertimeChart.vue').then(m => markRaw(m.default))\n  ),\n  StressChart: defineAsyncComponent(() => \n    import('@/components/chart/StressChart.vue').then(m => markRaw(m.default))\n  ),\n  DisabilityChart: defineAsyncComponent(() => \n    import('@/components/chart/DisabilityChart.vue').then(m => markRaw(m.default))\n  ),\n  AchievementChart: defineAsyncComponent(() => \n    import('@/components/chart/AchievementChart.vue').then(m => markRaw(m.default))\n  ),\n  TodoListWidget: defineAsyncComponent(() => \n    import('@/components/widget/TodoListWidget.vue').then(m => markRaw(m.default))\n  )\n}\n\nconst store = useStore()\nconst { createWeeks, getStringFromWeek, formatFullDateTimeJp } = useCalendar()\nconst { statusOptions } = useReport()\nconst { isMobile } = useResponsive()\n\nconst dayOfWeekToNumber = {\n  sunday: 0,\n  monday: 1,\n  tuesday: 2,\n  wednesday: 3,\n  thursday: 4,\n  friday: 5,\n  saturday: 6\n}\n\nconst organizationId = store.getters['auth/organizationId']\nconst calendarWeeks = createWeeks(6)\nconst weekIndex = ref(null)\n\nconst organization = ref(null)\nconst members = ref([])\nconst isLoading = ref(true)\nconst error = ref(null)\nconst isOvertimeDataReady = ref(false)\nconst isStressDataReady = ref(false)\nconst isDisabilityDataReady = ref(false)\nconst isAchievementDataReady = ref(false)\nconst nextRequestDateTimeString = ref('')\nconst overtimeData = ref({ labels: [], datasets: [] })\nconst stressData = ref({ labels: [], datasets: [] })\nconst disabilityData = ref({ labels: [], datasets: [] })\nconst achievementData = ref({ labels: [], datasets: [] })\n\nconst weekString = computed(() => \n  weekIndex.value !== null ? getStringFromWeek(calendarWeeks[weekIndex.value]) : null\n)\nconst filteredStatusOptions = computed(() => \n  statusOptions.filter(option => option.value !== 'all')\n)\n\nconst reportStatus = ref({\n  none: { count: 0, members: [] },\n  pending: { count: 0, members: [] },\n  inFeedback: { count: 0, members: [] },\n  confirmed: { count: 0, members: [] },\n  reportedCount: 0\n})\n\nconst statusCounts = computed(() => ({\n  none: reportStatus.value.none.count,\n  pending: reportStatus.value.pending.count,\n  feedback: reportStatus.value.inFeedback.count,\n  approved: reportStatus.value.confirmed.count,\n}))\n\nconst statusMembers = computed(() => ({\n  none: reportStatus.value.none.members,\n  pending: reportStatus.value.pending.members,\n  feedback: reportStatus.value.inFeedback.members,\n  approved: reportStatus.value.confirmed.members,\n}))\n\nconst nextRequestDateTime = computed(() => {\n  if (!organization.value?.requestEnabled) {\n    return null\n  }\n\n  const { requestDayOfWeek, requestTime } = organization.value\n  const dayOfWeek = dayOfWeekToNumber[requestDayOfWeek.toLowerCase()]\n  const [hours, minutes] = requestTime.split(':').map(Number)\n\n  if (dayOfWeek === undefined || isNaN(hours) || isNaN(minutes)) {\n    console.error('Invalid organization data:', { requestDayOfWeek, requestTime })\n    return null\n  }\n\n  const now = new Date()\n  let nextDate = new Date(now.getFullYear(), now.getMonth(), now.getDate(), hours, minutes, 0, 0)\n\n  if (nextDate.getDay() === dayOfWeek && nextDate > now) {\n    return nextDate\n  }\n\n  const daysUntilNext = (dayOfWeek - now.getDay() + 7) % 7\n  nextDate.setDate(nextDate.getDate() + (daysUntilNext === 0 ? 7 : daysUntilNext))\n  \n  return nextDate\n})\n\nconst updateNextRequestDateTimeString = async () => {\n  if (nextRequestDateTime.value) {\n    nextRequestDateTimeString.value = formatFullDateTimeJp(nextRequestDateTime.value)\n  } else {\n    nextRequestDateTimeString.value = ''\n  }\n}\n\nconst fetchReportStatus = async () => {\n  try {\n    const status = await getReportStatus(organizationId, weekString.value)\n    reportStatus.value = {\n      ...status,\n      reportedCount: status.pending.count + status.inFeedback.count + status.confirmed.count\n    }\n  } catch (err) {\n    console.error('Failed to fetch report status:', err)\n    error.value = '報告状況の取得に失敗しました: ' + err.message\n    throw err\n  }\n}\n\nconst formatChartData = (data, dataKey) => ({\n  labels: data.labels,\n  datasets: data.datasets.map((dataset, index) => ({\n    label: dataset.label,\n    data: dataset.data.map(item => item[dataKey]),\n    borderColor: getColor(index),\n    fill: false,\n  })),\n})\n\nconst getColor = (index) => {\n  const colorPalette = [\n    'rgb(96, 96, 255)', // 青\n    'rgb(255, 159, 64)', // オレンジ\n    'rgb(75, 192, 192)', // ターコイズ\n    'rgb(153, 102, 255)', // 紫\n    'rgb(255, 99, 132)', // ピンク\n    'rgb(144, 238, 144)', // ライトグリーン\n    'rgb(135, 206, 235)', // 水色\n    'rgb(179, 183, 255)', // ライトラベンダー\n    'rgb(255, 206, 86)', // 黄色\n    'rgb(64, 224, 208)' // ターコイズブルー\n  ]\n  return index < colorPalette.length ? colorPalette[index] : getRandomColor()\n}\n\nconst getRandomColor = () => {\n  const r = Math.floor(Math.random() * 255)\n  const g = Math.floor(Math.random() * 255)\n  const b = Math.floor(Math.random() * 255)\n  return `rgb(${r}, ${g}, ${b})`\n}\n\nconst fetchInitial = async () => {\n  isLoading.value = true\n  error.value = null\n  try {\n    const [orgInfo, memberList, reportStatus] = await Promise.all([\n      getOrganization(organizationId),\n      listOrganizationMembers(organizationId),\n      getReportStatus(organizationId, weekString.value)\n    ])\n    \n    organization.value = orgInfo\n    members.value = memberList\n    reportStatus.value = {\n      ...reportStatus,\n      reportedCount: reportStatus.pending.count + reportStatus.inFeedback.count + reportStatus.confirmed.count\n    }\n  } catch (err) {\n    console.error('Error initializing dashboard:', err)\n    error.value = 'ダッシュボードの初期化に失敗しました: ' + err.message\n  } finally {\n    isLoading.value = false\n  }\n}\n\nconst fetchSecondary = async () => {\n  try {\n    const statsData = await getStatsData(organizationId)\n    overtimeData.value = formatChartData(statsData, 'overtimeHours')\n    stressData.value = formatChartData(statsData, 'stress')\n    disabilityData.value = formatChartData(statsData, 'disability')\n    achievementData.value = formatChartData(statsData, 'achievement')\n    isOvertimeDataReady.value = true\n    isStressDataReady.value = true\n    isDisabilityDataReady.value = true\n    isAchievementDataReady.value = true\n  } catch (err) {\n    console.error('Error fetching secondary data:', err)\n    error.value = '追加データの取得に失敗しました: ' + err.message\n  }\n}\n\nconst handleReload = () => {\n  fetchInitial()\n  fetchReportStatus()\n  nextTick(() => {\n    fetchSecondary()\n  })\n}\n\n// Watchers\nwatch(weekIndex, fetchReportStatus)\nwatch(nextRequestDateTime, updateNextRequestDateTimeString, { immediate: true })\n\n// Lifecycle hooks\nonMounted(() => {\n  weekIndex.value = calendarWeeks.length - 2// 先週\n  fetchInitial()\n  nextTick(() => {\n    fetchSecondary()\n  })\n})\n\n// ウィジェット関連の設定をより宣言的に\nconst { \n  WIDGET_DEFINITIONS,\n  getWidgetComponent,\n  visibleWidgets,\n  expandStates,\n  updateOrder\n} = useWidgets()\n\nconst getWidgetProps = (id) => {\n  const propConfigs = {\n    calendar: () => ({\n      calendarWeeks,\n      weekIndex: weekIndex.value,\n      'onUpdate:weekIndex': (v) => weekIndex.value = v,\n      statusCounts: statusCounts.value,\n      statusMembers: statusMembers.value,\n      filteredStatusOptions: filteredStatusOptions.value,\n      weekString: weekString.value\n    }),\n    overtime: () => createChartProps('overtime', overtimeData.value, isOvertimeDataReady.value),\n    stress: () => createChartProps('stress', stressData.value, isStressDataReady.value),\n    disability: () => createChartProps('disability', disabilityData.value, isDisabilityDataReady.value),\n    achievement: () => createChartProps('achievement', achievementData.value, isAchievementDataReady.value),\n    organization: () => ({ \n      organization: organization.value,\n      members: members.value\n    }),\n    reportRequest: () => ({\n      organization: organization.value,\n      nextRequestDateTime: nextRequestDateTime.value,\n      nextRequestDateTimeString: nextRequestDateTimeString.value\n    }),\n    todo: () => ({}),\n    weeklyReport: () => ({\n      members: members.value,\n      weekString: weekString.value,\n      organizationId\n    })\n  }\n\n  return (propConfigs[id] || (() => ({})))()\n}\n\nconst createChartProps = (widgetId, chartData, isDataReady) => ({\n  widgetId,\n  title: WIDGET_DEFINITIONS[widgetId].title,\n  chartData,\n  isDataReady\n})\n\nconst currentWidgets = computed({\n  get: () => {\n    return visibleWidgets.value.map(id => ({\n      id,\n      component: components[getWidgetComponent(id)],\n      props: getWidgetProps(id)\n    }))\n  },\n  set: (newList) => {\n    if (newList?.length) {\n      updateOrder(newList.map(item => item.id))\n    }\n  }\n})\n\nonMounted(() => {\n  weekIndex.value = calendarWeeks.length - 2 // 先週\n  fetchInitial()\n  nextTick(() => {\n    fetchSecondary()\n  })\n})\n\nconst isMenuOpen = ref(false)\n\nconst handleVisibilityChange = (id) => {\n  store.dispatch('widget/toggleWidgetVisibility', id)\n}\n</script>\n\n<style scoped>\n.widgets-container :deep(.v-col) {\n  transition: all 0.3s ease;\n}\n\n.widget-ghost {\n  opacity: 0.5;\n}\n\n.widgets-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 12px;\n  padding: 6px;\n  touch-action: pan-y pinch-zoom;\n}\n\n.widget-item {\n  grid-column: auto / span 1;\n  transition: all 0.3s ease;\n}\n\n.widget-item.expanded {\n  grid-column: 1 / -1;\n}\n\n.widget-title {\n  cursor: default;\n}\n\n.widget-item :deep(.v-card) {\n  transition: box-shadow 0.3s ease;\n}\n\n/* 常に並び換え可能な状態を示すスタイル */\n:deep(.widget-title) {\n  cursor: move;\n  touch-action: none;\n  -webkit-user-select: none;\n  user-select: none;\n}\n\n.widget-item:hover :deep(.v-card) {\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n}\n</style>","import script from \"./Dashboard.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Dashboard.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Dashboard.vue?vue&type=style&index=0&id=73d52258&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-73d52258\"]])\n\nexport default __exports__","<template>\n  <v-container class=\"week-selector\">\n    <v-row dense class=\"pb-3\">\n      <v-col>\n        <h3>\n          <v-icon\n            :icon=\"icon\"\n            size=\"large\"\n            class=\"mr-1\"\n          />\n          {{ functionName }}［{{ selectedWeekRange }}］\n        </h3>\n      </v-col>\n    </v-row>\n    <v-card \n      class=\"d-print-none\"\n      :class=\"{ 'hover-effect': isHovering, 'leave-effect': !isHovering, 'show-all-weeks': showAllWeeks }\"\n      @mouseenter=\"handleMouseEnter\"\n      @mouseleave=\"handleMouseLeave\"\n    >\n      <v-card-text class=\"pa-0\">\n        <Calendar\n          :calendar-weeks=\"visibleWeeks\"\n          :on-select-week=\"handleSelectWeek\"\n          :is-selected=\"isSelected\"\n        />\n      </v-card-text>\n    </v-card>\n  </v-container>\n</template>\n\n<script setup>\nimport { computed, ref, watch } from 'vue'\nimport { useCalendar } from '@/composables/useCalendar'\nimport Calendar from './Calendar.vue'\n\nconst props = defineProps({\n  functionName: {\n    type: String,\n    required: true\n  },\n  selectedWeek: {\n    type: Object,\n    default: () => null\n  },\n  icon: {\n    type: String,\n    default: 'mdi-bird'\n  }\n})\n\nconst emit = defineEmits(['select-week', 'reset'])\n\nconst { calendarWeeks, getWeekJpText } = useCalendar()\n\nconst internalSelectedWeek = ref(props.selectedWeek)\nconst isHovering = ref(false)\nconst showAllWeeks = ref(false)\n\nconst visibleWeeks = computed(() => {\n  if (!internalSelectedWeek.value || showAllWeeks.value) return calendarWeeks.value\n  return calendarWeeks.value.filter(week => {\n    return internalSelectedWeek.value.weekOffset == week.weekOffset \n  })\n})\n\nconst handleSelectWeek = (week) => {\n  if (internalSelectedWeek.value && !showAllWeeks.value) {\n    showAllWeeks.value = true\n    emit('reset')\n  } else {\n    internalSelectedWeek.value = week\n    setTimeout(() => {\n      showAllWeeks.value = false\n      emit('select-week', internalSelectedWeek.value)\n    }, 500)\n  }\n}\n\nconst isSelected = (week) => {\n  return internalSelectedWeek.value && week.weekOffset === internalSelectedWeek.value.weekOffset\n}\n\nconst selectedWeekRange = computed(() => {\n  return internalSelectedWeek.value ? getWeekJpText(internalSelectedWeek.value.weekOffset) : '週の選択'\n})\n\nconst handleMouseEnter = () => {\n  isHovering.value = true\n}\n\nconst handleMouseLeave = () => {\n  isHovering.value = false\n}\n\nwatch(() => props.selectedWeek, (newValue) => {\n  internalSelectedWeek.value = newValue\n  showAllWeeks.value = false\n})\n</script>\n\n<style scoped>\n.week-selector {\n  padding: 0;\n}\n\n.hover-effect {\n  transition: all 0.3s ease;\n  transform: scale(1.02);\n}\n\n.leave-effect {\n  transition: all 0.3s ease;\n  transform: scale(1);\n}\n\n.show-all-weeks {\n  transition: all 0.3s ease;\n  transform: scale(1.01);\n}\n</style>","import script from \"./WeekSelector.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WeekSelector.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WeekSelector.vue?vue&type=style&index=0&id=4c14e31a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4c14e31a\"]])\n\nexport default __exports__","<template>\n  <v-combobox\n    :model-value=\"modelValue\"\n    :items=\"filteredProjectNames\"\n    class=\"project-combobox\"\n    label=\"プロジェクト\"\n    required\n    dense\n    hide-details=\"auto\"\n    @update:model-value=\"updateValue\"\n    @keydown=\"handleKeyDown\"\n  >\n    <template #prepend>\n      <v-icon class=\"d-none d-md-flex\">\n        mdi-folder-outline\n      </v-icon>\n    </template>\n    <template #item=\"{ props: itemProps, item }\">\n      <v-list-item v-bind=\"itemProps\" class=\"project-list-item\">\n        <template #append>\n          <v-btn\n            v-if=\"projectNames.includes(item.title)\"\n            v-tooltip=\"'選択リストより削除'\"\n            icon=\"mdi-close\"\n            size=\"small\"\n            flat\n            tabindex=\"-1\"\n            @click.stop=\"removeProjectOption(item.title)\"\n          ></v-btn>\n          <v-btn\n            v-else\n            v-tooltip=\"'選択リストに追加'\"\n            icon=\"mdi-plus\"\n            size=\"small\"\n            color=\"primary\"\n            flat\n            @click.stop=\"addProjectOption(item.title)\"\n          >\n          </v-btn>\n        </template>\n      </v-list-item>\n    </template>\n  </v-combobox>\n</template>\n\n<script setup>\nimport { ref, computed, inject } from 'vue'\nimport { updateMemberProjects } from '@/services/publicService'\n\nconst props = defineProps({\n  modelValue: {\n    type: String,\n    default: ''\n  },\n  projectNames: {\n    type: Array,\n    required: true\n  },\n  memberUuid: {\n    type: String,\n    required: true\n  }\n})\n\nconst showConfirmDialog = inject('showConfirmDialog')\nconst showNotification = inject('showNotification')\nconst emit = defineEmits(['update:modelValue', 'projectListChanged'])\n\nconst internalProjectNames = ref(props.projectNames)\n\nconst filteredProjectNames = computed(() => {\n  const inputValue = props.modelValue ?? ''\n  const lowerInput = inputValue.toLowerCase().trim()\n  const existingProjects = new Set(internalProjectNames.value.map(name => name.toLowerCase()))\n  \n  const filtered = Array.from(existingProjects)\n    .filter(name => name.includes(lowerInput))\n  \n  if (lowerInput && !existingProjects.has(lowerInput)) {\n    filtered.push(inputValue)\n  }\n  \n  return filtered\n})\n\nconst updateValue = (newValue) => {\n  emit('update:modelValue', newValue ?? '')\n}\n\nconst addProjectOption = async (project) => {\n  if (project && !internalProjectNames.value.includes(project)) {\n    const newProjectList = [...internalProjectNames.value, project]\n    try {\n      await updateMemberProjects(props.memberUuid, newProjectList)\n      showNotification('プロジェクトリストに登録しました。')\n      internalProjectNames.value = newProjectList\n      emit('projectListChanged', newProjectList)\n    } catch (error) {\n      console.error('Failed to add project:', error)\n    }\n  }\n}\n\nconst removeProjectOption = async (project) => {\n  const confirmed = await showConfirmDialog('確認', 'プロジェクトリストから削除します。\\nよろしいですか？')\n  if (!confirmed) {\n    return\n  }\n  const newProjectList = internalProjectNames.value.filter(p => p !== project)\n  try {\n    await updateMemberProjects(props.memberUuid, newProjectList)\n    internalProjectNames.value = newProjectList\n    emit('projectListChanged', newProjectList)\n    if (props.modelValue === project) {\n      emit('update:modelValue', '')\n    }\n  } catch (error) {\n    console.error('Failed to remove project:', error)\n  }\n}\n\nconst handleKeyDown = async (event) => {\n  if (event.key === 'Enter' && !event.isComposing) {\n    event.preventDefault()\n    const inputValue = (props.modelValue ?? '').trim()\n    if (inputValue) {\n      if (!internalProjectNames.value.includes(inputValue)) {\n        await addProjectOption(inputValue)\n      } else {\n        // プロジェクトが既に登録済みの場合、次の適切な入力項目にフォーカスを移動\n        moveFocusToNextInput(event.target)\n      }\n    }\n  }\n}\n\nconst moveFocusToNextInput = (currentElement) => {\n  const form = currentElement.closest('form')\n  if (!form) return\n\n  const focusableElements = Array.from(form.querySelectorAll(\n    'input:not([disabled]):not([readonly]), select:not([disabled]):not([readonly]), textarea:not([disabled]):not([readonly])'\n  )).filter(el => !el.classList.contains('v-select__selections') && !el.parentElement.classList.contains('v-list-item'))\n\n  const currentIndex = focusableElements.indexOf(currentElement)\n  if (currentIndex > -1 && currentIndex < focusableElements.length - 1) {\n    focusableElements[currentIndex + 1].focus()\n  }\n}\n</script>\n\n<style scoped>\n.project-list-item:hover {\n  background-color: rgba(179, 215, 255, 0.6) !important;\n}\n</style>","import script from \"./ProjectSelector.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ProjectSelector.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ProjectSelector.vue?vue&type=style&index=0&id=6f1f71da&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6f1f71da\"]])\n\nexport default __exports__","import { computed, ref } from 'vue'\n\nconst RATING_CONSTANTS = {\n  NEUTRAL_ICON: 'mdi-emoticon-neutral',\n  NEGATIVE_ICON: 'mdi-emoticon-dead',\n  POSITIVE_ICON: 'mdi-emoticon',\n  NO_CHANGE_ICON: 'mdi-minus',\n  INCREASE_ICON: 'mdi-arrow-top-right',\n  DECREASE_ICON: 'mdi-arrow-bottom-right',\n  COMPARISON_COLOR: 'blue-grey-lighten-2',\n  NO_COMPARISON_LABEL: '比較データなし',\n  IMPROVEMENT_LABEL: '前回より好転',\n  DECLINE_LABEL: '前回より悪化',\n  NO_CHANGE_LABEL: '前回と変化なし',\n  NEGATIVE_COLOR: '#1976D2',\n  POSITIVE_COLOR: '#E91E63'\n}\n\nexport function useRatingLogic(props) {\n  const { modelValue, itemLabels, comparison, negative } = props\n  const length = computed(() => itemLabels.length)\n  const half = computed(() => (length.value + 1) / 2)\n\n  const fullIcon = ref(RATING_CONSTANTS.NEUTRAL_ICON)\n  const activeIconColor = ref(props.negative ? RATING_CONSTANTS.NEUTRAL_COLOR_NEGATIVE : RATING_CONSTANTS.NEUTRAL_COLOR_POSITIVE)\n\n  const calcFullIcon = (value) => {\n    if (value === 0 || value === half.value) {\n      return RATING_CONSTANTS.NEUTRAL_ICON\n    } else if (negative ^ (value < half.value)) {\n      return RATING_CONSTANTS.NEGATIVE_ICON\n    } else {\n      return RATING_CONSTANTS.POSITIVE_ICON\n    }\n  }\n\n  const calcActiveIconColor = (value) => {\n    const positiveColor = RATING_CONSTANTS.POSITIVE_COLOR\n    const negativeColor = RATING_CONSTANTS.NEGATIVE_COLOR\n\n    // 0から1の範囲で位置を計算\n    const position = (value - 1) / (length.value - 1)\n\n    // 中央値からの距離を計算（0-0.5の範囲）\n    const distanceFromCenter = Math.abs(position - 0.5)\n    // 中央に近いほど透明に（0.4-0.9の範囲）\n    const alpha = 0.4 + distanceFromCenter * 1.0\n\n    // negativeフラグに応じて色の方向を反転\n    let startColor, endColor\n    if (negative) {\n      startColor = positiveColor\n      endColor = negativeColor\n    } else {\n      startColor = negativeColor\n      endColor = positiveColor\n    }\n\n    return interpolateColor(startColor, endColor, position, alpha)\n  }\n\n  const interpolateColor = (color1, color2, factor, fixedAlpha = null) => {\n    const hsl1 = rgbToHsl(parseColor(color1))\n    const hsl2 = rgbToHsl(parseColor(color2))\n\n    const h = hsl1.h + (hsl2.h - hsl1.h) * factor\n    const s = Math.max(hsl1.s, hsl2.s) * 0.9\n    // 明度を少し上げて見やすく\n    const l = 0.55\n\n    // 固定の透明度を使用\n    return hslToRgbaString(h, s, l, fixedAlpha || 0.9)\n  }\n\n  const parseColor = (color) => {\n    const hex = color.replace('#', '')\n    return {\n      r: parseInt(hex.substring(0, 2), 16),\n      g: parseInt(hex.substring(2, 4), 16),\n      b: parseInt(hex.substring(4, 6), 16)\n    }\n  }\n\n  const rgbToHsl = (rgb) => {\n    const r = rgb.r / 255\n    const g = rgb.g / 255\n    const b = rgb.b / 255\n    const max = Math.max(r, g, b)\n    const min = Math.min(r, g, b)\n    let h, s\n    const l = (max + min) / 2\n\n    if (max === min) {\n      h = s = 0\n    } else {\n      const d = max - min\n      s = l > 0.5 ? d / (2 - max - min) : d / (max + min)\n\n      if (max === r) {\n        h = (g - b) / d + (g < b ? 6 : 0)\n      } else if (max === g) {\n        h = (b - r) / d + 2\n      } else {\n        h = (r - g) / d + 4\n      }\n      h /= 6\n    }\n    return { h, s, l }\n  }\n\n  const hslToRgbaString = (h, s, l, a) => {\n    let r, g, b, q, p\n\n    const hue2rgb = (p, q, t) => {\n      if (t < 0) t += 1\n      if (t > 1) t -= 1\n      if (t < 1 / 6) return p + (q - p) * 6 * t\n      if (t < 1 / 2) return q\n      if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6\n      return p\n    }\n\n    if (l < 0.5) {\n      q = l * (1 + s)\n    } else {\n      q = l + s - l * s\n    }\n    p = 2 * l - q\n\n    r = Math.round(hue2rgb(p, q, h + 1 / 3) * 255)\n    g = Math.round(hue2rgb(p, q, h) * 255)\n    b = Math.round(hue2rgb(p, q, h - 1 / 3) * 255)\n\n    return `rgba(${r}, ${g}, ${b}, ${a})`\n  }\n\n  const updateActiveIcon = (value) => {\n    fullIcon.value = calcFullIcon(value)\n    activeIconColor.value = calcActiveIconColor(value)\n  }\n\n  const comparisonIcon = computed(() => {\n    if (comparison === null || modelValue === comparison) return RATING_CONSTANTS.NO_CHANGE_ICON\n    return modelValue > comparison ? RATING_CONSTANTS.INCREASE_ICON : RATING_CONSTANTS.DECREASE_ICON\n  })\n\n  const comparisonColor = RATING_CONSTANTS.COMPARISON_COLOR\n\n  const comparisonLabel = computed(() => {\n    if (comparison === null) return RATING_CONSTANTS.NO_COMPARISON_LABEL\n    if (modelValue === comparison) return RATING_CONSTANTS.NO_CHANGE_LABEL\n    return modelValue > comparison ^ negative ? RATING_CONSTANTS.IMPROVEMENT_LABEL : RATING_CONSTANTS.DECLINE_LABEL\n  })\n\n  const inactiveIconColor = calcActiveIconColor((length.value + 1) / 2)\n\n  return {\n    length,\n    half,\n    fullIcon,\n    activeIconColor,\n    comparisonIcon,\n    comparisonColor,\n    comparisonLabel,\n    updateActiveIcon,\n    inactiveIconColor\n  }\n}","<template>\n  <v-row class=\"align-center px-md-6\">\n    <v-col cols=\"8\" md=\"3\" class=\"d-flex align-center\">\n      <span class=\"text-body-1\">{{ label }}</span>\n    </v-col>\n    <v-col cols=\"4\" md=\"2\" class=\"d-flex justify-center align-center pa-0\">\n      <div class=\"text-h5 mr-5 text-no-wrap\">\n        {{ modelValue || '-' }}\n        <span class=\"text-body-1\">/ {{ length }}</span>\n        <span v-if=\"readonly\">\n          <v-tooltip v-if=\"comparison !== null\" location=\"bottom\" :close-delay=\"500\">\n            <template #activator=\"{ props: tooltipProps }\">\n              <v-icon\n                v-bind=\"tooltipProps\"\n                :color=\"comparisonColor\"\n                class=\"fluctuation-icon ml-3\"\n                :aria-label=\"comparisonLabel\"\n              >\n                {{ comparisonIcon }}\n              </v-icon>\n            </template>\n            前回評価: {{ comparison }}<br>\n            {{ comparisonLabel }}\n          </v-tooltip>\n        </span>\n      </div>\n    </v-col>\n    <v-col cols=\"12\" md=\"7\" class=\"d-flex align-middle pa-2\">\n      <v-rating\n        ref=\"rating\"\n        class=\"custom-rating\"\n        :class=\"{ 'rating-negative': negative }\"\n        :model-value=\"modelValue\"\n        :item-labels=\"itemLabels\"\n        :length=\"length\"\n        :readonly=\"readonly\"\n        :empty-icon=\"'mdi-emoticon-neutral-outline'\"\n        :full-icon=\"fullIcon\"\n        :half-icon=\"'mdi-emoticon-neutral-outline'\"\n        :active-color=\"activeIconColor\"\n        size=\"x-large\"\n        density=\"compact\"\n        color=\"grey-lighten-2\"\n        :aria-label=\"`${label}の評価: ${modelValue}/${length}`\"\n        :style=\"{\n          '--active-icon-color': activeIconColor,\n          '--hover-icon-color': modelValue ? activeIconColor : inactiveIconColor\n        }\"\n        @update:model-value=\"handleModelValueUpdate\"\n      ></v-rating>\n    </v-col>\n  </v-row>\n</template>\n\n<script setup>\nimport { watch, onMounted } from 'vue'\nimport { useRatingLogic } from '@/composables/useRatingLogic'\n\nconst props = defineProps({\n  label: {\n    type: String,\n    required: true\n  },\n  modelValue: {\n    type: Number,\n    default: 0\n  },\n  itemLabels: {\n    type: Array,\n    default: () => ['', '', '', '', '']\n  },\n  negative: {\n    type: Boolean,\n    default: false\n  },\n  readonly: {\n    type: Boolean,\n    default: false\n  },\n  comparison: {\n    type: Number,\n    default: null\n  }\n})\n\nconst emit = defineEmits(['update:modelValue'])\n\nconst {\n  length,\n  fullIcon,\n  activeIconColor,\n  inactiveIconColor,\n  comparisonIcon,\n  comparisonColor,\n  comparisonLabel,\n  updateActiveIcon\n} = useRatingLogic(props)\n\nconst handleModelValueUpdate = (newValue) => {\n  updateActiveIcon(newValue)\n  emit('update:modelValue', newValue)\n}\n\nwatch(() => props.modelValue, (newValue) => {\n  updateActiveIcon(newValue)\n})\n\nonMounted(() => {\n  updateActiveIcon(props.modelValue)\n})\n</script>\n\n<style>\n.v-rating__item .v-btn {\n  width: 3.2em;\n}\n\n.v-rating__item .v-btn .v-btn__content i {\n  transform: scale(1.2);\n}\n\n/* アクティブなアイコンの色設定 */\n.v-rating__wrapper:nth-child(-n + var(--active-rating)) .v-rating__item .v-btn .v-icon {\n  color: var(--active-icon-color) !important;\n}\n\n/* ホバー時のアイコン色変更 */\n.v-rating > .v-rating__wrapper:has(~ .v-rating__wrapper:hover) .v-rating__item .v-btn .v-icon,\n.v-rating > .v-rating__wrapper:hover .v-rating__item .v-btn .v-icon {\n  color: var(--hover-icon-color) !important;\n}\n\n.v-rating .v-btn .v-icon {\n  transition: color 0.2s ease;\n}\n</style>\n\n<style scoped>\n.fluctuation-icon {\n  font-size: 0.875em;\n}\n</style>","import script from \"./RatingItem.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./RatingItem.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./RatingItem.vue?vue&type=style&index=0&id=ca1050fa&lang=css\"\nimport \"./RatingItem.vue?vue&type=style&index=1&id=ca1050fa&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-ca1050fa\"]])\n\nexport default __exports__","<template>\n  <v-container class=\"report-form-container\">\n    <v-skeleton-loader\n      v-if=\"formState.isLoading\"\n      elevation=\"4\"\n      type=\"text, sentences@2, actions, chip, divider, list-item-three-line, list-item@2, button\"\n    ></v-skeleton-loader>\n\n    <template v-else>\n      <template v-if=\"isReportConfirmed\">\n        <v-alert type=\"info\" color=\"blue-grey\" border=\"start\" class=\"mt-2 mb-6 rounded-lg\" variant=\"tonal\">\n          この報告は管理者が確認済みです。編集はできません。\n        </v-alert>\n      </template>\n      <template v-else-if=\"weekString === getCurrentWeekString()\">\n        <v-alert type=\"info\" color=\"light-blue\" border=\"start\" class=\"mt-2 mb-6 rounded-lg\" variant=\"tonal\" closable>\n          報告対象期間が終了していません。問題なければ報告を行ってください。\n        </v-alert>\n      </template>\n\n      <template v-if=\"!!formState.previousWeekReport && !isReportConfirmed\">\n        <v-card class=\"rounded-lg mb-4\">\n          <v-expansion-panels v-model=\"formState.expandedPanel\">\n            <v-expansion-panel>\n              <v-expansion-panel-title class=\"bg-grey-lighten-4\">\n                <span class=\"text-decoration-underline\" style=\"text-underline-offset: 4px\">\n                  前週の報告内容\n                </span>\n                <template #actions>\n                  <v-icon icon=\"mdi-chevron-down\"></v-icon>\n                </template>\n              </v-expansion-panel-title>\n              <v-expansion-panel-text class=\"bg-plain\">\n                <v-row>\n                  <v-col cols=\"12\" md=\"5\" class=\"pa-2\">\n                    <v-list class=\"bg-transparent custom-list\">\n                      <v-list-item v-for=\"(project, index) in formState.previousWeekReport.projects\" :key=\"index\">\n                        <v-list-item-title>\n                          <v-icon small>\n                            mdi-folder-outline\n                          </v-icon>\n                          {{ project.name }}\n                        </v-list-item-title>\n                        <v-list-item-subtitle class=\"d-block\">\n                          <ul class=\"work-items-list\">\n                            <li v-for=\"(item, itemIndex) in project.workItems\" :key=\"itemIndex\">\n                              {{ item.content }}\n                            </li>\n                          </ul>\n                        </v-list-item-subtitle>\n                      </v-list-item>\n                    </v-list>\n                  </v-col>\n                  <v-col cols=\"12\" md=\"7\">\n                    <v-textarea\n                      v-model=\"formState.previousWeekReport.issues\"\n                      label=\"振り返り（成果と課題）\"\n                      outlined\n                      readonly\n                      auto-grow\n                      rows=\"2\"\n                      hide-details\n                      class=\"small-text-area mb-2\"\n                    />\n\n                    <v-textarea\n                      v-model=\"formState.previousWeekReport.improvements\"\n                      label=\"次の目標、改善施策\"\n                      outlined\n                      readonly\n                      auto-grow\n                      rows=\"1\"\n                      hide-details\n                      class=\"small-text-area\"\n                    />\n                  </v-col>\n                </v-row>\n                <v-row class=\"justify-end pa-4 pt-1\">\n                  <v-btn\n                    color=\"secondary\"\n                    variant=\"elevated\"\n                    @click=\"copyFromPreviousWeek\"\n                  >\n                    <v-icon class=\"mr-1\">\n                      mdi-content-copy\n                    </v-icon>\n                    作業内容をコピー\n                  </v-btn>\n                </v-row>\n              </v-expansion-panel-text>\n            </v-expansion-panel>\n          </v-expansion-panels>\n        </v-card>\n      </template>\n\n      <v-form\n        ref=\"reportForm\"\n        class=\"bg-plain rounded-lg mt-3 elevation-6 pa-3 pa-md-5\"\n        :class=\"{ 'form-disabled': isReportConfirmed }\"\n        @submit.prevent=\"handleSubmit\"\n      >\n        <!-- Projects section -->\n        <v-card\n          v-for=\"(project, projectIndex) in formState.report.projects\"\n          :key=\"projectIndex\" \n          elevation=\"2\"\n          class=\"pb-2 mb-4\"\n        >\n          <v-card-text>\n            <v-row>\n              <v-col cols=\"9\" md=\"8\" class=\"pa-1 pa-md-4\">\n                <ProjectSelector\n                  v-model=\"project.name\"\n                  :project-names=\"formState.projectNames\"\n                  :member-uuid=\"props.memberUuid\"\n                  :error-messages=\"formState.errors.projects[projectIndex]?.name\"\n                  @project-list-changed=\"updateProjectList\"\n                />\n              </v-col>\n              <v-col cols=\"3\" md=\"4\" class=\"d-flex justify-end\">\n                <v-btn\n                  v-tooltip=\"'プロジェクトを削除'\"\n                  icon\n                  class=\"project-delete-btn\"\n                  tabindex=\"-1\"\n                  @click=\"removeProject(projectIndex)\"\n                >\n                  <v-icon>mdi-delete-outline</v-icon>\n                </v-btn>\n              </v-col>\n            </v-row>\n            <v-row v-if=\"project.workItems.length > 0\">\n              <v-col cols=\"12\" class=\"pa-1\">\n                <div\n                  v-for=\"(item, itemIndex) in project.workItems\"\n                  :key=\"itemIndex\"\n                  class=\"mb-2\"\n                >\n                  <v-text-field\n                    :ref=\"el => setWorkItemRef(el, projectIndex, itemIndex)\"\n                    v-model=\"item.content\"\n                    :label=\"`作業内容 ${itemIndex + 1}`\"\n                    class=\"work-item-input pl-2 pl-md-5\"\n                    required\n                    hide-details=\"auto\"\n                    :error-messages=\"formState.errors.projects[projectIndex]?.workItems[itemIndex]\"\n                    @keydown=\"handleKeyDown($event, project, itemIndex)\"\n                  >\n                    <template #append>\n                      <v-icon \n                        v-tooltip=\"'作業内容を削除'\"\n                        :color=\"item.content ? 'grey darken-2' : 'grey lighten-1'\"\n                        tabindex=\"-1\"\n                        @click=\"removeWorkItem(project, itemIndex)\"\n                      >\n                        mdi-close-circle-outline\n                      </v-icon>\n                    </template>\n                  </v-text-field>\n                </div>\n              </v-col>\n            </v-row>\n          </v-card-text>\n        </v-card>\n        <v-fab\n          v-tooltip=\"'プロジェクトを追加'\"\n          class=\"me-md-5 mt-n5 mt-md-n2\"\n          location=\"top end\"\n          color=\"secondary\"\n          extended\n          absolute\n          offset\n          :disabled=\"isReportConfirmed\" \n          @click=\"addProject\"\n        >\n          <template #prepend>\n            <v-icon class=\"mx-n2\">\n              mdi-folder-outline\n            </v-icon>\n          </template>\n          <v-icon class=\"pl-1 mr-n2\">\n            mdi-plus\n          </v-icon>\n        </v-fab>\n        \n        <!-- Overtime section -->\n        <v-row class=\"mt-4 mt-md-2\">\n          <v-col cols=\"12\" sm=\"6\">\n            <v-text-field\n              v-model=\"overtimeInputValue\"\n              label=\"残業時間（週単位）\"\n              type=\"number\"\n              min=\"0\"\n              max=\"99\"\n              step=\"0.5\"\n              required\n              outlined\n              dense\n              class=\"overtime-input\"\n              @blur=\"updateOvertime\"\n            >\n              <template #append>\n                <v-btn\n                  icon\n                  :size=\"isMobile ? 38 : 48\"\n                  @click=\"decreaseOvertime\"\n                >\n                  <v-icon>mdi-minus</v-icon>\n                </v-btn>\n                <span class=\"mr-1\"></span>\n                <v-btn\n                  icon\n                  :size=\"isMobile ? 38 : 48\"\n                  @click=\"increaseOvertime\"\n                >\n                  <v-icon>mdi-plus</v-icon>\n                </v-btn>\n              </template>\n            </v-text-field>\n          </v-col>\n        </v-row>\n\n        <!-- Issues and improvements section -->\n        <v-textarea\n          v-model=\"formState.report.issues\"\n          label=\"振り返り（成果と課題）\"\n          required\n          rows=\"3\"\n          auto-grow\n          outlined\n          counter\n          :error-messages=\"formState.errors.form.issues\"\n        >\n          <template #append-inner>\n            <v-tooltip location=\"top\" max-width=\"340\" :close-delay=\"500\">\n              <template #activator=\"{ props: tooltipProps }\">\n                <v-icon\n                  v-if=\"!isMobile\"\n                  v-bind=\"tooltipProps\"\n                  color=\"grey\"\n                  icon=\"mdi-tooltip-question-outline\"\n                  class=\"cursor-pointer\"\n                ></v-icon>\n              </template>\n              <div class=\"custom-tooltip\">\n                <p><strong>効果的な振り返りのポイント</strong></p>\n                <p>\n                  ・ 主要な成果と進捗を具体的に記述する<br>\n                  ・ 直面した課題と得られた学びを説明する<br>\n                  ・ 可能な限り数値や具体例を含める\n                </p>\n              </div>\n            </v-tooltip>\n          </template>\n        </v-textarea>\n        \n        <v-textarea\n          v-model=\"formState.report.improvements\"\n          label=\"次の目標、改善施策\"\n          rows=\"1\"\n          auto-grow\n          outlined\n          :error-messages=\"formState.errors.form.improvements\"\n        >\n          <template #append-inner>\n            <v-tooltip location=\"top\" max-width=\"340\" :close-delay=\"500\">\n              <template #activator=\"{ props: tooltipProps }\">\n                <v-icon\n                  v-if=\"!isMobile\"\n                  v-bind=\"tooltipProps\"\n                  color=\"grey\"\n                  icon=\"mdi-tooltip-question-outline\"\n                  class=\"cursor-pointer\"\n                ></v-icon>\n              </template>\n              <div class=\"custom-tooltip\">\n                <p><strong>効果的な目標設定と改善施策</strong></p>\n                <p>\n                  ・ 優先度の高い改善点を明確にする<br>\n                  ・ 具体的で測定可能な目標と行動計画を立てる\n                </p>\n              </div>\n            </v-tooltip>\n          </template>\n        </v-textarea>\n\n        <!-- Rating section -->\n        <v-card \n          class=\"mt-2 border-sm\"\n          elevation=\"0\"\n          variant=\"flat\"\n          color=\"#e6f3ff\"\n        >\n          <v-card-title>\n            <div class=\"d-flex align-center\">\n              <v-icon icon=\"mdi-equalizer\" color=\"blue-grey-darken-3\" class=\"mr-2\"></v-icon>\n              評価\n            </div>\n          </v-card-title>\n          <v-card-text>\n            <rating-item\n              v-for=\"item in ratingItems\"\n              :key=\"item.key\"\n              v-model=\"formState.report.rating[item.key]\"\n              :label=\"item.label\"\n              :item-labels=\"item.itemLabels\"\n              :negative=\"item.negative\"\n            />\n          </v-card-text>\n        </v-card>\n        <div v-if=\"formState.errors.form.rating.length\" class=\"v-input--error\">\n          <div class=\"v-input__details\">\n            <div \n              v-for=\"(ratingError, index) in formState.errors.form.rating\"\n              :key=\"index\"\n              class=\"v-messages\" \n            >\n              <div class=\"v-messages__message pl-4\">\n                {{ ratingError }}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <v-row \n          v-if=\"formState.report.feedbacks && formState.report.feedbacks.length\"  \n          class=\"mt-2\"\n        >\n          <v-col cols=\"12\">\n            <v-expansion-panels \n              v-model=\"expandedPanels\" \n              class=\"feedback-box\"\n              :class=\"{ 'form-disabled': isReportConfirmed }\" \n              elevation=\"2\"\n              eager\n            >\n              <v-expansion-panel>\n                <v-expansion-panel-title>\n                  <div class=\"d-flex align-center\">\n                    <v-icon class=\"mr-2\" color=\"orange\">\n                      mdi-comment-text-outline\n                    </v-icon>\n                    フィードバック\n                    <v-badge\n                      v-if=\"formState.report.feedbacks.length\"\n                      color=\"orange-darken-1\"\n                      class=\"ml-2\"\n                      :content=\"formState.report.feedbacks.length\"\n                      inline\n                    ></v-badge>\n                  </div>\n                </v-expansion-panel-title>\n                <v-expansion-panel-text>\n                  <div\n                    v-for=\"(feedback, index) in sortedFeedbacks\"\n                    :key=\"index\"\n                    class=\"pa-0\"\n                  >\n                    <v-textarea\n                      v-model=\"feedback.content\"\n                      :label=\"`${formatDateTimeJp(new Date(feedback.createdAt))}`\"\n                      readonly\n                      rows=\"1\"\n                      auto-grow\n                      hide-details\n                      density=\"comfortable\"\n                      class=\"borderless-textarea\"\n                    >\n                    </v-textarea>\n                    <v-textarea\n                      v-if=\"!!feedback.replyComment || isLatestFeedback(index)\"\n                      v-model=\"feedback.replyComment\"\n                      label=\"返信コメント\"\n                      :readonly=\"!isLatestFeedback(index)\"\n                      :clearable=\"isLatestFeedback(index)\"\n                      clear-icon=\"mdi-close-circle\"\n                      :rows=\"isLatestFeedback(index) ? 2 : 1\"\n                      auto-grow\n                      hide-details\n                      density=\"comfortable\"\n                      class=\"mx-4\"\n                      :class=\"{ 'borderless-textarea': !isLatestFeedback(index), 'mt-n2': !isLatestFeedback(index), 'my-2': isLatestFeedback(index) }\"\n                    >\n                      <template #prepend-inner>\n                        <v-icon class=\"mr-1\" color=\"grey-darken-3\" size=\"large\">\n                          mdi-reply\n                        </v-icon>\n                      </template>\n                    </v-textarea>\n                  </div>\n                </v-expansion-panel-text>\n              </v-expansion-panel>\n            </v-expansion-panels>\n          </v-col>\n        </v-row>\n\n        <v-row \n          v-if=\"!isReportConfirmed\"\n          class=\"mt-2\"\n        >\n          <v-col cols=\"12\" class=\"d-flex justify-end\">\n            <v-btn\n              v-if=\"!formState.isNew\"\n              color=\"grey\"\n              variant=\"outlined\"\n              @click=\"handleUndo\"\n            >\n              <v-icon class=\"mr-1\" left>\n                mdi-undo\n              </v-icon>\n              元に戻す\n            </v-btn>\n            <span class=\"mx-2\"></span>\n\n            <v-btn\n              color=\"primary\"\n              type=\"submit\"\n              :disabled=\"isSubmitDisabled\"\n            >\n              <v-icon class=\"mr-1\" left>mdi-check</v-icon>\n              報告を{{ formState.isNew ? '提出' : '更新' }}する\n            </v-btn>\n          </v-col>\n        </v-row>\n      </v-form>\n    </template>\n\n    <v-dialog v-model=\"showStressDialog\" max-width=\"500px\" persistent>\n      <v-card class=\"bg-plain\">\n        <v-card-title>ストレス状況の確認</v-card-title>\n        <v-card-text>\n          <div class=\"mb-4\">\n            ストレス度が最大となっています。<br>\n            何か具体的な助けが必要ですか？<br>\n            必要な場合は、どのような支援が役立つか教えてください。\n          </div>\n          <v-textarea\n            v-model=\"formState.report.stressHelp\"\n            label=\"必要な支援や状況の詳細\"\n            variant=\"outlined\"\n            rows=\"3\"\n            auto-grow\n            hide-details\n          ></v-textarea>\n        </v-card-text>\n        <v-card-actions>\n          <v-btn color=\"grey darken-1\" text @click=\"showStressDialog = false\">キャンセル</v-btn>\n          <v-btn v-if=\"formState.report.stressHelp\" color=\"primary\" @click=\"handleSubmit\">送信</v-btn>\n          <v-btn v-else color=\"warning\" @click=\"handleSubmit\">スキップ</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-container>\n</template>\n\n<script setup>\nimport { ref, computed, nextTick, reactive, inject, onMounted } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { useCalendar } from '@/composables/useCalendar'\nimport { useReport } from '@/composables/useReport'\nimport { useResponsive } from '@/composables/useResponsive'\nimport { getReport, submitReport, updateReport, getMemberProjects } from '@/services/publicService'\nimport ProjectSelector from './ProjectSelector.vue'\nimport RatingItem from './RatingItem.vue'\n\nconst route = useRoute()\nconst { isMobile } = useResponsive()\nconst showNotification = inject('showNotification')\nconst showError = inject('showError')\nconst showConfirmDialog = inject('showConfirmDialog')\n\nconst { formatDateTimeJp, getPreviousWeekString, getCurrentWeekString } = useCalendar()\nconst { initialReport, ratingItems } = useReport()\n\nconst props = defineProps({\n  organizationId: {\n    type: String,\n    required: true\n  },\n  memberUuid: {\n    type: String,\n    required: true\n  },\n  weekString: {\n    type: String,\n    required: true\n  }\n})\n\nconst emit = defineEmits(['report-submitted'])\n\nconst formState = reactive({\n  report: initialReport(props.organizationId, props.memberUuid, props.weekString),\n  isNew: true,\n  isLoading: false,\n  projectNames: [],\n  previousWeekReport: null,\n  expandedPanel: null,\n  errors: {\n    form: { issues: [], rating: [] },\n    projects: []\n  }\n})\n\nconst isSubmitDisabled = computed(() => {\n  // 報告が確認済みの場合は常に無効\n  if (isReportConfirmed.value) return true\n\n  // 最低限の必須項目のみをチェック\n  return formState.report.projects.length === 0 || \n         formState.report.issues.trim() === ''\n})\n\nconst workItemRefs = reactive({})\nconst expandedPanels = ref([0])\nconst showStressDialog = ref(false)\nconst overtimeInputValue = ref('')\n\nconst isHighStress = computed(() => formState.report.rating?.stress === 5)\nconst isReportConfirmed = computed(() => formState.report.status === 'approved')\nconst sortedFeedbacks = computed(() => [...(formState.report.feedbacks || [])].sort((a, b) => new Date(a.createdAt) - new Date(b.createdAt)))\n\nconst isLatestFeedback = (index) => index === formState.report.feedbacks.length - 1\n\nconst updateProjectList = (newProjectList) => {\n  formState.projectNames = newProjectList\n}\n\nconst updateOvertime = () => {\n  let value = parseFloat(overtimeInputValue.value)\n  if (isNaN(value)) value = 0\n  value = Math.max(0, Math.min(99, value))\n  formState.report.overtimeHours = parseFloat(value.toFixed(1))\n  overtimeInputValue.value = formState.report.overtimeHours.toFixed(1)\n}\n\nconst increaseOvertime = () => {\n  let value = parseFloat(overtimeInputValue.value) || 0\n  if (value < 99) {\n    value += 0.5\n    overtimeInputValue.value = value.toFixed(1).toString()\n    formState.report.overtimeHours = value\n  }\n}\n\nconst decreaseOvertime = () => {\n  let value = parseFloat(overtimeInputValue.value) || 0\n  if (value > 0) {\n    value -= 0.5\n    overtimeInputValue.value = value.toFixed(1).toString()\n    formState.report.overtimeHours = value\n  }\n}\n\nconst setWorkItemRef = (el, projectIndex, itemIndex) => {\n  if (!workItemRefs[projectIndex]) {\n    workItemRefs[projectIndex] = {}\n  }\n  workItemRefs[projectIndex][itemIndex] = el\n}\n\nconst handleKeyDown = async (event, project, itemIndex) => {\n  if (event.key === 'Enter' && !event.isComposing) {\n    event.preventDefault()\n    const isLastItem = itemIndex === project.workItems.length - 1\n    \n    if (isLastItem && project.workItems[itemIndex].content.trim() !== '') {\n      await addWorkItem(project)\n      focusNewWorkItem(project, itemIndex + 1)\n    } else {\n      focusNextField(project, itemIndex)\n    }\n  }\n}\n\nconst addWorkItem = async (project) => {\n  project.workItems.push({ content: '' })\n  await nextTick()\n}\n\nconst focusNewWorkItem = (project, newIndex) => {\n  const projectIndex = formState.report.projects.indexOf(project)\n  nextTick(() => {\n    if (workItemRefs[projectIndex] && workItemRefs[projectIndex][newIndex]) {\n      workItemRefs[projectIndex][newIndex].focus()\n    }\n  })\n}\n\nconst focusNextField = (project, currentIndex) => {\n  const projectIndex = formState.report.projects.indexOf(project)\n  const nextIndex = currentIndex + 1\n  \n  nextTick(() => {\n    if (workItemRefs[projectIndex] && workItemRefs[projectIndex][nextIndex]) {\n      workItemRefs[projectIndex][nextIndex].focus()\n    } else {\n      const form = document.querySelector('.report-form')\n      const inputs = form.querySelectorAll('input, textarea, select')\n      const currentInput = workItemRefs[projectIndex][currentIndex]\n      const currentInputIndex = Array.from(inputs).indexOf(currentInput)\n      \n      if (currentInputIndex !== -1 && currentInputIndex < inputs.length - 1) {\n        inputs[currentInputIndex + 1].focus()\n      }\n    }\n  })\n}\n\nconst removeWorkItem = (project, index) => {\n  project.workItems.splice(index, 1)\n  if (project.workItems.length === 0) {\n    addWorkItem(project)\n  }\n}\n\nconst copyFromPreviousWeek = () => {\n  if (formState.previousWeekReport) {\n    formState.report = {\n      ...formState.report,\n      projects: formState.previousWeekReport.projects?.map(project => ({\n        ...project,\n        workItems: project.workItems.map(item => ({ ...item }))\n      })) || [],\n    }\n    showNotification('前週の報告内容をコピーしました。')\n  }\n}\n\nconst addProject = () => {\n  formState.report.projects.push({ name: '', workItems: [{ content: '' }] })\n}\n\nconst removeProject = (projectIndex) => {\n  if (formState.report.projects.length === 1) {\n    formState.report.projects[0].name = ''\n    formState.report.projects[0].workItems = [{ content: '' }]\n  } else {\n    formState.report.projects.splice(projectIndex, 1)\n  }\n}\n\nconst scrollToFeedback = () => {\n  const feedbackElement = document.querySelector('.feedback-box')\n  if (feedbackElement) {\n    feedbackElement.scrollIntoView({ behavior: 'smooth', block: 'start' })\n  }\n}\n\nconst checkAndScrollToFeedback = () => {\n  if (route.query.feedback === 'true' && formState.report.feedbacks?.length > 0) {\n    nextTick(() => {\n      scrollToFeedback()\n    })\n  }\n}\n\nconst fetchReport = async () => {\n  formState.isLoading = true\n  try {\n    const previousWeekString = getPreviousWeekString(props.weekString)\n    const [fetchedReport, fetchedPrevReport, memberProjects] = await Promise.all([\n      getReport(props.memberUuid, props.weekString),\n      getReport(props.memberUuid, previousWeekString),\n      getMemberProjects(props.memberUuid)\n    ])\n\n    formState.isNew = true\n    if (fetchedReport) {\n      formState.isNew = false\n      formState.report = {\n        ...fetchedReport,\n        issues: fetchedReport.issues || '',\n        improvements: fetchedReport.improvements || '',\n        rating: fetchedReport.rating || {}\n      }\n    }\n    if (fetchedPrevReport) {\n      formState.previousWeekReport = {\n        ...fetchedPrevReport,\n        issues: fetchedPrevReport.issues || ' ',\n        improvements: fetchedPrevReport.improvements || ' '\n      }\n    }\n    formState.projectNames = memberProjects\n    overtimeInputValue.value = formState ? formState.report.overtimeHours.toFixed(1) : 0.0\n  } catch (err) {\n    showError('報告書またはプロジェクトリストの取得に失敗しました。', err)\n  } finally {\n    formState.isLoading = false\n  }\n}\n\nconst validateReport = () => {\n  let isValid = true\n  \n  // エラーメッセージをクリア\n  formState.errors.form.issues = []\n  formState.errors.form.rating = []\n  formState.errors.projects = []\n\n  if (formState.report.projects.length === 0) {\n    isValid = false\n    formState.errors.form.issues.push('少なくとも1つのプロジェクトを追加してください。')\n  }\n\n  formState.report.projects.forEach((project, index) => {\n    if (!project.name.trim()) {\n      isValid = false\n      formState.errors.projects[index] = formState.errors.projects[index] || {}\n      formState.errors.projects[index].name = ['プロジェクト名を入力してください。']\n    }\n    const validWorkItems = project.workItems.filter(item => item.content.trim() !== '')\n    if (validWorkItems.length === 0) {\n      isValid = false\n      formState.errors.projects[index] = formState.errors.projects[index] || {}\n      formState.errors.projects[index].workItems = ['少なくとも1つの作業内容を追加してください。']\n    }\n  })\n\n  if (!formState.report.issues.trim()) {\n    isValid = false\n    formState.errors.form.issues.push('振り返り（成果と課題）は必須入力です。')\n  }\n\n  if (!formState.report.rating?.achievement || !formState.report.rating?.disability || !formState.report.rating?.stress) {\n    isValid = false\n    formState.errors.form.rating.push('評価は必須入力です。')\n  }\n\n  return isValid\n}\n\nconst removeEmptyWorkItems = (projects) => {\n  return projects.map(project => ({\n    ...project,\n    workItems: project.workItems.filter(item => item.content.trim() !== '')\n  }))\n}\n\nconst handleSubmit = async () => {\n  if (isReportConfirmed.value) {\n    showNotification('確認済みの報告書は編集できません。', 'info')\n    return\n  }\n\n  const isValid = validateReport()\n  if (!isValid) {\n    showError('入力に誤りがあります。赤字箇所を確認してください。')\n    return\n  }\n\n  if (isHighStress.value) {\n    if (!showStressDialog.value) {\n      showStressDialog.value = true\n      return\n    }\n  } else {\n    formState.report.stressHelp = ''\n  }\n  showStressDialog.value = false\n\n  const cleanedReport = {\n    ...formState.report,\n    projects: removeEmptyWorkItems(formState.report.projects),\n    status: 'pending'\n  }\n\n  const confirmed = await showConfirmDialog(\n    '確認',\n    `この内容で報告を${formState.isNew ? '提出' : '更新'}します。よろしいですか？`\n  )\n  if (!confirmed) return\n\n  try {\n    if (formState.isNew) {\n      await submitReport(cleanedReport)\n      emit('report-submitted', cleanedReport, true)\n    } else {\n      await updateReport(cleanedReport)\n      emit('report-submitted', cleanedReport, false)\n    }\n  } catch (error) {\n    showError('報告の提出に失敗しました。', error)\n  }\n}\n\nconst handleUndo = async () => {\n  const confirmed = await showConfirmDialog(\n    '確認',\n    '変更を元に戻します。よろしいですか？'\n  )\n  if (!confirmed) {\n    return\n  }\n\n  await fetchReport()\n}\n\nconst expandFeedbackPanel = () => {\n  if (formState.report.feedbacks && formState.report.feedbacks.length > 0) {\n    expandedPanels.value = [0]\n  }\n}\n\nonMounted(async () => {\n  await fetchReport()\n  expandFeedbackPanel()\n  checkAndScrollToFeedback()\n})\n</script>\n\n<style>\n.v-expansion-panel-title {\n  font-size: 1rem;\n}\n\n.v-expansion-panel-text__wrapper {\n  padding: 8px 12px;\n}\n</style>\n\n<style scoped>\n.report-form-container {\n  padding: 16px 0 32px;\n}\n\n.project-list-item:hover {\n  background-color: rgba(179, 215, 255, 0.6) !important;\n}\n\n.project-delete-btn {\n  opacity: 0.6;\n  transition: opacity 0.2s;\n}\n\n.project-delete-btn:hover {\n  opacity: 1;\n}\n\n.project-delete-btn .v-icon {\n  font-size: 18px;\n  color: #757575;\n}\n\n.work-item-input :deep() .v-input__append {\n  padding: 0;\n  margin-right: 8px;\n}\n\n.overtime-input {\n  max-width: 300px;\n}\n\n.overtime-input :deep() input {\n  text-align: right !important;\n  font-size: 1.2em;\n}\n\n.overtime-input :deep() input::-webkit-outer-spin-button,\n.overtime-input :deep() input::-webkit-inner-spin-button {\n  margin-left: 10px;\n}\n\n.custom-list-subtext {\n  display: block;\n  text-indent: 1em;\n  padding-top: 4px;\n}\n\n.custom-tooltip p {\n  margin: 5px 0;\n  line-height: 1.6;\n}\n\n.v-expansion-panel-title {\n  padding: 4px 16px;\n}\n\n.v-expansion-panel--active > .v-expansion-panel-title:not(.v-expansion-panel-title--static) {\n  min-height: auto !important;\n  padding-top: 13px !important;\n  padding-bottom: 12px !important;\n}\n\n.borderless-textarea :deep(.v-field__outline) {\n  display: none;\n}\n</style>","import script from \"./ReportForm.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ReportForm.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ReportForm.vue?vue&type=style&index=0&id=69c22258&lang=css\"\nimport \"./ReportForm.vue?vue&type=style&index=1&id=69c22258&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-69c22258\"]])\n\nexport default __exports__","<template>\n  <v-container>\n    <WeekSelector \n      function-name=\"週次報告\"\n      icon=\"mdi-calendar-week\"\n      :selected-week=\"selectedWeek\"\n      @select-week=\"handleWeekSelection\"\n      @reset=\"handleReset\"\n    />\n\n    <v-alert\n      v-if=\"!isValidWeek\"\n      type=\"error\"\n      class=\"mt-5\"\n      outlined\n    >\n      指定された週は有効範囲外です。\n    </v-alert>\n\n    <ReportForm\n      v-if=\"selectedWeek && isValidWeek\" \n      :organization-id=\"organizationId\"\n      :member-uuid=\"memberUuid\"\n      :week-string=\"getStringFromWeek(selectedWeek)\"\n      @report-submitted=\"handleReportSubmitted\"\n    />\n    \n    <v-btn-group\n      v-if=\"member\"\n      color=\"#f6fbff\"\n      density=\"comfortable\"\n      rounded=\"pill\"\n      elevation=\"2\"\n      divided\n      class=\"me-1 d-none d-md-flex v-btn-group\"\n    >\n      <v-btn\n        class=\"pe-2\"\n        prepend-icon=\"mdi-account-circle\"\n        variant=\"flat\"\n        @click=\"openMemberInfoDialog\"\n      >\n        <div class=\"text-none font-weight-regular\">\n          {{ member.name }} さん\n        </div>\n      </v-btn>\n      <v-btn size=\"small\" icon>\n        <v-icon icon=\"mdi-menu-down\"></v-icon>\n        <v-menu\n          activator=\"parent\"\n          location=\"bottom end\"\n          transition=\"fade-transition\"\n        >\n          <v-list density=\"compact\" min-width=\"210\" rounded=\"lg\" slim>\n            <v-list-item\n              prepend-icon=\"mdi-emoticon-outline\"\n              title=\"ストレスチェック\"\n              link\n              @click=\"openStressCheckDialog\"\n            ></v-list-item>\n            <v-list-item\n              prepend-icon=\"mdi-comment-quote-outline\"\n              title=\"フィードバック\"\n              link\n              @click=\"openFeedbackForm\"\n            >\n            </v-list-item>\n            <v-list-item\n              prepend-icon=\"mdi-file-document-outline\"\n              title=\"利用規約\"\n              @click=\"openTermsOfService\"\n            >\n            </v-list-item>\n            <v-list-item\n              prepend-icon=\"mdi-shield-account-outline\"\n              title=\"プライバシーポリシー\"\n              @click=\"openPrivacyPolicy\"\n            >\n            </v-list-item>\n          </v-list>\n        </v-menu>\n      </v-btn>\n    </v-btn-group>\n\n    <MemberInfoDialog\n      v-if=\"member\"\n      ref=\"memberInfoDialog\"\n      v-model:member=\"member\"\n      :is-advice-enabled=\"isAdviceEnabled\"\n    />\n\n    <StressCheckDialog\n      ref=\"stressCheckDialog\"\n      @stress-level-updated=\"handleStressLevelUpdate\"\n    />\n\n    <ReportCompleteDialog\n      v-model=\"isReportSubmitted\"\n      :report-content=\"lastReportContent\"\n      :is-advice-enabled=\"isAdviceEnabled\"\n      :enabled-advisors=\"enabledAdvisors\"\n      @back=\"handleBackToReport\"\n      @close=\"handleClose\"\n    />\n  </v-container>\n</template>\n\n<script setup>\nimport { ref, watch, computed, onMounted, defineAsyncComponent } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useCalendar } from '@/composables/useCalendar'\nimport { getOrganization, getMember } from '@/services/publicService'\nimport { defaultAdvisors } from '@/services/bedrockService'\nimport { feedbackUrl, termsOfServiceUrl, privacyPolicyUrl } from '@/config/environment'\nimport WeekSelector from '@/components/WeekSelector.vue'\nimport ReportForm from '@/components/ReportForm.vue'\n\nconst MemberInfoDialog = defineAsyncComponent(() => import('@/components/MemberInfoDialog.vue'))\nconst StressCheckDialog = defineAsyncComponent(() => import('@/components/StressCheckDialog.vue'))\nconst ReportCompleteDialog = defineAsyncComponent(() => import('@/components/ReportCompleteDialog.vue'))\n\nconst props = defineProps({\n  organizationId: {\n    type: String,\n    default: null\n  },\n  memberUuid: {\n    type: String,\n    default: null\n  },\n  weekString: {\n    type: String,\n    default: null\n  }\n})\n\nconst { getWeekFromString, getStringFromWeek, isWeekInRange } = useCalendar()\nconst router = useRouter()\n\nconst organization = ref('')\nconst selectedWeek = ref(null)\nconst isValidWeek = ref(true)\nconst member = ref(null)\nconst memberInfoDialog = ref(null)\nconst stressCheckDialog = ref(null)\nconst isReportSubmitted = ref(false)\nconst lastReportContent = ref(null)\n\nconst isAdviceEnabled = computed(() => {\n  return organization.value?.features?.weeklyReportAdvice ?? false\n})\n\nconst enabledAdvisors = computed(() => {\n  return organization.value?.features?.advisors || defaultAdvisors\n})\n\nconst openMemberInfoDialog = () => {\n  memberInfoDialog.value.openDialog()\n}\n\nconst openStressCheckDialog = () => {\n  stressCheckDialog.value.openDialog()\n}\n\nconst handleStressLevelUpdate = (level) => {\n  console.log('Stress level updated:', level)\n}\n\nconst handleWeekSelection = (week) => {\n  selectedWeek.value = week\n  isReportSubmitted.value = false\n\n  if (week && isWeekInRange(week)) {\n    const weekString = getStringFromWeek(week)\n    if (weekString) {\n      router.push({\n        name: 'WeeklyReport',\n        params: { organizationId: props.organizationId, memberUuid: props.memberUuid, weekString }\n      })\n      isValidWeek.value = true\n    } else {\n      isValidWeek.value = false\n    }\n  } else {\n    router.push({ \n      name: 'WeeklyReportSelector',\n      params: { organizationId: props.organizationId, memberUuid: props.memberUuid }\n    })\n    isValidWeek.value = true\n  }\n}\n\nconst handleReset = () => {\n  selectedWeek.value = null\n  isValidWeek.value = true\n  isReportSubmitted.value = false\n  lastReportContent.value = null\n\n  router.push({ \n    name: 'WeeklyReportSelector',\n    params: { organizationId: props.organizationId, memberUuid: props.memberUuid }\n  })\n}\n\nconst handleReportSubmitted = async (reportContent, isNew) => {\n  lastReportContent.value = {\n    ...reportContent,\n    weekString: getStringFromWeek(selectedWeek.value),\n    memberUuid: props.memberUuid,\n    organizationId: props.organizationId,\n    isNew\n  }\n  isReportSubmitted.value = true\n}\n\nconst handleBackToReport = () => {\n  isReportSubmitted.value = false\n  lastReportContent.value = null\n  handleReset()\n}\n\nconst handleClose = () => {\n  window.close()\n}\n\nconst openFeedbackForm = () => {\n  window.open(feedbackUrl, '_blank', 'noopener,noreferrer')\n}\n\nconst openTermsOfService = () => {\n  window.open(termsOfServiceUrl, '_blank', 'noopener,noreferrer')\n}\n\nconst openPrivacyPolicy = () => {\n  window.open(privacyPolicyUrl, '_blank', 'noopener,noreferrer')\n}\n\nwatch(() => props.weekString, (newWeekParam) => {\n  if (newWeekParam) {\n    const week = getWeekFromString(newWeekParam)\n    if (week && isWeekInRange(week)) {\n      selectedWeek.value = week\n      isValidWeek.value = true\n    } else {\n      selectedWeek.value = null\n      isValidWeek.value = false\n    }\n  } else {\n    selectedWeek.value = null\n    isValidWeek.value = true\n  }\n}, { immediate: true })\n\nonMounted(async () => {\n  try {\n    const [organizationData, memberData] = await Promise.all([\n      getOrganization(props.organizationId),\n      getMember(props.memberUuid)\n    ])\n    \n    organization.value = organizationData\n    member.value = memberData\n  } catch (err) {\n    console.error('Error initializing:', err)\n  }\n})\n</script>\n\n<style scoped>\n.v-btn-group {\n  position: fixed;\n  top: 16px;\n  right: 16px;\n  z-index: 100;\n}\n\n@media (max-width: 600px) {\n  .v-btn-group {\n    display: none;\n  }\n}\n</style>","import script from \"./WeeklyReport.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WeeklyReport.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WeeklyReport.vue?vue&type=style&index=0&id=7ff7cbed&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7ff7cbed\"]])\n\nexport default __exports__","import { apiClient } from './apiClient'\n\nexport const generateToken = async (params) => {\n  return apiClient.post('/secure/generate', params)\n}\n\nexport const verifyToken = async (token) => {\n  return apiClient.post('/secure/verify', { token })\n}","import { apiClient } from './apiClient'\n\nexport const sendRequest = async (organizationId, weekString) => {\n  return apiClient.post('/send-request', { organizationId, weekString })\n}\n","<template>\n  <v-dialog\n    :model-value=\"modelValue\"\n    max-width=\"400\"\n    @update:model-value=\"$emit('update:modelValue', $event)\"\n  >\n    <v-card class=\"completion-dialog rounded-xl\">\n      <div class=\"completion-background\">\n        <div class=\"ripple-effect\" />\n      </div>\n      <v-card-text class=\"text-center pa-8 pb-2\">\n        <div class=\"completion-icon-wrapper mb-8\">\n          <v-icon\n            icon=\"mdi-check-circle\"\n            color=\"info\"\n            size=\"80\"\n            class=\"completion-icon\"\n          />\n          <div class=\"completion-icon-ring\" />\n          <div class=\"completion-icon-ring delay-1\" />\n          <div class=\"completion-icon-ring delay-2\" />\n        </div>\n        <div class=\"text-h5 font-weight-bold mb-5 completion-title\">\n          すべての報告を確認しました！\n        </div>\n        <div class=\"text-body-1 text-grey-darken-2 mb-2 fade-in-up delay-1\">\n          メンバー{{ reportCount }}名の週次報告確認が完了しました\n        </div>\n        <div class=\"text-subtitle-1 text-grey-darken-1 fade-in-up delay-2\">\n          おつかれさまでした<v-icon color=\"amber-accent-3\" class=\"ml-1 mt-n1\">mdi-emoticon-happy-outline</v-icon>\n        </div>\n      </v-card-text>\n      <v-card-actions class=\"pa-4 d-flex flex-column\">\n        <v-btn\n          color=\"secondary\"\n          size=\"large\"\n          class=\"px-6 fade-in-up delay-3 mb-2 w-100\"\n          @click=\"$emit('share')\"\n        >\n          共有する\n          <v-icon class=\"ml-2\">\n            mdi-share-variant\n          </v-icon>\n        </v-btn>\n        <v-btn\n          color=\"primary\"\n          size=\"large\"\n          class=\"px-6 fade-in-up delay-3 w-100\"\n          @click=\"$emit('update:modelValue', false)\"\n        >\n          閉じる ({{ countdown }}秒)\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n\n<script setup>\nimport { ref, onBeforeUnmount, watch } from 'vue'\n\nconst props = defineProps({\n  modelValue: {\n    type: Boolean,\n    required: true\n  },\n  reportCount: {\n    type: Number,\n    required: true\n  }\n})\n\nconst emit = defineEmits(['update:modelValue', 'share'])\n\nconst countdown = ref(10)\nlet timer\n\nconst startCountdown = () => {\n  if (timer) {\n    clearInterval(timer)\n  }\n  countdown.value = 10\n  timer = setInterval(() => {\n    countdown.value--\n    if (countdown.value <= 0) {\n      clearInterval(timer)\n      emit('update:modelValue', false)\n    }\n  }, 1000)\n}\n\nwatch(() => props.modelValue, (newVal) => {\n  if (newVal) {\n    startCountdown()\n  } else {\n    if (timer) {\n      clearInterval(timer)\n    }\n  }\n})\n\nonBeforeUnmount(() => {\n  if (timer) {\n    clearInterval(timer)\n  }\n})\n</script>\n\n<style scoped>\n.completion-dialog {\n  background: linear-gradient(165deg, #ffffff 0%, #f8fbff 100%);\n  position: relative;\n  overflow-y: hidden !important;\n}\n\n.completion-background {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 160px;\n  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);\n  opacity: 0.1;\n  overflow: hidden;\n}\n\n.ripple-effect {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 200%;\n  padding-bottom: 200%;\n  transform: translate(-50%, -50%);\n  background: radial-gradient(circle, rgba(3, 169, 244, 0.1) 0%, transparent 70%);\n  animation: ripple 3s ease-out infinite;\n}\n\n.completion-icon-wrapper {\n  position: relative;\n  display: inline-block;\n}\n\n.completion-icon {\n  position: relative;\n  z-index: 2;\n  animation: bounceIn 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n}\n\n.completion-icon-ring {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 86px;\n  height: 86px;\n  border-radius: 50%;\n  transform: translate(-50%, -50%);\n  border: 3px solid #0288d1;\n  opacity: 0;\n  animation: ringPulse 1.5s ease-out 0.4s forwards;\n}\n\n.completion-icon-ring.delay-1 {\n  animation: ringPulse 1.5s ease-out 0.8s infinite;\n}\n\n.completion-icon-ring.delay-2 {\n  animation: ringPulse 1.5s ease-out 1.2s infinite;\n}\n\n.completion-title {\n  background: linear-gradient(45deg, #2962ff, #448aff);\n  -webkit-background-clip: text;\n  background-clip: text;\n  color: transparent;\n  animation: slideIn 0.5s ease-out 0.2s both;\n}\n\n.fade-in-up {\n  opacity: 0;\n  animation: fadeInUp 0.6s ease-out forwards;\n}\n\n.fade-in-up.delay-1 {\n  animation-delay: 0.3s;\n}\n\n.fade-in-up.delay-2 {\n  animation-delay: 0.5s;\n}\n\n.fade-in-up.delay-3 {\n  animation-delay: 0.7s;\n}\n\n@keyframes bounceIn {\n  0% {\n    transform: scale(0);\n    opacity: 0;\n  }\n  50% {\n    transform: scale(1.2);\n  }\n  70% {\n    transform: scale(0.9);\n  }\n  100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n\n@keyframes ringPulse {\n  0% {\n    transform: translate(-50%, -50%) scale(0.8);\n    opacity: 0;\n  }\n  50% {\n    opacity: 0.5;\n  }\n  100% {\n    transform: translate(-50%, -50%) scale(1.2);\n    opacity: 0;\n  }\n}\n\n@keyframes slideIn {\n  0% {\n    transform: translateY(20px);\n    opacity: 0;\n  }\n  100% {\n    transform: translateY(0);\n    opacity: 1;\n  }\n}\n\n@keyframes ripple {\n  0% {\n    transform: translate(-50%, -50%) scale(0);\n    opacity: 0.5;\n  }\n  100% {\n    transform: translate(-50%, -50%) scale(1);\n    opacity: 0;\n  }\n}\n\n@keyframes fadeInUp {\n  0% {\n    transform: translateY(20px);\n    opacity: 0;\n  }\n  100% {\n    transform: translateY(0);\n    opacity: 1;\n  }\n}\n\n.w-100 {\n  width: 100%;\n}\n</style>","import script from \"./ReviewCompleteDialog.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ReviewCompleteDialog.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ReviewCompleteDialog.vue?vue&type=style&index=0&id=311fcc0c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-311fcc0c\"]])\n\nexport default __exports__","<template>\n  <v-container class=\"review-form-container\">\n    <ScrollNavigation \n      v-if=\"filteredReports.length > 0\"\n      class=\"d-none d-md-flex\"\n      :report-refs=\"reportRefs\" \n    />\n\n    <v-row \n      v-if=\"reports.length && !readonly\"\n      class=\"d-print-none mt-2\"\n    >\n      <v-col cols=\"12\" md=\"10\" class=\"py-0\">\n        <v-card\n          class=\"px-2 align-center bg-transparent\"\n          elevation=\"0\"\n        >\n          <v-chip-group\n            v-model=\"selectedStatus\"\n            column\n          >\n            <span \n              v-for=\"status in statusOptions\"\n              :key=\"status.value\"\n            >\n              <v-chip\n                v-if=\"statusCounts[status.value] > 0\"\n                :value=\"status.value\"\n                :color=\"status.color\"\n                outlined\n                filter\n              >\n                {{ status.text }}: {{ statusCounts[status.value] }}\n              </v-chip>\n            </span>\n          </v-chip-group>\n        </v-card>\n      </v-col>\n      <v-col cols=\"12\" md=\"2\" class=\"text-end d-none d-md-block\">\n        <v-btn\n          color=\"secondary\"\n          size=\"small\"\n          @click=\"copyShareUrl\"\n        >\n          共有する\n          <v-icon class=\"ml-1\">\n            mdi-share-variant\n          </v-icon>\n        </v-btn>\n      </v-col>\n    </v-row>\n    <v-row v-if=\"isLoading && !readonly\">\n      <v-col>\n        <v-skeleton-loader\n          type=\"chip@3\"\n          class=\"bg-transparent\"\n          :loading=\"true\"\n        ></v-skeleton-loader>\n      </v-col>\n    </v-row>\n\n    <v-row v-if=\"isLoading\">\n      <v-col v-for=\"i in 3\" :key=\"i\" cols=\"12\">\n        <v-skeleton-loader\n          type=\"avatar, text, ossein, paragraph, text, actions\"\n          class=\"rounded-lg\"\n          :loading=\"true\"\n          elevation=\"4\"\n        ></v-skeleton-loader>\n      </v-col>\n    </v-row>\n    <v-row v-else>\n      <v-col cols=\"12\">\n        <v-card\n          v-for=\"(report, index) in filteredReports\"\n          :key=\"report.memberUuid\"\n          :ref=\"el => { if (el) reportRefs[index] = el }\"\n          :class=\"{ 'approved-card': report.status === 'approved', 'none-card': report.status === 'none' }\"\n          class=\"default-card rounded-lg cursor-default mt-2 pb-1\"\n          hover\n          outlined\n        > \n          <v-card-title class=\"d-flex justify-space-between align-center py-2\">\n            <div class=\"member-name d-flex align-center\">\n              <v-icon size=\"x-large\" class=\"mr-2\">\n                mdi-account-box-outline\n              </v-icon>\n              <span class=\"text-h6 font-weight-bold\">{{ report.name }}</span>\n            </div>\n            <div class=\"d-flex align-center\">\n              <v-tooltip\n                :disabled=\"report.status !== 'approved'\"\n                location=\"bottom\"\n                :close-delay=\"1500\"\n              >\n                <template #activator=\"{ props: tooltipProps }\">\n                  <v-chip\n                    v-bind=\"tooltipProps\"\n                    :color=\"getStatusColor(report.status)\"\n                    label\n                    x-small\n                    class=\"status-chip ml-2\"\n                  >\n                    <v-icon\n                      v-if=\"report.status === 'approved'\"\n                      class=\"mr-1\"\n                    >\n                      mdi-check-circle-outline\n                    </v-icon>\n                    {{ getStatusText(report.status) }}\n                  </v-chip>\n                </template>\n                <span>確認日時：{{ formatDateTimeJp(new Date(report.approvedAt)) }}</span>\n              </v-tooltip>\n\n              <v-btn\n                v-if=\"!readonly\"\n                icon\n                size=\"small\"\n                color=\"secondary\"\n                variant=\"tonal\"\n                elevation=\"2\"\n                class=\"ml-6\"\n                :to=\"{ name: 'MemberReports', params: { memberUuid: report.memberUuid }}\"\n              >\n                <v-icon size=\"24\" class=\"opacity-80\">mdi-calendar-range</v-icon>\n                <v-tooltip activator=\"parent\" location=\"top\">\n                  履歴を表示\n                </v-tooltip>\n              </v-btn>\n            </div>\n          </v-card-title>\n\n          <v-card-text\n            v-if=\"report.status !== 'none'\"\n            class=\"pa-4\" \n          >\n            <v-row>\n              <v-col\n                cols=\"12\"\n                md=\"5\"\n                class=\"d-flex flex-column\"\n              >\n                <div class=\"text-subtitle-1 font-weight-medium mb-1\">\n                  作業内容\n                </div>\n                <v-list\n                  dense\n                  class=\"bg-transparent pa-0 mb-3\"\n                >\n                  <v-list-item\n                    v-for=\"(project, projectIndex) in report.projects\"\n                    :key=\"projectIndex\"\n                    class=\"px-2 py-2\"\n                  >\n                    <v-list-item-title>\n                      <v-icon small>\n                        mdi-folder-outline\n                      </v-icon>\n                      {{ project.name }}\n                    </v-list-item-title>\n                    <v-list-item-subtitle class=\"d-block ml-2 my-2\">\n                      <ul class=\"work-items-list text-black\">\n                        <li v-for=\"(item, itemIndex) in project.workItems\" :key=\"itemIndex\">\n                          {{ item.content }}\n                        </li>\n                      </ul>\n                    </v-list-item-subtitle>\n                  </v-list-item>\n                </v-list>\n                <div v-if=\"report.overtimeHours >= 0\" class=\"mt-auto\">\n                  <OvertimeDisplay :overtime-hours=\"report.overtimeHours\" />\n                </div>\n              </v-col>\n              <v-col\n                cols=\"12\"\n                md=\"7\"\n              >\n                <div class=\"text-subtitle-1 font-weight-medium mb-1\">\n                  振り返り（成果と課題）\n                </div>\n                <v-textarea\n                  v-model=\"report.issues\"\n                  readonly\n                  auto-grow\n                  rows=\"2\"\n                  hide-details\n                  variant=\"outlined\"\n                  class=\"small-text-area mb-2\"\n                />\n\n                <div class=\"text-subtitle-1 font-weight-medium mb-1\">\n                  次の目標、改善施策\n                </div>\n                <v-textarea\n                  v-model=\"report.improvements\"\n                  readonly\n                  auto-grow\n                  rows=\"1\"\n                  hide-details\n                  variant=\"outlined\"\n                  class=\"small-text-area\"\n                />\n              </v-col>\n            </v-row>\n\n            <v-card \n              class=\"mt-4 border-sm\"\n              elevation=\"0\"\n              variant=\"flat\"\n              color=\"#e6f3ff\"\n            >\n              <v-card-title>\n                <div class=\"d-flex align-center\">\n                  <v-icon icon=\"mdi-equalizer\" color=\"blue-grey-darken-3\" class=\"mr-2\"></v-icon>\n                  評価\n                </div>\n              </v-card-title>\n              <v-card-text>\n                <rating-item\n                  v-for=\"item in preparedRatingItems\"\n                  :key=\"item.key\"\n                  :model-value=\"item.getValue(report)\"\n                  :label=\"item.label\"\n                  :item-labels=\"item.labels\"\n                  :negative=\"item.negative\"\n                  :readonly=\"true\"\n                  :comparison=\"item.getComparison(report)\"\n                />\n                <v-textarea\n                  v-if=\"report.stressHelp\"\n                  v-model=\"report.stressHelp\"\n                  label=\"ストレス度：必要な支援や状況の詳細\"\n                  readonly\n                  rows=\"1\"\n                  auto-grow\n                  hide-details\n                  variant=\"outlined\"\n                  density=\"comfortable\"\n                  class=\"mt-8 mx-2\"\n                ></v-textarea>\n              </v-card-text>\n            </v-card>\n            \n            <v-row\n              v-if=\"(!readonly) || report.feedbacks.length\" \n              class=\"mt-2\"\n            >\n              <v-col cols=\"12\">\n                <v-expansion-panels \n                  v-model=\"expandedPanels[report.memberUuid]\" \n                  elevation=\"2\"\n                  eager\n                  @update:model-value=\"value => expandedPanels[report.memberUuid] = value\"\n                >\n                  <v-expansion-panel>\n                    <v-expansion-panel-title class=\"bg-plain\">\n                      <v-alert-title class=\"text-body-1 d-flex align-center\">\n                        <v-icon class=\"mr-2\" color=\"orange\">\n                          mdi-comment-text-outline\n                        </v-icon>\n                        フィードバック\n                        <v-badge\n                          v-if=\"report.feedbacks.length\"\n                          color=\"orange-darken-1\"\n                          class=\"ml-1\"\n                          :content=\"report.feedbacks.length\"\n                          inline\n                        ></v-badge>\n                      </v-alert-title>\n                    </v-expansion-panel-title>\n                    <v-expansion-panel-text>\n                      <div\n                        v-for=\"(feedback, feedbackIndex) in report.feedbacks\"\n                        :key=\"feedbackIndex\"\n                        class=\"pa-0\"\n                      >\n                        <v-textarea\n                          v-model=\"feedback.content\"\n                          :label=\"`${formatDateTimeJp(new Date(feedback.createdAt))}`\"\n                          readonly\n                          rows=\"1\"\n                          auto-grow\n                          hide-details\n                          density=\"comfortable\"\n                          class=\"borderless-textarea\"\n                        >\n                        </v-textarea>\n                        <v-textarea\n                          v-if=\"!!feedback.replyComment\"\n                          v-model=\"feedback.replyComment\"\n                          label=\"返信コメント\"\n                          readonly\n                          rows=\"1\"\n                          auto-grow\n                          hide-details\n                          density=\"comfortable\"\n                          class=\"ml-4 mt-n2 borderless-textarea\"\n                        >\n                          <template #prepend-inner>\n                            <v-icon class=\"mr-1\" color=\"grey-darken-3\" size=\"large\">\n                              mdi-comment-account-outline\n                            </v-icon>\n                          </template>\n                        </v-textarea>\n                      </div>\n\n                      <div \n                        v-if=\"!readonly\"\n                        class=\"mt-4 px-1\"\n                      >\n                        <v-textarea\n                          v-model=\"newFeedbacks[report.memberUuid]\"\n                          placeholder=\"新しいフィードバックを入力...\"\n                          outlined\n                          dense\n                          clear-icon=\"mdi-close-circle\"\n                          clearable \n                          hide-details=\"auto\"\n                          rows=\"2\"\n                          auto-grow\n                        >\n                        </v-textarea>\n                        <v-btn\n                          color=\"warning\"\n                          variant=\"elevated\" \n                          :disabled=\"!newFeedbacks[report.memberUuid]?.trim()\"\n                          class=\"mt-3 mb-1\"\n                          @click=\"handleFeedback(report.memberUuid)\"\n                        >\n                          <v-icon class=\"mr-1\">\n                            mdi-reply\n                          </v-icon>\n                          フィードバック送信\n                        </v-btn>\n                      </div>\n                    </v-expansion-panel-text>\n                  </v-expansion-panel>\n                </v-expansion-panels>\n              </v-col>\n            </v-row>\n          </v-card-text>\n\n          <v-card-actions\n            v-if=\"report.status !== 'approved' && report.status !== 'none' && !readonly\"\n            class=\"d-print-none pt-0 pb-3\"\n          >\n            <v-spacer />\n            <v-btn\n              color=\"primary\"\n              variant=\"elevated\" \n              class=\"mr-2\"\n              outlined\n              @click=\"handleApprove(report.memberUuid)\"\n            >\n              <v-icon left x-small class=\"mr-1\">\n                mdi-check-bold\n              </v-icon>\n              確認済み\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-col>\n\n      <v-col \n        v-if=\"statusCounts['none'] > 0 && !readonly\"\n        cols=\"12\"\n      >\n        <v-btn\n          color=\"secondary\"\n          variant=\"elevated\" \n          outlined\n          @click=\"handleResend\"\n        >\n          報告要求を送信する\n          <v-icon class=\"ml-1\">\n            mdi-send\n          </v-icon>\n        </v-btn>\n      </v-col>\n    </v-row>\n\n    <ReviewCompleteDialog\n      v-model=\"showCompletionDialog\"\n      :report-count=\"reports.length\"\n      @share=\"copyShareUrl\"\n    />\n  </v-container>\n</template>\n\n<script setup>\nimport { computed, defineAsyncComponent, inject, nextTick, onMounted, ref, watch, watchEffect } from 'vue'\nimport { listReports, listMembers } from '@/services/publicService'\nimport { rootUrl } from '@/config/environment'\nimport { generateToken } from '@/services/secureParameterService'\nimport { sendRequest } from '@/services/sendRequestService'\nimport { submitFeedback, updateReport } from '@/services/reportService'\nimport { useCalendar } from '@/composables/useCalendar'\nimport { useReport } from '@/composables/useReport'\nimport OvertimeDisplay from './OvertimeDisplay.vue'\nimport RatingItem from './RatingItem.vue'\nimport ReviewCompleteDialog from './ReviewCompleteDialog.vue'\nconst ScrollNavigation = defineAsyncComponent(() => import('./ScrollNavigation.vue'))\n\nconst { formatDateTimeJp, formatDateJp, getPreviousWeekString } = useCalendar()\nconst { statusOptions, getStatusText, getStatusColor, ratingItems } = useReport()\nconst showNotification = inject('showNotification')\nconst showError = inject('showError')\nconst showConfirmDialog = inject('showConfirmDialog')\n\nconst props = defineProps({\n  organizationId: {\n    type: String,\n    required: true\n  },\n  weekString: {\n    type: String,\n    required: true\n  },\n  readonly: {\n    type: Boolean,\n    default: false\n  }\n})\n\nconst reports = ref([])\nconst isLoading = ref(true)\nconst error = ref(null)\nconst selectedStatus = ref('all')\nconst lastWeekRatings = ref({})\nconst expandedPanels = ref({})\nconst newFeedbacks = ref({})\n\nconst unconfirmedCount = computed(() => {\n  return statusCounts.value['none'] || 0\n})\n\nconst shouldExpandPanel = computed(() => {\n  return reports.value.reduce((acc, report) => {\n    const feedbacks = report.feedbacks ?? []\n    acc[report.memberUuid] = feedbacks.length > 0 ? [0] : []\n    return acc\n  }, {})\n})\n\nconst updateExpandedPanels = () => {\n  expandedPanels.value = { ...shouldExpandPanel.value }\n}\n\nwatchEffect(() => {\n  if (selectedStatus.value === undefined) {\n    selectedStatus.value = 'all'\n  }\n})\n\nwatchEffect(() => {\n  if (reports.value.length > 0) {\n    updateExpandedPanels()\n  }\n})\n\n// メモ化されたステータスカウント\nconst statusCounts = computed(() => {\n  return reports.value.reduce((counts, report) => {\n    counts[report.status] = (counts[report.status] || 0) + 1\n    return counts\n  }, { all: reports.value.length })\n})\n\n// 全員の報告が確認済みかどうかの判定\nconst isAllCompleted = computed(() => {\n  return reports.value.length > 0 && reports.value.every(report => report.status === 'approved')\n})\n\n// メモ化されたフィルタリング\nconst filteredReports = computed(() => \n  selectedStatus.value === 'all' \n    ? reports.value \n    : reports.value.filter(report => report.status === selectedStatus.value)\n)\n\nconst copyShareUrl = async () => {\n  try {\n    const params = { organizationId: props.organizationId, weekString: props.weekString }\n    const result = await generateToken(params)\n    \n    const shareUrl = `${rootUrl}/view/${result.token}#_=`\n    \n    // 14日後の日付を計算\n    const expiryDate = new Date()\n    expiryDate.setDate(expiryDate.getDate() + 14)\n    const comment = `有効期限：${formatDateJp(expiryDate)}`\n    \n    const shareText = `${shareUrl}\\n${comment}`\n    \n    await navigator.clipboard.writeText(shareText)\n    showNotification('共有リンクをコピーしました')\n  } catch (err) {\n    showError('共有リンクのコピーに失敗しました', err)\n  }\n}\n\nconst preparedRatingItems = computed(() => {\n  // 達成度の表示を反転させる\n  return ratingItems.map(item => ({\n    ...item,\n    labels: item.key === 'achievement' ? item.itemLabels.slice().reverse() : item.itemLabels,\n    negative: item.key === 'achievement' ? !item.negative : item.negative,\n    getValue: (report) => {\n      const value = report.rating[item.key]\n      return item.key === 'achievement' ? item.itemLabels.length - value + 1 : value\n    },\n    getComparison: (report) => {\n      if (lastWeekRatings.value[report.memberUuid]) {\n        const value = lastWeekRatings.value[report.memberUuid][item.key]\n        return item.key === 'achievement' ? item.itemLabels.length - value + 1 : value\n      }\n      return null\n    }\n  }))\n})\n\nconst fetchReports = async (weekString) => {\n  try {\n    const fetchedReports = await listReports(props.organizationId, weekString)\n    if (!fetchedReports) {\n      return []\n    }\n\n    return fetchedReports.map(report => {\n      return {\n        ...report,\n        projects: Array.isArray(report.projects)\n          ? report.projects.map(project => ({\n            name: project.name,\n            workItems: Array.isArray(project.workItems)\n              ? project.workItems\n              : [],\n          }))\n          : [],\n        feedbacks: Array.isArray(report.feedbacks) ? report.feedbacks : [],\n        status: report.status || 'pending',\n      }\n    }).filter(report => report !== null)\n  } catch (err) {\n    console.error('Failed to fetch reports:', err)\n    throw new Error(`Failed to fetch reports: ${err.message}`)\n  }\n}\n\nconst sortReports = (reports) => {\n  const statusOrder = { none: 0, pending: 1, feedback: 2, approved: 3 }\n  return [...reports].sort((a, b) => {\n    // ステータスでの比較\n    const statusDiff = statusOrder[a.status] - statusOrder[b.status]\n    if (statusDiff !== 0) return statusDiff\n    \n    // memberIdでの比較（第2ソートキー）\n    return a.memberId.localeCompare(b.memberId)\n  })\n}\n\nconst processReports = (fetchedReports, members) => {\n  const reportMap = new Map(fetchedReports.map(r => [r.memberUuid, r]))\n  \n  const processedReports = members.map(member => {\n    const report = reportMap.get(member.memberUuid) || {\n      memberUuid: member.memberUuid,\n      status: 'none',\n      projects: [],\n    }\n    return {\n      ...report,\n      memberId: member.id,\n      name: member.name,\n      projects: report.projects || [],\n      status: report.status || 'none',\n    }\n  })\n\n  return sortReports(processedReports)\n}\n\nconst handleFeedback = async (memberUuid) => {\n  const confirmed = await showConfirmDialog(\n    '確認',\n    'フィードバックを送信します。よろしいですか？'\n  )\n  if (!confirmed) {\n    return\n  }\n\n  const report = reports.value.find(r => r.memberUuid === memberUuid)\n  const newFeedback = newFeedbacks.value[memberUuid]\n  if (report && newFeedback && newFeedback.trim() !== '') {\n    try {\n      const feedback = {\n        content: newFeedback.trim(),\n        createdAt: new Date().toISOString()\n      }\n      \n      await submitFeedback(memberUuid, props.weekString, feedback)\n      showNotification('フィードバックを送信しました')\n      \n      // 入力欄をクリア\n      newFeedbacks.value[memberUuid] = ''\n      // ローカルの状態を更新\n      const updatedReport = {\n        ...report,\n        feedbacks: [...(report.feedbacks || []), feedback],\n        status: 'feedback'\n      }\n      reports.value = reports.value.map(r =>\n        r.memberUuid === memberUuid \n          ? updatedReport\n          : r\n      )\n      reports.value = sortReports(reports.value)\n\n    } catch (error) {\n      showError('フィードバックの送信に失敗しました', error)\n    }\n  }\n}\n\nconst handleApprove = async (memberUuid) => {\n  try {\n    const confirmMessage = newFeedbacks.value[memberUuid]?.trim() \n      ? 'フィードバックが未送信です。\\nフィードバックの入力を破棄して、報告を確認済みとします。よろしいですか？'\n      : '報告を確認済みとします。よろしいですか？'\n\n    const confirmed = await showConfirmDialog('確認', confirmMessage)\n    if (!confirmed) return\n\n    const report = reports.value.find(r => r.memberUuid === memberUuid)\n    if (!report) {\n      showError('報告の確認に失敗しました')\n      return\n    }\n\n    const now = new Date()\n    const updateData = {\n      status: 'approved',\n      approvedAt: now.toISOString()\n    }\n\n    await updateReport({\n      ...report,\n      ...updateData\n    })\n\n    // フィードバック入力欄をクリアし、パネルを閉じる\n    newFeedbacks.value[memberUuid] = ''\n    expandedPanels.value[memberUuid] = []\n\n    // トランザクション的な処理の改善\n    const updatedReports = reports.value.map(r => \n      r.memberUuid === memberUuid \n        ? { ...r, ...updateData }\n        : r\n    )\n    \n    reports.value = sortReports(updatedReports)\n    showNotification('報告を確認済みとしました')\n  } catch (error) {\n    showError('報告の確認に失敗しました', error)\n  }\n}\n\nconst handleResend = async () => {\n  const confirmed = await showConfirmDialog(\n    '確認',\n    `報告要求を［報告なし${unconfirmedCount.value}名］に送信します。\\nよろしいですか？`\n  )\n\n  if (confirmed) {\n    try {\n      await sendRequest(props.organizationId, props.weekString)\n      showNotification('報告要求を送信しました')\n    } catch (error) {\n      showError('報告要求の送信に失敗しました', error)\n    }\n  }\n}\n\nconst fetchData = async () => {\n  isLoading.value = true\n  error.value = null\n  \n  try {\n    const previousWeekString = getPreviousWeekString(props.weekString)\n    const [fetchedReports, fetchedPrevReports, members] = await Promise.allSettled([\n      fetchReports(props.weekString), \n      fetchReports(previousWeekString),\n      listMembers(props.organizationId)\n    ])\n\n    // membersの取得が必須なのでエラーチェック\n    if (members.status === 'rejected') {\n      throw new Error('メンバー情報の取得に失敗しました')\n    }\n    // 現在週のレポートは必須なのでエラーチェック\n    if (fetchedReports.status === 'rejected') {\n      throw new Error('現在の週のレポート取得に失敗しました')\n    }\n\n    reports.value = processReports(fetchedReports.value, members.value)\n    // 前週のデータは失敗を許容（フォールバック処理）\n    lastWeekRatings.value = fetchedPrevReports.status === 'fulfilled' \n      ? fetchedPrevReports.value.reduce((acc, report) => {\n        if (report?.rating) {\n          acc[report.memberUuid] = report.rating\n        }\n        return acc\n      }, {})\n      : {}\n\n    // 初期状態の設定\n    initializeState()\n    \n  } catch (err) {\n    error.value = `データの取得に失敗しました: ${err.message}`\n    showError('データの読み込みに失敗しました', err)\n  } finally {\n    isLoading.value = false\n  }\n}\n\n// 状態初期化を別関数に分離\nconst initializeState = () => {\n  // フィードバック入力欄の初期化\n  reports.value.forEach(report => {\n    newFeedbacks.value[report.memberUuid] = ''\n  })\n  \n  // その他の状態初期化\n  nextTick(() => {\n    updateExpandedPanels()\n    previousCompletionState.value = isAllCompleted.value\n    isInitialized.value = true\n    initReportRefs()\n  })\n}\n\nconst reportRefs = ref([])\n\nconst initReportRefs = () => {\n  reportRefs.value = new Array(filteredReports.value.length).fill(null)\n}\n\nwatchEffect(() => {\n  if (filteredReports.value.length > 0) {\n    initReportRefs()\n  }\n})\n\nonMounted(() => {\n  fetchData().then(() => {\n    initReportRefs()\n  })\n})\n\nconst showCompletionDialog = ref(false)\nconst isInitialized = ref(false)\nconst previousCompletionState = ref(false)\n\n// 初期化完了後のみ監視を実行し、確認済み直後のみダイアログを表示\nwatch(isAllCompleted, (currentlyComplete) => {\n  if (isInitialized.value && !props.readonly && currentlyComplete && !previousCompletionState.value) {\n    showCompletionDialog.value = true\n  }\n  previousCompletionState.value = currentlyComplete\n})\n</script>\n\n<style scoped>\n.review-form-container {\n  padding: 16px 0 24px;\n}\n\n.none-card .member-name {\n  color: #757575;\n}\n\n.default-card,\n.approved-card {\n  background-color: #f6fbff;\n}\n\n.default-card + .default-card {\n  margin-top: 24px !important;\n}\n\n.v-list-item__title {\n  font-size: 0.875rem !important;\n}\n\n.v-list-item__subtitle {\n  font-size: 0.75rem !important;\n}\n\n.v-expansion-panel-title {\n  padding: 4px 16px;\n}\n\n.v-expansion-panel--active > .v-expansion-panel-title:not(.v-expansion-panel-title--static) {\n  min-height: auto !important;\n  padding-top: 13px !important;\n  padding-bottom: 12px !important;\n}\n\n.borderless-textarea :deep(.v-field__outline) {\n  display: none;\n}\n\n@media (max-width: 600px) {\n  .review-form-container {\n    padding: 8px 0 16px;\n  }\n\n  .default-card + .default-card {\n    margin-top: 16px !important;\n  }\n}\n\n.v-btn--icon.v-btn--density-comfortable {\n  width: 36px;\n  height: 36px;\n  margin-right: 8px;\n}\n\n.v-btn--icon.v-btn--density-comfortable .v-icon {\n  font-size: 20px;\n}\n</style>","import script from \"./ReviewForm.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ReviewForm.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ReviewForm.vue?vue&type=style&index=0&id=1f6a6668&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1f6a6668\"]])\n\nexport default __exports__","<template>\n  <v-container>\n    <WeekSelector\n      function-name=\"週次報告レビュー\"\n      icon=\"mdi-calendar-multiple-check\"\n      :selected-week=\"selectedWeek\"\n      @select-week=\"handleWeekSelection\"\n      @reset=\"handleReset\"\n    />\n\n    <v-alert\n      v-if=\"!isValidWeek\"\n      type=\"error\"\n      class=\"mt-5\"\n      outlined\n    >\n      指定された週は有効範囲外です。\n    </v-alert>\n\n    <ReviewForm\n      v-if=\"selectedWeek && isValidWeek\"\n      :organization-id=\"organizationId\"\n      :week-string=\"getStringFromWeek(selectedWeek)\"\n    />\n  </v-container>\n</template>\n\n<script setup>\nimport { ref, watch } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useStore } from 'vuex'\nimport { useCalendar } from '@/composables/useCalendar'\nimport ReviewForm from '@/components/ReviewForm.vue'\nimport WeekSelector from '@/components/WeekSelector.vue'\n\nconst props = defineProps({\n  weekString: {\n    type: String,\n    default: null\n  }\n})\n\nconst { getWeekFromString, getStringFromWeek, isWeekInRange } = useCalendar()\nconst router = useRouter()\n\nconst store = useStore()\nconst organizationId = store.getters['auth/organizationId']\nconst selectedWeek = ref(null)\nconst isValidWeek = ref(true)\n\nconst handleWeekSelection = (week) => {\n  selectedWeek.value = week\n  if (week && isWeekInRange(week)) {\n    const weekString = getStringFromWeek(week)\n    if (weekString) {\n      router.push({\n        name: 'WeeklyReview',\n        params: { weekString: weekString }\n      })\n      isValidWeek.value = true\n    } else {\n      isValidWeek.value = false\n    }\n  } else {\n    router.push({ name: 'WeeklyReviewSelector' })\n    isValidWeek.value = true\n  }\n}\n\nconst handleReset = () => {\n  selectedWeek.value = null\n  isValidWeek.value = true\n  router.push({ name: 'WeeklyReviewSelector' })\n}\n\nwatch(() => props.weekString, (newWeekString) => {\n  if (newWeekString) {\n    const week = getWeekFromString(newWeekString)\n    if (week && isWeekInRange(week)) {\n      selectedWeek.value = week\n      isValidWeek.value = true\n    } else {\n      selectedWeek.value = null\n      isValidWeek.value = false\n    }\n  } else {\n    selectedWeek.value = null\n    isValidWeek.value = true\n  }\n}, { immediate: true })\n</script>","import script from \"./WeeklyReview.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WeeklyReview.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n  <v-container v-if=\"!loading\">\n    <v-row dense class=\"pb-3\">\n      <v-col>\n        <h3 class=\"organization-name text-blue-grey-darken-1\">\n          <v-icon size=\"large\" class=\"mr-1\">\n            mdi-domain\n          </v-icon>\n          {{ organization?.name }}\n        </h3>\n      </v-col>\n    </v-row>\n\n    <v-row dense class=\"pl-3 pb-4\">\n      <v-col>\n        <h3>\n          <v-icon size=\"large\" class=\"mr-1\">\n            mdi-calendar-multiple-check\n          </v-icon>\n          週次報告\n          <span v-if=\"weekString\"> ［{{ formatDateRange(getWeekFromString(weekString)) }}］</span>\n        </h3>\n      </v-col>\n    </v-row>\n\n    <ReviewForm\n      v-if=\"organizationId && weekString\"\n      :organization-id=\"organizationId\"\n      :week-string=\"weekString\"\n      :readonly=\"true\"\n    />\n  </v-container>\n</template>\n\n<script setup>\nimport { ref, inject, onMounted } from 'vue'\nimport { useCalendar } from '@/composables/useCalendar'\nimport { getOrganization } from '@/services/publicService'\nimport { verifyToken } from '@/services/secureParameterService'\nimport ReviewForm from '@/components/ReviewForm.vue'\n\nconst props = defineProps({\n  token: {\n    type: String,\n    required: true\n  }\n})\n\nconst { getWeekFromString, formatDateRange } = useCalendar()\n\nconst loading = ref(false)\nconst organizationId = ref(null)\nconst weekString = ref(null)\nconst organization = ref(null)\n\nconst showError = inject('showError')\n\nonMounted(async () => {\n  loading.value = true\n  try {\n    const result = await verifyToken(props.token)\n    organizationId.value = result.organizationId\n    weekString.value = result.weekString\n    const org = await getOrganization(organizationId.value)\n    if (org && Object.keys(org).length > 0) {\n      organization.value = org\n    }\n    loading.value = false\n  } catch (error) {\n    if (error?.response?.data === 'Token has expired') {\n      showError('リンクの有効期限が切れています', error)\n    } else {\n      showError('キー情報の取得に失敗しました', error)\n    }\n  }\n})\n</script>","import script from \"./WeeklyReportSummary.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WeeklyReportSummary.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n  <v-container class=\"organization-management-container\">\n    <v-row dense class=\"pb-4\">\n      <v-col>\n        <h3>\n          <v-icon size=\"large\" class=\"mr-1\">\n            mdi-domain\n          </v-icon>\n          組織情報管理\n        </h3>\n      </v-col>\n    </v-row>\n\n    <v-card \n      class=\"organization-card px-md-6 rounded-lg\"\n      outlined\n    >\n      <v-form ref=\"form\">\n        <v-row class=\"mt-2 px-3\">\n          <v-col cols=\"12\" sm=\"3\">\n            <v-text-field\n              v-model=\"organization.organizationId\"\n              label=\"組織ID\"\n              variant=\"plain\"\n              outlined\n              dense\n              readonly\n              hide-details\n            />\n          </v-col>\n          <v-col cols=\"12\" sm=\"9\" class=\"d-flex align-center\">\n            <v-text-field\n              v-model=\"organization.name\"\n              label=\"組織名\"\n              outlined\n              dense\n              class=\"organization-name-input flex-grow-1\"\n              :rules=\"[v => !!v || '組織名は必須です']\"\n              required\n            />\n            <div class=\"ml-2 mb-4\" style=\"width: 50px\">\n              <v-btn \n                v-if=\"isOrgNameChanged\"\n                icon \n                small \n                @click=\"handleUpdateOrganization\"\n              >\n                <v-icon color=\"teal\">mdi-check</v-icon>\n              </v-btn>\n            </div>\n          </v-col>\n        </v-row>\n\n        <v-card elevation=\"0\" class=\"pa-1\">\n          <v-alert\n            v-if=\"isMaxMembersReached\"\n            type=\"warning\"\n            density=\"compact\"\n            variant=\"tonal\"\n            class=\"mb-4\"\n          >\n            メンバー数が上限（{{ getAdminFeatures.maxMembers }}名）に達しています。<br>\n            より多くのメンバーを追加するには、プランのアップグレードが必要です。\n          </v-alert>\n\n          <v-skeleton-loader\n            v-if=\"loading\"\n            elevation=\"4\"\n            type=\"table-tbody\"\n          />\n          \n          <v-data-table\n            v-else\n            :headers=\"headers\"\n            :items=\"organization.members\"\n            hide-default-footer\n            :items-per-page=\"-1\"\n            class=\"member-table text-body-2 elevation-4 mobile-responsive-table\"\n          >\n            <template #no-data>\n              <div class=\"d-flex flex-column align-center py-6\">\n                <v-icon size=\"48\" color=\"grey-lighten-1\" class=\"mb-2\">\n                  mdi-account-group-outline\n                </v-icon>\n                <div class=\"text-grey\">メンバーが登録されていません</div>\n              </div>\n            </template>\n            <template #[`item.icon`]>\n              <v-icon size=\"x-large\">mdi-account-box-outline</v-icon>\n            </template>\n            <template #[`item.id`]=\"{ item }\">\n              <v-text-field\n                :value=\"item.id\"\n                dense\n                hide-details\n                readonly\n              >\n              </v-text-field>\n            </template>\n            <template #[`item.name`]=\"{ item }\">\n              <v-text-field\n                v-model=\"item.name\"\n                outlined\n                dense\n                hide-details\n                :readonly=\"editingMember?.id !== item.id\"\n                :error-messages=\"editingMember?.id === item.id ? editValidationErrors.name : ''\"\n              />\n            </template>\n            <template #[`item.email`]=\"{ item }\">\n              <v-text-field\n                v-model=\"item.email\"\n                outlined\n                dense\n                hide-details\n                :readonly=\"editingMember?.id !== item.id\"\n                :error-messages=\"editingMember?.id === item.id ? editValidationErrors.email : ''\"\n              >\n                <template #append>\n                  <v-icon v-if=\"item.emailConfirmed\" v-tooltip:top=\"'メール確認済み'\" color=\"success\">\n                    mdi-check-circle\n                  </v-icon>\n                  <v-icon v-else v-tooltip:top=\"'メール確認中'\" color=\"grey\">\n                    mdi-email-search-outline\n                  </v-icon>\n                </template>\n              </v-text-field>\n            </template>\n            <template #[`item.actions`]=\"{ item }\">\n              <div class=\"d-flex justify-end\">\n                <template v-if=\"editingMember?.id === item.id\">\n                  <v-btn \n                    v-tooltip:top=\"'キャンセル'\"\n                    icon \n                    small \n                    @click=\"cancelEdit\"\n                  >\n                    <v-icon>mdi-close</v-icon>\n                  </v-btn>\n                  <v-btn \n                    v-tooltip:top=\"'保存'\"\n                    icon \n                    small \n                    @click=\"handleUpdateMember(item)\"\n                  >\n                    <v-icon color=\"teal\">mdi-check</v-icon>\n                  </v-btn>\n                </template>\n                <template v-else>\n                  <v-btn \n                    v-tooltip:top=\"'編集'\"\n                    icon \n                    small \n                    @click=\"setEditingMember(item)\"\n                  >\n                    <v-icon>mdi-pencil</v-icon>\n                  </v-btn>\n                  <v-btn \n                    v-tooltip:top=\"'削除'\"\n                    icon \n                    small \n                    @click=\"handleDeleteMember(item.id)\"\n                  >\n                    <v-icon>mdi-delete</v-icon>\n                  </v-btn>\n                </template>\n              </div>\n            </template>\n          </v-data-table>\n        </v-card>\n\n        <v-row class=\"mt-4 mx-0 align-center\">\n          <v-col cols=\"12\" sm=\"2\" class=\"px-1\">\n            <v-text-field\n              v-model=\"newMember.id\"\n              label=\"ID\"\n              :maxlength=\"8\"\n              outlined\n              dense\n              color=\"primary\"\n              :error-messages=\"validationErrors.id\"\n              class=\"member-id-input mr-2\"\n            />\n          </v-col>\n          <v-col cols=\"12\" sm=\"3\" class=\"px-1\">\n            <v-text-field\n              v-model=\"newMember.name\"\n              label=\"名前\"\n              outlined\n              dense\n              color=\"primary\"\n              :error-messages=\"validationErrors.name\"\n              class=\"member-name-input mr-2\"\n            />\n          </v-col>\n          <v-col cols=\"12\" sm=\"5\" class=\"px-1\">\n            <v-text-field\n              v-model=\"newMember.email\"\n              label=\"メールアドレス\"\n              outlined\n              dense\n              color=\"primary\"\n              :error-messages=\"validationErrors.email\"\n              class=\"member-email-input mr-2\"\n            />\n          </v-col>\n          <v-col cols=\"12\" sm=\"2\" class=\"px-1\">\n            <v-btn\n              color=\"primary\"\n              :disabled=\"isSubmitDisabled\"\n              @click=\"handleAddMember\"\n            >\n              <v-icon class=\"mr-1\">mdi-account-plus</v-icon>\n              メンバー登録\n            </v-btn>\n          </v-col>\n        </v-row>\n      </v-form>\n    </v-card>\n  </v-container>\n</template>\n\n<script setup>\nimport { reactive, toRefs, ref, onMounted, inject, computed } from 'vue'\nimport { useStore } from 'vuex'\nimport { updateOrganization, getOrganization } from '@/services/organizationService'\nimport { createMember, updateMember, deleteMember, listOrganizationMembers } from '@/services/memberService'\nimport { isValidEmail } from '@/utils/string-utils'\nimport { getCurrentPlan } from '@/config/plans'\n\nconst store = useStore()\nconst form = ref(null)\nconst showConfirmDialog = inject('showConfirmDialog')\nconst showNotification = inject('showNotification')\nconst showError = inject('showError')\n\nconst state = reactive({\n  organization: {\n    organizationId: store.getters['auth/organizationId'],\n    name: '',\n    members: [],\n  },\n  newMember: { id: '', name: '', email: '' },\n  editingMember: null,\n  loading: false,\n  isNew: true,\n  validationErrors: {\n    id: '',\n    name: '',\n    email: ''\n  },\n  editValidationErrors: {\n    name: '',\n    email: ''\n  },\n  originalMember: null,\n  originalOrgName: '',\n}) \n\nconst { organization, newMember, editingMember, loading, isNew, validationErrors, editValidationErrors, originalMember, originalOrgName } = toRefs(state)\n\n// テーブルのヘッダー定義を追加\nconst headers = [\n  { title: '', key: 'icon', align: 'start', sortable: false, width: '30px' },\n  { title: 'ID', key: 'id', align: 'start', width: '100px' },\n  { title: '名前', key: 'name' },\n  { title: 'メールアドレス', key: 'email' },\n  { title: '操作', key: 'actions', align: 'center', sortable: false, width: '130px' }\n]\n\n// Inline definition of useOrganizationValidation\nconst useOrganizationValidation = (organization, newMember, validationErrors) => {\n  const validateMember = (member, errors) => {\n    let isValid = true\n\n    if (!member.name.trim()) {\n      errors.name = '名前は必須です'\n      isValid = false\n    } else {\n      errors.name = ''\n    }\n\n    if (!member.email.trim()) {\n      errors.email = 'メールアドレスは必須です'\n      isValid = false\n    } else if (!isValidEmail(member.email)) {\n      errors.email = '有効なメールアドレスを入力してください'\n      isValid = false\n    } else {\n      errors.email = ''\n    }\n\n    return isValid\n  }\n\n  const validateNewMember = () => {\n    let isValid = validateMember(newMember.value, validationErrors.value)\n\n    if (!newMember.value.id.trim()) {\n      validationErrors.value.id = 'IDは必須です'\n      isValid = false\n    } else if (organization.value.members.some(member => member.id === newMember.value.id)) {\n      validationErrors.value.id = '既に存在します'\n      isValid = false\n    } else {\n      validationErrors.value.id = ''\n    }\n\n    return isValid\n  }\n\n  return { validateMember, validateNewMember }\n}\n\nconst { validateMember, validateNewMember } = useOrganizationValidation(organization, newMember, validationErrors)\n\nconst getAdminFeatures = computed(() => {\n  const currentPlan = getCurrentPlan()\n  return currentPlan.adminFeatures\n})\n\nconst isMaxMembersReached = computed(() => {\n  const maxMembers = getAdminFeatures.value.maxMembers\n  return maxMembers !== -1 && organization.value.members.length >= maxMembers\n})\n\nconst isSubmitDisabled = computed(() => {\n  return !newMember.value.id.trim() || \n         !newMember.value.name.trim() || \n         !newMember.value.email.trim() ||\n         isMaxMembersReached.value\n})\n\n// Group related functions\nconst memberManagement = {\n  setEditingMember(member) {\n    editingMember.value = member ? { ...member } : null\n    originalMember.value = member ? { ...member } : null\n    editValidationErrors.value = { name: '', email: '' }\n  },\n\n  async handleAddMember() {\n    if (isMaxMembersReached.value) {\n      const maxMembers = getAdminFeatures.value.maxMembers\n      showError('エラー', `現在のプランでは${maxMembers === -1 ? '無制限です。' : `最大${maxMembers}名まで`}しか登録できません。`)\n      return\n    }\n    \n    if (validateNewMember()) {\n      const newMemberData = {\n        id: newMember.value.id,\n        name: newMember.value.name,\n        email: newMember.value.email,\n        organizationId: organization.value.organizationId\n      }\n      \n      try {\n        await createMember(newMemberData)\n        organization.value.members.push(newMemberData)\n        newMember.value = { id: '', name: '', email: '' }\n        validationErrors.value = { id: '', name: '', email: '' }\n        showNotification('メンバーを追加しました')\n      } catch (error) {\n        showError('メンバーの追加に失敗しました', error)\n      }\n    }\n  },\n\n  async handleUpdateMember(member) {\n    if (validateMember(member, editValidationErrors.value)) {\n      try {\n        await updateMember({\n          ...member,\n          organizationId: organization.value.organizationId\n        })\n        const index = organization.value.members.findIndex(m => m.id === member.id)\n        if (index !== -1) {\n          organization.value.members[index] = { ...member }\n        }\n        editingMember.value = null\n        originalMember.value = null\n        editValidationErrors.value = { name: '', email: '' }\n        showNotification('メンバー情報を更新しました')\n      } catch (error) {\n        showError('メンバー情報の更新に失敗しました', error)\n      }\n    }\n  },\n\n  async handleDeleteMember(memberId) {\n    const confirmed = await showConfirmDialog(\n      '削除確認', \n      'このメンバーを削除しますか？\\nこの操作は取り消せません。',\n      'error'\n    )\n    if (confirmed) {\n      const member = organization.value.members.find(m => m.id === memberId)\n      if (!member) return\n\n      try {\n        await deleteMember(member.memberUuid)\n        organization.value.members = organization.value.members.filter(m => m.id !== memberId)\n        showNotification('メンバーを削除しました')\n      } catch (error) {\n        showError('メンバーの削除に失敗しました', error)\n      }\n    }\n  },\n\n  cancelEdit() {\n    if (originalMember.value && editingMember.value) {\n      const index = organization.value.members.findIndex(m => m.id === editingMember.value.id)\n      if (index !== -1) {\n        organization.value.members[index] = { ...originalMember.value }\n      }\n    }\n    editingMember.value = null\n    originalMember.value = null\n  }\n}\n\n// 組織名編集関連の関数\nconst isOrgNameChanged = computed(() => {\n  return organization.value.name !== originalOrgName.value\n})\n\nconst handleUpdateOrganization = async () => {\n  if (!organization.value.name.trim()) return\n  \n  try {\n    await updateOrganization({\n      organizationId: organization.value.organizationId,\n      name: organization.value.name\n    })\n    originalOrgName.value = organization.value.name\n    showNotification('組織名を更新しました')\n  } catch (error) {\n    showError('組織名の更新に失敗しました', error)\n    organization.value.name = originalOrgName.value\n  }\n}\n\nonMounted(async () => {\n  const organizationId = store.getters['auth/organizationId']\n  if (organizationId) {\n    loading.value = true\n    try {\n      const [orgResult, membersResult] = await Promise.all([\n        getOrganization(organizationId),\n        listOrganizationMembers(organizationId)\n      ])\n      \n      if (orgResult && Object.keys(orgResult).length > 0) {\n        organization.value = {\n          ...orgResult,\n          members: membersResult || []\n        }\n        originalOrgName.value = orgResult.name\n        isNew.value = false\n      } else {\n        isNew.value = true\n      }\n    } catch (error) {\n      showError('組織情報の取得に失敗しました', error)\n    } finally {\n      loading.value = false\n    }\n  }\n})\n\n// Expose necessary functions and reactive references\nconst { setEditingMember, handleAddMember, handleUpdateMember, handleDeleteMember, cancelEdit } = memberManagement\n</script>\n\n<style scoped>\n.organization-management-container {\n  max-width: 960px;\n}\n\n.organization-card {\n  background-color: white;\n  padding: 0.5em 1em 1em;\n  position: relative;\n}\n\n.member-table {\n  width: 100%;\n}\n\n.member-table :deep(.v-text-field input) {\n  font-size: 0.925rem !important;\n  padding: 4px 8px !important;\n}\n\n.member-table :deep(.v-data-table-header__content) {\n  padding-left: 8px !important;\n}\n\n@media (max-width: 600px) {\n  .v-row .v-col-12 {\n    padding: 4px !important;\n  }\n\n  .v-row .v-col-12:has(button) {\n    padding: 16px !important;\n  }\n\n  .mobile-responsive-table :deep(.v-data-table__wrapper) {\n    overflow-x: hidden;\n  }\n\n  .mobile-responsive-table :deep(tr) {\n    display: grid;\n    grid-template-columns: 1fr;\n    padding: 8px;\n    border-bottom: 1px solid rgba(0, 0, 0, 0.12);\n  }\n\n  .mobile-responsive-table :deep(td) {\n    padding: 4px 8px !important;\n    border-bottom: none !important;\n    height: auto !important;\n    display: flex;\n    align-items: center;\n  }\n\n  .mobile-responsive-table :deep(thead) {\n    display: none;\n  }\n\n  .mobile-responsive-table :deep(.v-text-field) {\n    width: 100%;\n    max-width: none;\n  }\n\n  .mobile-responsive-table :deep(.v-text-field__slot input) {\n    min-width: 0;\n  }\n}\n</style>","import script from \"./OrganizationManagement.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./OrganizationManagement.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./OrganizationManagement.vue?vue&type=style&index=0&id=e17f2c9c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-e17f2c9c\"]])\n\nexport default __exports__","<template>\n  <v-container v-if=\"hasAccess\" class=\"account-management-container\">\n    <v-row dense class=\"pb-4\">\n      <v-col>\n        <h3>\n          <v-icon size=\"large\" class=\"mr-1\">\n            mdi-account-cog\n          </v-icon>\n          組織アカウント管理\n        </h3>\n      </v-col>\n    </v-row>\n\n    <v-card \n      class=\"account-card pt-4 px-md-6\"\n      outlined\n    >\n      <v-form\n        ref=\"form\"\n        v-model=\"isFormValid\"\n        @submit.prevent=\"handleSubmit\"\n      >\n        <!-- アカウントリスト -->\n        <div class=\"d-flex justify-end mb-4\">\n          <div class=\"text-subtitle-1\">\n            登録アカウント数: <span class=\"ml-1 font-weight-bold\">{{ accounts.length }} / {{ maxAccountCount }}</span>\n          </div>\n        </div>\n\n        <v-card elevation=\"0\" class=\"pa-1\">\n          <v-skeleton-loader\n            v-if=\"loading\"\n            elevation=\"4\"\n            type=\"table-tbody\"\n          />\n          \n          <v-data-table\n            v-else\n            :loading=\"loading\"\n            :headers=\"headers\"\n            :items=\"accounts\"\n            :items-per-page=\"-1\"\n            hide-default-footer\n            class=\"account-table text-body-2 elevation-4 mobile-responsive-table\"\n          >\n            <template #no-data>\n              <div class=\"d-flex flex-column align-center py-6\">\n                <v-icon size=\"48\" color=\"grey-lighten-1\" class=\"mb-2\">\n                  mdi-account-group-outline\n                </v-icon>\n                <div class=\"text-grey\">アカウントが登録されていません</div>\n              </div>\n            </template>\n            <template #[`item.organizationId`]=\"{ item }\">\n              <v-text-field\n                :value=\"item.organizationId\"\n                dense\n                hide-details\n                readonly\n              />\n            </template>\n            <template #[`item.organizationName`]=\"{ item }\">\n              <v-text-field\n                v-model=\"item.organizationName\"\n                outlined\n                dense\n                hide-details\n                :readonly=\"editingAccount?.organizationId !== item.organizationId\"\n                required\n              />\n            </template>\n            <template #[`item.email`]=\"{ item }\">\n              <v-text-field\n                v-model=\"item.email\"\n                outlined\n                dense\n                hide-details\n                :readonly=\"editingAccount?.organizationId !== item.organizationId\"\n                required\n              >\n                <template #append>\n                  <v-icon\n                    v-tooltip:top=\"getStatusLabel(item.status)\"\n                    :color=\"getStatusColor(item.status)\"\n                  >\n                    {{ getStatusIcon(item.status) }}\n                  </v-icon>\n                </template>\n              </v-text-field>\n            </template>\n            <template #[`item.actions`]=\"{ item }\">\n              <div class=\"d-flex justify-end\">\n                <v-btn\n                  v-if=\"item.status === 'FORCE_CHANGE_PASSWORD'\"\n                  v-tooltip:top=\"'招待メールを再送信'\"\n                  icon\n                  small\n                  :disabled=\"loading\"\n                  @click=\"handleResendInvitation(item)\"\n                >\n                  <v-icon>mdi-email</v-icon>\n                </v-btn>\n                <template v-if=\"editingAccount?.organizationId === item.organizationId\">\n                  <v-btn\n                    v-tooltip:top=\"'キャンセル'\"\n                    icon\n                    small\n                    :disabled=\"loading\"\n                    @click=\"cancelEdit\"\n                  >\n                    <v-icon>mdi-close</v-icon>\n                  </v-btn>\n                  <v-btn\n                    v-tooltip:top=\"'保存'\"\n                    icon\n                    small\n                    :disabled=\"loading\"\n                    @click=\"handleSaveEdit(item)\"\n                  >\n                    <v-icon color=\"success\">mdi-check</v-icon>\n                  </v-btn>\n                </template>\n                <template v-else>\n                  <v-btn\n                    v-tooltip:top=\"'編集'\"\n                    icon\n                    small\n                    :disabled=\"loading\"\n                    @click=\"handleEditAccount(item)\"\n                  >\n                    <v-icon>mdi-pencil</v-icon>\n                  </v-btn>\n                  <v-btn\n                    v-tooltip:top=\"'削除'\"\n                    icon\n                    small\n                    :disabled=\"loading\"\n                    @click=\"handleDeleteAccount(item)\"\n                  >\n                    <v-icon>mdi-delete</v-icon>\n                  </v-btn>\n                </template>\n              </div>\n            </template>\n          </v-data-table>\n        </v-card>\n\n        <!-- アカウント編集/作成フォーム -->\n        <v-row class=\"mt-4\">\n          <v-col cols=\"12\" sm=\"3\">\n            <v-text-field\n              v-model=\"organizationId\"\n              label=\"組織ID\"\n              outlined\n              dense\n              :rules=\"[validateOrganizationId]\"\n              required\n              @input=\"clearErrorMessage\"\n            />\n          </v-col>\n          <v-col cols=\"12\" sm=\"5\">\n            <v-text-field\n              v-model=\"account.organizationName\"\n              label=\"組織名\"\n              outlined\n              dense\n              :rules=\"[v => !!v || '組織名は必須です']\"\n              required\n              @input=\"validateForm\"\n            />\n          </v-col>\n          <v-col cols=\"12\" sm=\"4\">\n            <v-text-field\n              v-model=\"account.email\"\n              label=\"メールアドレス\"\n              outlined\n              dense\n              :rules=\"[\n                v => !!v || 'メールアドレスは必須です',\n                v => isValidEmail(v) || '有効なメールアドレスを入力してください'\n              ]\"\n              required\n              @input=\"validateForm\"\n            />\n          </v-col>\n        </v-row>\n\n        <v-row class=\"mt-2\">\n          <v-col cols=\"12\" class=\"d-flex justify-end\">\n            <v-btn \n              color=\"primary\" \n              type=\"submit\" \n              :loading=\"loading\"\n              :disabled=\"!isFormValid\"\n            >\n              <v-icon class=\"mr-1\">mdi-account-plus</v-icon>\n              アカウント作成\n            </v-btn>\n          </v-col>\n        </v-row>\n      </v-form>\n    </v-card>\n  </v-container>\n</template>\n\n<script setup>\nimport { ref, inject, onMounted, computed } from 'vue'\nimport { useStore } from 'vuex'\nimport { createAccount, getAccounts, deleteAccount, resendInvitation, updateAccount } from '@/services/accountService'\nimport { deleteOrganizationCompletely } from '@/services/organizationService'\nimport { isValidEmail, validateOrganizationId } from '@/utils/string-utils'\nimport { getCurrentPlan } from '@/config/plans'\n\nconst store = useStore()\nconst form = ref(null)\nconst showConfirmDialog = inject('showConfirmDialog')\nconst showNotification = inject('showNotification')\nconst showError = inject('showError')\n\nconst currentOrganizationId = store.getters['auth/organizationId']\nconst organizationId = ref('')\nconst account = ref({\n  organizationName: '',\n  email: ''\n})\nconst accounts = ref([])\nconst loading = ref(false)\nconst isFormValid = ref(false)\nconst editingAccount = ref(null)\nconst originalAccount = ref(null)\n\nconst headers = [\n  { title: '組織ID', key: 'organizationId', width: '130px' },\n  { title: '組織名', key: 'organizationName' },\n  { title: 'メールアドレス', key: 'email' },\n  { title: '操作', key: 'actions', align: 'center', sortable: false, width: '130px' }\n]\n\nconst getStatusIcon = (status) => {\n  switch (status) {\n  case 'CONFIRMED': return 'mdi-check-circle'\n  case 'FORCE_CHANGE_PASSWORD': return 'mdi-account-clock-outline'\n  default: return 'mdi-alert-circle'\n  }\n}\n\nconst getStatusColor = (status) => {\n  switch (status) {\n  case 'CONFIRMED': return 'success'\n  case 'FORCE_CHANGE_PASSWORD': return 'grey'\n  default: return 'error'\n  }\n}\n\nconst getStatusLabel = (status) => {\n  switch (status) {\n  case 'CONFIRMED': return '有効'\n  case 'FORCE_CHANGE_PASSWORD': return '初期設定待ち'\n  default: return '無効'\n  }\n}\n\nconst validateForm = async () => {\n  if (!form.value) return\n  const validation = await form.value.validate()\n  isFormValid.value = validation.valid\n}\n\nconst clearErrorMessage = () => {\n  validateForm()\n}\n\nconst loadAccounts = async () => {\n  loading.value = true\n  try {\n    accounts.value = await getAccounts({ parentOrganizationId: currentOrganizationId })\n  } catch (error) {\n    showError('アカウント情報の取得に失敗しました', error)\n  } finally {\n    loading.value = false\n  }\n}\n\n// エラーメッセージを抽出する関数を追加\nconst getErrorMessage = (error) => {\n  return error?.response?.data?.message || error?.message || ''\n}\n\nconst handleSubmit = async () => {\n  if (!isFormValid.value) return\n\n  // サブスクリプション上限チェック\n  const subscription = store.getters['auth/currentSubscription']\n  if (accounts.value.length >= subscription.accountCount) {\n    showError(`現在のプランでは${subscription.accountCount}アカウントまでしか作成できません。プランをアップグレードしてください。`)\n    return\n  }\n\n  loading.value = true\n  try {\n    await createAccount({\n      organizationId: organizationId.value,\n      ...account.value,\n      parentOrganizationId: currentOrganizationId\n    })\n    showNotification('アカウントを作成しました')\n\n    // フォームをリセット\n    organizationId.value = ''\n    account.value = { organizationName: '', email: '' }\n    isFormValid.value = false\n    // フォームの検証状態をリセット\n    if (form.value) {\n      form.value.reset()\n    }\n    \n    await loadAccounts()\n\n  } catch (error) {\n    const errorDetail = getErrorMessage(error)\n    const message = `アカウントの作成に失敗しました${errorDetail ? `（${errorDetail}）` : ''}`\n    showError(message, error)\n  } finally {\n    loading.value = false\n  }\n}\n\nconst handleDeleteAccount = async (accountItem) => {\n  const organizationName = accountItem.organizationName || accountItem.organizationId || '未設定'\n  \n  const confirmed = await showConfirmDialog(\n    '削除確認',\n    `${organizationName}のアカウントと組織情報を削除しますか？\\nこの操作は取り消せません。`,\n    'error'\n  )\n  if (!confirmed) return\n\n  loading.value = true\n  try {\n    // Cognitoユーザーを削除\n    await deleteAccount(accountItem.organizationId, accountItem.email)\n    // 組織情報とすべての関連データを削除\n    await deleteOrganizationCompletely(accountItem.organizationId)\n\n    showNotification('アカウントと組織情報を削除しました')\n    await loadAccounts()\n  } catch (error) {\n    showError('アカウントの削除に失敗しました', error)\n  } finally {\n    loading.value = false\n  }\n}\n\nconst handleResendInvitation = async (accountItem) => {\n  try {\n    await resendInvitation(accountItem.email)\n    showNotification('招待メールを再送信しました')\n  } catch (error) {\n    showError('招待メールの再送信に失敗しました', error)\n  }\n}\n\nconst handleEditAccount = (item) => {\n  editingAccount.value = { ...item }\n  originalAccount.value = { ...item }\n}\n\nconst handleSaveEdit = async (item) => {\n  try {\n    // メールアドレスのバリデーション\n    if (!isValidEmail(item.email)) {\n      showError('有効なメールアドレスを入力してください')\n      return\n    }\n    // 組織名の必須チェック\n    if (!item.organizationName) {\n      showError('組織名は必須です')\n      return\n    }\n\n    await updateAccount({\n      organizationId: item.organizationId,\n      organizationName: item.organizationName,\n      email: item.email,\n      oldEmail: editingAccount.value.email\n    })\n    showNotification('アカウント情報を更新しました')\n    editingAccount.value = null\n    originalAccount.value = null\n  } catch (error) {\n    const errorDetail = getErrorMessage(error)\n    const message = `アカウントの更新に失敗しました${errorDetail ? `（${errorDetail}）` : ''}`\n    showError(message, error)\n  }\n}\n\nconst cancelEdit = () => {\n  if (originalAccount.value && editingAccount.value) {\n    const index = accounts.value.findIndex(a => a.organizationId === editingAccount.value.organizationId)\n    if (index !== -1) {\n      accounts.value[index] = { ...originalAccount.value }\n    }\n  }\n  editingAccount.value = null\n  originalAccount.value = null\n}\n\nconst maxAccountCount = computed(() => {\n  return store.getters['auth/currentSubscription'].accountCount\n})\n\n// アクセス権限チェック\nconst hasAccess = computed(() => {\n  const isParentAccount = store.getters['auth/isParentAccount']\n  const hasAccountManagement = getCurrentPlan().adminFeatures.accountManagement\n  return isParentAccount && hasAccountManagement\n})\n\n// コンポーネントマウント時の処理\nonMounted(async () => {\n  if (!hasAccess.value) {\n    showError('この機能は親組織アカウントのみが利用できます')\n    return\n  }\n  await loadAccounts()\n})\n</script>\n\n<style scoped>\n.account-management-container {\n  max-width: 960px;\n  font-size: 0.875rem;\n}\n\n.account-card {\n  background-color: white;\n  border-radius: 0.5rem;\n  padding: 0.5em 1em 1em;\n}\n\n.account-table {\n  width: 100%;\n}\n\n.account-table :deep(.v-text-field input) {\n  font-size: 0.925rem !important;\n  padding: 4px 8px !important;\n}\n\n.account-table :deep(.v-data-table-header__content) {\n  padding-left: 8px !important;\n}\n\n@media (max-width: 600px) {\n  .v-row .v-col-12 {\n    padding: 4px !important;\n  }\n\n  .v-row .v-col-12:has(button) {\n    padding: 16px !important;\n  }\n\n  .mobile-responsive-table :deep(.v-data-table__wrapper) {\n    overflow-x: hidden;\n  }\n\n  .mobile-responsive-table :deep(tr) {\n    display: grid;\n    grid-template-columns: 1fr;\n    padding: 8px;\n    border-bottom: 1px solid rgba(0, 0, 0, 0.12);\n  }\n\n  .mobile-responsive-table :deep(td) {\n    padding: 4px 8px !important;\n    border-bottom: none !important;\n    height: auto !important;\n    display: flex;\n    align-items: center;\n  }\n\n  .mobile-responsive-table :deep(thead) {\n    display: none;\n  }\n\n  .mobile-responsive-table :deep(.v-text-field) {\n    width: 100%;\n    max-width: none;\n  }\n\n  .mobile-responsive-table :deep(.v-text-field__slot input) {\n    min-width: 0;\n  }\n}\n</style>","import script from \"./OrganizationAccount.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./OrganizationAccount.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./OrganizationAccount.vue?vue&type=style&index=0&id=03cd3612&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-03cd3612\"]])\n\nexport default __exports__","import { apiClient } from './apiClient'\n\nexport const checkEmailVerification = async (email) => {\n  return apiClient.post('/ses/check', { email })\n}\n\nexport const verifyEmailAddress = async (email) => {\n  return apiClient.post('/ses/verify', { email })\n}","import { initializeApp } from 'firebase/app'\n\nconst firebaseConfig = {\n  apiKey: process.env.VUE_APP_FIREBASE_API_KEY,\n  authDomain: 'fluxweek-b9d9a.firebaseapp.com',\n  projectId: 'fluxweek-b9d9a',\n  storageBucket: 'fluxweek-b9d9a.appspot.com',\n  messagingSenderId: '940087264635',\n  appId: '1:940087264635:web:3bc11acbabfe4439fce9de',\n  measurementId: 'G-V6WMXXDDKX'\n}\n\nexport const app = initializeApp(firebaseConfig)","<template>\n  <v-container class=\"pa-0\">\n    <v-row align=\"center\" justify=\"start\" no-gutters>\n      <v-col cols=\"12\">\n        <v-switch\n          v-if=\"notificationStatus === 'default' || notificationStatus === 'granted'\"\n          :model-value=\"effectiveSubscriptionState\"\n          color=\"primary\"\n          hide-details\n          inset\n          :disabled=\"!isServiceWorkerReady\"\n          @update:model-value=\"togglePushNotification\"\n        >\n          <template #prepend>\n            <v-icon\n              :color=\"iconColor\"\n              class=\"mr-1\"\n              size=\"large\"\n            >\n              {{ iconName }}\n            </v-icon>\n            {{ statusText }}\n          </template>\n        </v-switch>\n        <div v-else-if=\"notificationStatus === 'denied'\">\n          <span class=\"text-error mx-2\">プッシュ通知が拒否されています。</span>\n          <v-btn\n            color=\"grey\"\n            small\n            @click=\"showInstructions\"\n          >\n            設定変更方法を表示\n          </v-btn>\n        </div>\n      </v-col>\n      \n      <v-col cols=\"12\" class=\"mt-2\">\n        <div class=\"text-body-2 text-grey pl-3\">\n          <div class=\"d-flex align-center mb-1\">\n            <v-icon size=\"small\" class=\"mr-2\" :color=\"isSubscribed ? 'success' : 'grey'\">\n              {{ isSubscribed ? 'mdi-check-circle' : 'mdi-circle-outline' }}\n            </v-icon>\n            <span>通知設定: {{ isSubscribed ? '登録済み' : '未登録' }}</span>\n          </div>\n          <div class=\"d-flex align-center mb-1\">\n            <v-icon size=\"small\" class=\"mr-2\" :color=\"isServiceWorkerReady ? 'success' : 'grey'\">\n              {{ isServiceWorkerReady ? 'mdi-check-circle' : 'mdi-progress-clock' }}\n            </v-icon>\n            <span>システム準備状況: {{ isServiceWorkerReady ? '完了' : '準備中' }}</span>\n          </div>\n          <div class=\"d-flex align-center\">\n            <v-icon size=\"small\" class=\"mr-2\" :color=\"notificationStatus === 'granted' ? 'success' : 'grey'\">\n              {{ notificationStatus === 'granted' ? 'mdi-check-circle' : 'mdi-alert-circle' }}\n            </v-icon>\n            <span>ブラウザの許可: {{ \n              notificationStatus === 'granted' ? '許可済み' :\n              notificationStatus === 'denied' ? '拒否' :\n              '未設定'\n            }}</span>\n          </div>\n        </div>\n      </v-col>\n\n      <v-col v-if=\"hasError\" cols=\"11\">\n        <div class=\"v-input--error\">\n          <div class=\"v-messages\">\n            <div class=\"v-messages__message pl-4\">\n              {{ errorMessage }}\n            </div>\n          </div>\n        </div>\n      </v-col>\n      <v-col v-if=\"hasError\" cols=\"1\" class=\"d-flex justify-end\">\n        <v-btn\n          v-if=\"isServiceWorkerReady\" \n          icon=\"mdi-reload\"\n          color=\"error\"\n          density=\"comfortable\"\n          @click=\"resetServiceWorker\"\n        >\n        </v-btn>\n      </v-col>\n      <v-col v-if=\"!isOnline\" cols=\"auto\">\n        <v-chip color=\"warning\" small>\n          オフライン\n        </v-chip>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n<script setup>\nimport { ref, computed, watch, onMounted, onUnmounted, nextTick } from 'vue'\nimport { useStore } from 'vuex'\nimport { getMessaging, getToken } from 'firebase/messaging'\nimport { app } from '@/config/firebase-config'\nimport { contextPath } from '@/config/environment'\nimport { registerPushSubscription, removePushSubscription, getPushSubscription } from '@/services/organizationService'\n\nconst store = useStore()\nconst isSubscribed = ref(false)\nconst notificationStatus = ref('default')\nconst isServiceWorkerReady = ref(false)\nconst hasError = ref(false)\nconst errorMessage = ref('')\nconst isOnline = ref(navigator.onLine)\nconst statusCheckInterval = ref(null)\n\nconst organizationId = store.getters['auth/organizationId']\nconst adminId = store.getters['auth/cognitoUserSub']\n\nconst iconName = computed(() => {\n  return isServiceWorkerReady.value ? (effectiveSubscriptionState.value ? 'mdi-bell-outline' : 'mdi-bell-off-outline') : 'mdi-progress-clock'\n})\n\nconst iconColor = computed(() => {\n  return isServiceWorkerReady.value ? (effectiveSubscriptionState.value ? 'success' : 'grey') : 'grey'\n})\n\nconst statusText = computed(() => {\n  return isServiceWorkerReady.value ? (effectiveSubscriptionState.value ? 'プッシュ通知: 有効' : 'プッシュ通知: 無効') : 'Service Worker初期化中'\n})\n\nconst effectiveSubscriptionState = computed(() => {\n  return notificationStatus.value === 'granted' && isSubscribed.value\n})\n\nwatch(isServiceWorkerReady, async (newValue) => {\n  if (newValue) {\n    await checkNotificationStatus()\n    await checkSubscription()\n    await nextTick()\n  }\n})\n\nonMounted(() => {\n  window.addEventListener('online', updateOnlineStatus)\n  window.addEventListener('offline', updateOnlineStatus)\n\n  nextTick(async () => {\n    try {\n      await initializeServiceWorker()\n    } catch (error) {\n      console.error('Failed to initialize Service Worker:', error)\n    }\n  })\n})\n\nonUnmounted(() => {\n  window.removeEventListener('online', updateOnlineStatus)\n  window.removeEventListener('offline', updateOnlineStatus)\n  if (statusCheckInterval.value) {\n    clearInterval(statusCheckInterval.value)\n  }\n})\n\nconst updateOnlineStatus = () => {\n  isOnline.value = navigator.onLine\n}\n\nconst initializeServiceWorker = async () => {\n  if ('serviceWorker' in navigator) {\n    try {\n      console.log('Registering Service Worker...')\n      const swPath = `${contextPath}firebase-messaging-sw.js`\n      const registration = await navigator.serviceWorker.register(swPath, {\n        scope: contextPath\n      })\n      console.log('Service Worker registered successfully:', registration)\n\n      await waitForServiceWorkerReady(registration)\n      \n      isServiceWorkerReady.value = true\n      clearError()\n      \n      await nextTick()\n      \n    } catch (error) {\n      console.error('Service Worker initialization failed:', error)\n      setError(`Service Workerの初期化に失敗しました: ${error.message}`)\n      isServiceWorkerReady.value = false\n      await nextTick()\n      showReloadPrompt()\n    }\n  } else {\n    console.warn('This browser does not support Service Workers')\n    setError('このブラウザはService Workerをサポートしていません。')\n    isServiceWorkerReady.value = false\n  }\n}\n\nconst showReloadPrompt = () => {\n  // ユーザーに一度だけ再読み込みを確認する\n  if (!window.hasShownReloadPrompt) {\n    window.hasShownReloadPrompt = true\n    if (confirm('Service Workerの初期化に失敗しました。ページを再読み込みしますか？')) {\n      window.location.reload()\n    }\n  }\n}\n\nconst waitForServiceWorkerReady = async (registration) => {\n  return new Promise((resolve, reject) => {\n    const timeout = setTimeout(() => {\n      reject(new Error('Service Worker ready timeout'))\n    }, 30000)\n\n    const checkState = () => {\n      if (registration.active && navigator.serviceWorker.controller) {\n        clearTimeout(timeout)\n        resolve()\n      } else {\n        setTimeout(checkState, 1000)\n      }\n    }\n\n    if (registration.active && navigator.serviceWorker.controller) {\n      clearTimeout(timeout)\n      resolve()\n    } else {\n      registration.addEventListener('updatefound', checkState)\n      navigator.serviceWorker.addEventListener('controllerchange', checkState)\n      checkState()\n    }\n  })\n}\n\nconst checkNotificationStatus = async () => {\n  if ('Notification' in window) {\n    notificationStatus.value = Notification.permission\n    console.log('Notification status checked:', notificationStatus.value)\n  }\n}\n\nconst checkSubscription = async () => {\n  const endpoint = await getStoredEndpointArn()\n  if (endpoint) {\n    try {\n      const serverEndpoint = await getPushSubscription(organizationId, adminId)\n      isSubscribed.value = endpoint === serverEndpoint\n      console.log('Subscription checked, isSubscribed:', isSubscribed.value)\n    } catch (error) {\n      console.error('Failed to check subscription on server:', error)\n      setError('サーバーでの購読確認に失敗しました。')\n    }\n  } else {\n    isSubscribed.value = false\n  }\n}\n\nconst togglePushNotification = async () => {\n  if (!isServiceWorkerReady.value) {\n    setError('Service Workerの準備ができていません。しばらく待ってから再試行してください。')\n    return\n  }\n  \n  clearError()\n  if (notificationStatus.value === 'default') {\n    const permission = await Notification.requestPermission()\n    notificationStatus.value = permission\n    if (permission === 'granted') {\n      await subscribeToPush()\n    } else {\n      isSubscribed.value = false\n    }\n  } else if (notificationStatus.value === 'granted') {\n    if (isSubscribed.value) {\n      await unsubscribeFromPush()\n    } else {\n      await subscribeToPush()\n    }\n  }\n  await checkSubscription()\n}\n\nconst subscribeToPush = async () => {\n  try {\n    const messaging = getMessaging(app)\n    const registration = await navigator.serviceWorker.getRegistration(contextPath)\n    const fcmToken = await getToken(messaging, { \n      serviceWorkerRegistration: registration \n    })\n    \n    if (fcmToken) {\n      await saveSubscription(fcmToken)\n      isSubscribed.value = true\n    } else {\n      setError('FCMトークンの取得に失敗しました。')\n    }\n  } catch (error) {\n    console.error('Failed to subscribe to push notifications:', error)\n    setError(`プッシュ通知の購読に失敗しました: ${error.message}`)\n  }\n}\n\nconst unsubscribeFromPush = async () => {\n  const endpoint = await getStoredEndpointArn()\n  if (endpoint) {\n    try {\n      await deleteSubscription()\n      isSubscribed.value = false\n    } catch (error) {\n      console.error('Failed to unsubscribe from push notifications:', error)\n      setError('プッシュ通知の購読解除に失敗しました。')\n    }\n  }\n}\n\nconst saveSubscription = async (fcmToken) => {\n  try {\n    const response = await registerPushSubscription(fcmToken, organizationId, adminId)\n    await storeEndpointArn(response.endpointArn)\n  } catch (error) {\n    console.error('Failed to save FCM token on server:', error)\n    throw error\n  }\n}\n\nconst deleteSubscription = async () => {\n  try {\n    await removePushSubscription(organizationId, adminId)\n    await removeStoredEndpointArn()\n  } catch (error) {\n    console.error('Failed to delete subscription on server:', error)\n    throw error\n  }\n}\n\nconst storeEndpointArn = async (endpointArn) => {\n  localStorage.setItem('endpointArn', endpointArn)\n}\n\nconst getStoredEndpointArn = async () => {\n  return localStorage.getItem('endpointArn')\n}\n\nconst removeStoredEndpointArn = async () => {\n  localStorage.removeItem('endpointArn')\n}\n\nconst setError = (message) => {\n  hasError.value = true\n  errorMessage.value = message\n}\n\nconst clearError = () => {\n  hasError.value = false\n  errorMessage.value = ''\n}\n\nconst showInstructions = () => {\n  alert(`ブラウザの通知設定を変更する方法:\n  1. ブラウザの設定/環境設定を開きます。\n  2. プライバシーとセキュリティ（または類似の項目）を探します。\n  3. サイトの設定（または権限）を見つけます。\n  4. 通知の設定を探し、このサイトの権限を「許可」に変更します。\n  5. ページを再読み込みしてください。`)\n}\n\nconst clearServiceWorkerCache = async () => {\n  if ('caches' in window) {\n    const cacheNames = await caches.keys()\n    await Promise.all(cacheNames.map(cacheName => caches.delete(cacheName)))\n    console.log('Service Worker caches cleared')\n  }\n}\n\nconst resetServiceWorker = async () => {\n  if ('serviceWorker' in navigator) {\n    const registrations = await navigator.serviceWorker.getRegistrations()\n    for (let registration of registrations) {\n      await registration.unregister()\n    }\n    await clearServiceWorkerCache()\n    window.location.reload()\n  }\n}\n</script>","import script from \"./PushNortification.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PushNortification.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n  <v-container class=\"report-settings-container\">\n    <v-row dense class=\"pb-4\">\n      <v-col>\n        <h3>\n          <v-icon size=\"large\" class=\"mr-1\">mdi-calendar-clock</v-icon>\n          週次報告設定\n        </h3>\n      </v-col>\n    </v-row>\n\n    <v-card \n      v-if=\"loading\"\n      class=\"pa-6 rounded-lg\"\n      outlined\n    >\n      <v-skeleton-loader\n        type=\"text, chip@2, ossein, text, paragraph, button\"\n      />\n    </v-card>\n\n    <v-tabs\n      v-if=\"!loading\"\n      v-model=\"activeTab\"\n      class=\"mb-4\"\n    >\n      <v-tab value=\"request\" class=\"text-body-1\">報告依頼設定</v-tab>\n      <v-tab value=\"notification\" class=\"text-body-1\">通知設定</v-tab>\n      <v-tab value=\"advisor\" class=\"text-body-1\">アドバイザー設定</v-tab>\n    </v-tabs>\n\n    <v-card-text v-if=\"!loading\" class=\"pa-0\">\n      <v-tabs-window \n        v-model=\"activeTab\" \n        class=\"elevation-4\"\n      >\n        <v-tabs-window-item value=\"request\">\n          <v-card class=\"setting-card rounded-lg\" outlined>\n            <v-card-text class=\"px-6 pt-6\">\n              <v-form ref=\"form\" v-model=\"isFormValid\" @submit.prevent=\"handleSubmit\">\n                <v-row>\n                  <v-col cols=\"12\" md=\"6\">\n                    <v-text-field\n                      v-model=\"reportSettings.sender\"\n                      label=\"送信元メールアドレス\"\n                      outlined\n                      dense\n                      hide-details=\"auto\"\n                      :rules=\"emailRules\"\n                      :color=\"emailVerificationStatus === 'Success' ? 'success' : ''\"\n                      :error=\"emailVerificationStatus === 'Failed'\"\n                    >\n                      <template #append>\n                        <v-icon \n                          v-tooltip:top=\"emailVerificationStatusText\"\n                          :color=\"emailVerificationStatusColor\"\n                        >\n                          {{ emailVerificationStatusIcon }}\n                        </v-icon>\n                      </template>\n                    </v-text-field>\n                  </v-col>\n                  <v-col cols=\"12\" md=\"6\">\n                    <div class=\"d-flex align-center mt-2\">\n                      <v-btn\n                        v-if=\"isValidEmail(reportSettings.sender) && emailVerificationStatus !== 'Success' && emailVerificationStatus !== 'Checking'\"\n                        color=\"secondary\"\n                        small\n                        class=\"mr-2\"\n                        prepend-icon=\"mdi-card-account-mail\"\n                        :loading=\"verifyingEmail\"\n                        @click=\"verifyEmail(reportSettings.sender)\"\n                      >\n                        メールアドレスを検証する\n                      </v-btn>\n                      <v-btn\n                        v-if=\"isValidEmail(reportSettings.sender) && emailVerificationStatus === 'Pending'\"\n                        color=\"info\"\n                        small\n                        variant=\"outlined\"\n                        prepend-icon=\"mdi-refresh\"\n                        @click=\"checkEmailVerificationStatus(reportSettings.sender)\"\n                      >\n                        検証状態を確認\n                      </v-btn>\n                    </div>\n                  </v-col>\n                  <v-col cols=\"12\" md=\"6\">\n                    <v-text-field\n                      v-model=\"reportSettings.senderName\"\n                      label=\"送信者名\"\n                      outlined\n                      dense\n                      hide-details=\"auto\"\n                      :rules=\"senderNameRules\"\n                    >\n                    </v-text-field>\n                  </v-col>\n                </v-row>\n\n                <v-card outlined class=\"mt-8\">\n                  <v-card-title>自動送信設定</v-card-title>\n                  <v-card-text>\n                    <v-row>\n                      <v-col cols=\"12\" md=\"2\" class=\"pl-5 d-flex align-center\">\n                        <span class=\"text-body-1\">報告対象週</span>\n                      </v-col>\n                      <v-col cols=\"12\" md=\"10\" class=\"d-flex justify-start align-center\">\n                        <span\n                          v-for=\"option in reportWeekOptions\"\n                          :key=\"option.value\"\n                          class=\"mr-4\"\n                        >\n                          <v-radio-group v-model=\"reportSettings.reportWeek\" row dense hide-details>\n                            <v-radio \n                              :label=\"option.text\" \n                              :value=\"option.value\"\n                              :color=\"reportSettings.reportWeek === option.value ? 'primary' : 'grey'\"\n                            ></v-radio>\n                          </v-radio-group>\n                        </span>\n                      </v-col>\n                    </v-row>\n\n                    <v-row>\n                      <v-col cols=\"12\" class=\"py-1\">\n                        <div class=\"d-flex align-center justify-start\">\n                          <div class=\"d-flex align-center\">\n                            <v-icon\n                              :color=\"reportSettings.requestEnabled ? 'success' : 'grey'\"\n                              class=\"mr-2\"\n                              size=\"large\"\n                            >\n                              {{ reportSettings.requestEnabled ? 'mdi-timer-outline' : 'mdi-timer-off-outline' }}\n                            </v-icon>\n                            <span class=\"text-subtitle-1\">\n                              <span class=\"d-none d-sm-inline\">報告依頼の自動送信は</span>現在\n                              <strong>{{ reportSettings.requestEnabled ? '有効' : '無効' }}</strong>\n                              です\n                            </span>\n                          </div>\n                          <span class=\"mx-3\"></span>\n                          <v-switch\n                            v-model=\"reportSettings.requestEnabled\"\n                            color=\"primary\"\n                            class=\"mr-3\"\n                            density=\"compact\"\n                            inset\n                            hide-details\n                          ></v-switch>\n                        </div>\n                      </v-col>\n                    </v-row>\n\n                    <v-row>\n                      <v-col cols=\"12\" sm=\"4\">\n                        <v-select\n                          v-model=\"reportSettings.requestDayOfWeek\"\n                          :items=\"daysOfWeek\"\n                          label=\"送信曜日\"\n                          item-title=\"text\"\n                          item-value=\"value\"\n                          outlined\n                          dense\n                          hide-details=\"auto\"\n                          :disabled=\"!reportSettings.requestEnabled\"\n                        ></v-select>\n                      </v-col>\n                      <v-col cols=\"12\" sm=\"4\">\n                        <v-select\n                          v-model=\"reportSettings.requestTime\"\n                          :items=\"hours\"\n                          label=\"送信時間\"\n                          item-title=\"text\"\n                          item-value=\"value\"\n                          outlined\n                          dense\n                          hide-details=\"auto\"\n                          :disabled=\"!reportSettings.requestEnabled\"\n                          :rules=\"[v => v !== null || '時間を選択してください']\"\n                        >\n                          <template #prepend-inner>\n                            <v-icon>mdi-clock-outline</v-icon>\n                          </template>\n                        </v-select>\n                      </v-col>\n                    </v-row>\n                  </v-card-text>\n                </v-card>\n\n                <v-row class=\"mt-2\">\n                  <v-col cols=\"12\" class=\"d-flex justify-end\">\n                    <v-btn\n                      color=\"primary\"\n                      type=\"submit\"\n                      :loading=\"loading\"\n                      :disabled=\"!isFormValid || !isFormChanged\"\n                    >\n                      <v-icon class=\"mr-1\">mdi-check</v-icon>\n                      更新する\n                    </v-btn>\n                  </v-col>\n                </v-row>\n              </v-form>\n            </v-card-text>\n          </v-card>\n        </v-tabs-window-item>\n\n        <v-tabs-window-item value=\"notification\" eager>\n          <v-card class=\"setting-card rounded-lg\">\n            <v-card-text class=\"px-6\">\n              <template v-if=\"currentPlan.adminFeatures.notifications\">\n                <p class=\"text-body-1 my-2\">\n                  通知を有効にすると週次報告が送信されたときに通知を受け取ることができます。\n                </p>\n                <div>\n                  <v-switch\n                    v-model=\"isNotifyByEmail\"\n                    color=\"primary\"\n                    hide-details\n                    inset\n                    @click=\"toggleMailNotification\"\n                  >\n                    <template #prepend>\n                      <v-icon\n                        :color=\"isNotifyByEmail ? 'success' : 'grey'\"\n                        class=\"mr-1\"\n                        size=\"large\"\n                      >\n                        {{ isNotifyByEmail ? 'mdi-email-outline' : 'mdi-email-off-outline' }}\n                      </v-icon>\n                      {{ isNotifyByEmail ? 'メール通知: 有効' : 'メール通知: 無効' }}\n                    </template>\n                  </v-switch>\n                </div>\n\n                <PushNortification></PushNortification>\n              </template>\n              <template v-else>\n                <v-alert\n                  type=\"info\"\n                  variant=\"tonal\"\n                  class=\"mt-4 rounded-lg\"\n                >\n                  <div class=\"d-flex align-center gap-4\">\n                    <span>通知機能はプロプラン以上でご利用いただけます。</span>\n                    <v-spacer></v-spacer>\n                    <v-btn\n                      v-if=\"!isMobile\"\n                      color=\"primary\"\n                      @click=\"router.push({ name: 'Billing' })\"\n                    >\n                      プランをアップグレード\n                    </v-btn>\n                  </div>\n                </v-alert>\n              </template>\n            </v-card-text>\n          </v-card>\n        </v-tabs-window-item>\n\n        <v-tabs-window-item value=\"advisor\">\n          <v-card class=\"setting-card rounded-lg\">\n            <v-card-text class=\"px-6\">\n              <template v-if=\"currentPlan.adminFeatures.advisorSettings\">\n                <p class=\"mt-2 mb-4\">\n                  メンバーは選択したアドバイザーから週次報告に対するアドバイスを受け取ることができます。\n                </p>\n                <p \n                  v-if=\"!hasSelectedAdvisor\"\n                  class=\"text-caption mb-3 text-warning\" \n                >\n                  <v-icon color=\"warning\" size=\"small\" class=\"mr-1\">mdi-alert-circle</v-icon>\n                  少なくとも1つのアドバイザーを選択してください\n                </p>\n                <v-row>\n                  <v-col \n                    v-for=\"(advisor, key) in availableAdvisors\"\n                    :key=\"key\"\n                    cols=\"12\"\n                    sm=\"6\"\n                    md=\"3\"\n                  >\n                    <v-card\n                      v-tooltip:bottom=\"advisor.description\"\n                      variant=\"outlined\"\n                      :class=\"['advisor-card', { 'advisor-selected': selectedAdvisors.includes(key) }]\"\n                      :elevation=\"selectedAdvisors.includes(key) ? 4 : 0\"\n                      @click=\"toggleAdvisor(key)\"\n                    >\n                      <v-img\n                        :src=\"advisor.image\"\n                        height=\"120\"\n                        fill\n                        class=\"advisor-image mx-6 mt-4\"\n                      ></v-img>\n                      <v-card-item>\n                        <v-card-title class=\"text-subtitle-2 text-center\">\n                          {{ advisor.title }}\n                        </v-card-title>\n                      </v-card-item>\n                    </v-card>\n                  </v-col>\n                </v-row>\n                <div class=\"d-flex justify-end mt-4\">\n                  <v-btn\n                    color=\"primary\"\n                    :loading=\"isSaving\"\n                    :disabled=\"!hasSelectedAdvisor || !isAdvisorSettingsChanged\"\n                    @click=\"saveAdvisorSettings\"\n                  >\n                    <v-icon class=\"mr-1\">mdi-check</v-icon>\n                    更新する\n                  </v-btn>\n                </div>\n              </template>\n              <template v-else>\n                <v-alert\n                  type=\"info\"\n                  variant=\"tonal\"\n                  class=\"mt-4 rounded-lg\"\n                >\n                  <div class=\"d-flex align-center gap-4\">\n                    <span>アドバイザー設定はプロプラン以上でご利用いただけます。</span>\n                    <v-spacer></v-spacer>\n                    <v-btn\n                      v-if=\"!isMobile\"\n                      color=\"primary\"\n                      @click=\"router.push({ name: 'Billing' })\"\n                    >\n                      プランをアップグレード\n                    </v-btn>\n                  </div>\n                </v-alert>\n              </template>\n            </v-card-text>\n          </v-card>\n        </v-tabs-window-item>\n      </v-tabs-window>\n    </v-card-text>\n  </v-container>\n</template>\n\n<script setup>\nimport { ref, reactive, computed, watch, onMounted, inject } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useStore } from 'vuex'\nimport { useResponsive } from '@/composables/useResponsive'\nimport { getOrganization, updateOrganization, updateOrganizationFeatures } from '@/services/organizationService'\nimport { checkEmailVerification, verifyEmailAddress } from '@/services/sesService'\nimport { advisorRoles, defaultAdvisors } from '@/services/bedrockService'\nimport { isValidEmail, validateSenderName } from '@/utils/string-utils'\nimport { getCurrentPlan } from '@/config/plans'\nimport PushNortification from '@/components/PushNortification.vue'\n\nconst router = useRouter()\nconst store = useStore()\nconst showNotification = inject('showNotification')\nconst showError = inject('showError')\n\nconst form = ref(null)\nconst loading = ref(false)\nconst isFormValid = ref(false)\nconst activeTab = ref('request')\n\nconst currentPlan = computed(() => getCurrentPlan())\nconst organization = ref(null)\nconst organizationId = store.getters['auth/organizationId']\nconst { isMobile } = useResponsive()\n\nconst useEmailVerification = () => {\n  const status = ref('Pending')\n  const verifying = ref(false)\n\n  const statusColor = computed(() => ({\n    Success: 'success', Failed: 'error', Pending: 'grey', Checking: 'grey', Error: 'error'\n  }[status.value] || 'grey'))\n\n  const statusIcon = computed(() => ({\n    Success: 'mdi-check-circle', Failed: 'mdi-alert-circle', Pending: 'mdi-progress-clock',\n    Checking: 'mdi-progress-clock', Error: 'mdi-alert'\n  }[status.value] || 'mdi-progress-clock'))\n\n  const statusText = computed(() => ({\n    Success: '検証済み', Failed: '未検証', Pending: '検証中', Checking: '検証中', Error: 'エラー'\n  }[status.value] || '検証中'))\n\n  const check = async (email) => {\n    if (!email || !isValidEmail(email)) {\n      status.value = 'Failed'\n      return\n    }\n    try {\n      status.value = 'Checking'\n      const result = await checkEmailVerification(email)\n      status.value = result.status\n      // 直接の check 呼び出し時のみ通知を表示\n      if (result.status === 'Pending' && !verifying.value) {\n        showNotification('メールアドレスの検証が保留中です。メールボックスを確認してください。', 'info')\n      }\n    } catch (error) {\n      status.value = 'Error'\n      showError('メールアドレスの検証状態の確認中にエラーが発生しました。', error)\n    }\n  }\n\n  const verify = async (email) => {\n    if (!email || !isValidEmail(email)) {\n      showError('有効なメールアドレスを入力してください。')\n      return\n    }\n    verifying.value = true\n    try {\n      await verifyEmailAddress(email)\n      showNotification('検証メールを送信しました。メールを確認して検証を完了してください。', 'info')\n      await check(email) // check メソッドを呼び出すが、verifying フラグにより通知は表示されない\n    } catch (error) {\n      showError('メールアドレスの検証に失敗しました。', error)\n    } finally {\n      verifying.value = false\n    }\n  }\n\n  return { status, statusColor, statusIcon, statusText, check, verify, verifying }\n}\n\nconst {\n  status: emailVerificationStatus,\n  statusColor: emailVerificationStatusColor,\n  statusIcon: emailVerificationStatusIcon,\n  statusText: emailVerificationStatusText,\n  check: checkEmailVerificationStatus,\n  verify: verifyEmail,\n  verifying: verifyingEmail,\n} = useEmailVerification()\n\nconst reportSettings = reactive({\n  requestEnabled: true,\n  sender: '',\n  senderName: '',\n  requestDayOfWeek: 'monday',\n  requestTime: '06:00',\n  reportWeek: -1,\n})\n\nconst originalSettings = ref(null)\n\nconst isFormChanged = computed(() =>\n  originalSettings.value && JSON.stringify(reportSettings) !== JSON.stringify(originalSettings.value)\n)\n\nconst emailRules = [\n  v => !!v || 'メールアドレスは必須です',\n  v => isValidEmail(v) || '有効なメールアドレスを入力してください',\n]\n\nconst senderNameRules = [\n  v => !!v || '送信者名は必須です',\n  v => {\n    if (!v) return true\n    const result = validateSenderName(v)\n    return result.message || true\n  }\n]\n\nconst daysOfWeek = [\n  { text: '月曜日', value: 'monday' },\n  { text: '火曜日', value: 'tuesday' },\n  { text: '水曜日', value: 'wednesday' },\n  { text: '木曜日', value: 'thursday' },\n  { text: '金曜日', value: 'friday' },\n  { text: '土曜日', value: 'saturday' },\n  { text: '日曜日', value: 'sunday' },\n]\n\nconst hours = computed(() =>\n  Array.from({ length: 24 }, (_, i) => {\n    const time = `${i.toString().padStart(2, '0')}:00`\n    return { text: time, value: time }\n  })\n)\n\nconst reportWeekOptions = [\n  { text: '前週', value: -1 },\n  { text: '当週', value: 0 },\n]\n\nwatch(() => reportSettings.sender, (newValue, oldValue) => {\n  if (newValue !== oldValue) {\n    if (isValidEmail(newValue)) {\n      const timeoutId = setTimeout(() => checkEmailVerificationStatus(newValue), 500)\n      return () => clearTimeout(timeoutId)\n    } else {\n      emailVerificationStatus.value = 'Failed'\n    }\n  }\n})\n\nconst handleSubmit = async () => {\n  if (!isFormValid.value || !isFormChanged.value) return\n  \n  await checkEmailVerificationStatus(reportSettings.sender)\n  if (emailVerificationStatus.value !== 'Success') {\n    showError('送信元メールアドレスが検証されていません。設定を保存できません。')\n    return\n  }\n  \n  try {\n    const org = { ...organization.value, ...reportSettings }\n    await updateOrganization(org)\n    showNotification('報告依頼設定を更新しました')\n    originalSettings.value = JSON.parse(JSON.stringify(reportSettings))\n  } catch (error) {\n    showError('報告依頼設定の保存に失敗しました', error)\n  }\n}\n\nconst isNotifyByEmail = ref(false)\n\nconst toggleMailNotification = async () => {\n  if (!currentPlan.value.adminFeatures.notifications) {\n    showError('この機能はプロプラン以上でご利用いただけます。')\n    return\n  }\n  try {\n    const newValue = !isNotifyByEmail.value\n    await updateOrganizationFeatures(organizationId, {\n      notifyByEmail: newValue\n    })\n    isNotifyByEmail.value = newValue\n  } catch (error) {\n    showError('メール通知設定の更新に失敗しました', error)\n    // エラー時は元の値に戻す\n    isNotifyByEmail.value = !isNotifyByEmail.value\n  }\n}\n\n// アドバイザー設定用の状態変数\nconst selectedAdvisors = ref([])\nconst originalAdvisors = ref([])\nconst isSaving = ref(false)\n\n// アドバイザー設定が変更されたかどうかをチェック\nconst isAdvisorSettingsChanged = computed(() => {\n  const currentAdvisors = [...selectedAdvisors.value].sort()\n  const originalAdvisorsList = [...originalAdvisors.value].sort()\n  return JSON.stringify(currentAdvisors) !== JSON.stringify(originalAdvisorsList)\n})\n\n// アドバイザーフィルタリング用の computed property を追加\nconst availableAdvisors = computed(() => {\n  if (currentPlan.value.organizationFeatures.weeklyReportAdvice) {\n    return advisorRoles\n  }\n  return Object.fromEntries(\n    Object.entries(advisorRoles).filter(([key]) => defaultAdvisors.includes(key))\n  )\n})\n\n// アドバイザー選択のバリデーション\nconst hasSelectedAdvisor = computed(() => selectedAdvisors.value.length > 0)\n\n// アドバイザー設定の選択切り替え\nconst toggleAdvisor = (advisorKey) => {\n  if (!currentPlan.value.organizationFeatures.weeklyReportAdvice) {\n    showError('この機能はプロプラン以上でご利用いただけます。')\n    return\n  }\n  const index = selectedAdvisors.value.indexOf(advisorKey)\n  if (index === -1) {\n    selectedAdvisors.value.push(advisorKey)\n  } else {\n    selectedAdvisors.value.splice(index, 1)\n  }\n}\n\n// アドバイザー設定を保存\nconst saveAdvisorSettings = async () => {\n  if (!hasSelectedAdvisor.value) {\n    showError('少なくとも1つのアドバイザーを選択してください')\n    return\n  }\n\n  isSaving.value = true\n  try {\n    const organizationId = store.getters['auth/organizationId']\n    await updateOrganizationFeatures(organizationId, { advisors: selectedAdvisors.value })\n\n    // 更新成功後に比較元の値を更新\n    originalAdvisors.value = [...selectedAdvisors.value]\n    showNotification('アドバイザー設定を保存しました')\n  } catch (error) {\n    showError('アドバイザー設定の保存に失敗しました', error)\n  } finally {\n    isSaving.value = false\n  }\n}\n\nonMounted(async () => {\n  loading.value = true\n  try {\n    const result = await getOrganization(organizationId)\n    organization.value = result\n    if (result && Object.keys(result).length > 0) {\n      Object.assign(reportSettings, {\n        sender: result.sender || '',\n        senderName: result.senderName || '',\n        requestEnabled: result.requestEnabled ?? false,\n        requestTime: result.requestTime || '06:00',\n        requestDayOfWeek: result.requestDayOfWeek || 'monday',\n        reportWeek: result.reportWeek || -1,\n      })\n      originalSettings.value = JSON.parse(JSON.stringify(reportSettings))\n      await checkEmailVerificationStatus(reportSettings.sender)\n\n      selectedAdvisors.value = result.features?.advisors || defaultAdvisors\n      originalAdvisors.value = [...selectedAdvisors.value]\n\n      // メール通知設定の初期化を追加\n      isNotifyByEmail.value = result.features?.notifyByEmail ?? false\n    }\n  } catch (error) {\n    showError('報告依頼設定の取得に失敗しました', error)\n  } finally {\n    loading.value = false\n  }\n})\n</script>\n\n<style scoped>\n.report-settings-container {\n  max-width: 960px;\n}\n\n.setting-card {\n  min-height: 500px;\n}\n\n.v-radio-group {\n  display: flex;\n  align-items: center;\n}\n\n.v-radio {\n  margin-right: 0;\n}\n\n.advisor-card {\n  cursor: pointer;\n  transition: all 0.3s ease;\n  border: 1px solid rgba(var(--v-border-color), 0.3);\n  position: relative;\n  border-radius: 12px;\n}\n\n.advisor-card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n  background-color: rgba(var(--v-theme-primary), 0.1);\n}\n\n.advisor-selected {\n  border: 1px solid rgb(var(--v-theme-primary));\n  background-color: rgba(var(--v-theme-primary), 0.1);\n}\n\n.advisor-selected::after {\n  content: '✓';\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  background-color: rgb(var(--v-theme-primary));\n  color: white;\n  width: 28px;\n  height: 28px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 18px;\n  font-weight: bold;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  z-index: 1;\n}\n\n.advisor-image {\n  opacity: 0.9;\n  transition: opacity 0.3s ease;\n}\n\n.advisor-card:hover .advisor-image {\n  opacity: 1;\n}\n\n.text-warning {\n  color: rgb(var(--v-theme-warning));\n}\n\n.v-alert {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.v-alert :deep(.v-alert__content) {\n  width: 100%;\n}\n</style>","import script from \"./ReportSetting.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ReportSetting.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ReportSetting.vue?vue&type=style&index=0&id=25333588&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-25333588\"]])\n\nexport default __exports__","import { createRouter, createWebHistory } from 'vue-router'\nimport { contextPath } from '@/config/environment'\nimport store from '@/store'\nimport SignIn from '@/views/SignIn.vue'\nimport Overview from '@/views/Overview.vue'\nimport Dashboard from '@/views/Dashboard.vue'\nimport WeeklyReport from '@/views/WeeklyReport.vue'\nimport WeeklyReview from '@/views/WeeklyReview.vue'\nimport WeeklyReportSummary from '@/views/WeeklyReportSummary.vue'\nimport OrganizationManagement from '@/views/OrganizationManagement.vue'\nimport OrganizationAccount from '@/views/OrganizationAccount.vue'\nimport ReportSetting from '@/views/ReportSetting.vue'\n\nconst routes = [\n  {\n    path: '/',\n    name: 'Root',\n    component: () => import('@/views/About.vue'),\n    meta: { hideNavigation: true, hideMascot: true, fullWidth: true },\n    beforeEnter: async (to, from, next) => {\n      try {\n        const token = await store.dispatch('auth/fetchAuthToken')\n        if (token) {\n          next('/admin')\n        } else {\n          next()\n        }\n      } catch (error) {\n        next()\n      }\n    }\n  },\n  {\n    path: '/signin',\n    name: 'SignIn',\n    component: SignIn,\n    meta: { hideNavigation: true, hideMascot: true }\n  },\n  {\n    path: '/signup',\n    name: 'SignUp',\n    component: SignIn,\n    meta: { hideNavigation: true, hideMascot: true }\n  },\n  {\n    path: '/admin',\n    name: 'Overview',\n    component: Overview,\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/admin/dashboard',\n    name: 'Dashboard',\n    component: Dashboard,\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/admin/organization',\n    name: 'OrganizationManagement',\n    component: OrganizationManagement,\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/admin/accounts',\n    name: 'OrganizationAccount',\n    component: OrganizationAccount,\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/admin/reports',\n    name: 'WeeklyReviewSelector',\n    component: WeeklyReview,\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/admin/reports/:weekString',\n    name: 'WeeklyReview',\n    component: WeeklyReview,\n    props: true,\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/admin/report-setting',\n    name: 'ReportSetting',\n    component: ReportSetting,\n    props: true,\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/reports/:organizationId/:memberUuid',\n    name: 'WeeklyReportSelector',\n    component: WeeklyReport,\n    props: true,\n    meta: { hideNavigation: true }\n  },\n  {\n    path: '/reports/:organizationId/:memberUuid/:weekString',\n    name: 'WeeklyReport',\n    component: WeeklyReport,\n    props: true,\n    meta: { hideNavigation: true }\n  },\n  {\n    path: '/view/:token',\n    name: 'WeeklyReportSummary',\n    component: WeeklyReportSummary,\n    props: true,\n    meta: { hideNavigation: true, hideAnimation: true }\n  },\n  {\n    path: '/admin/member-reports/:memberUuid',\n    name: 'MemberReports',\n    component: () => import('@/views/MemberReports.vue'),\n    props: true,\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/account-setting',\n    name: 'AccountSetting',\n    component: () => import('@/views/AccountSetting.vue')\n  },\n  {\n    path: '/billing',\n    name: 'Billing',\n    component: () => import('@/views/Billing.vue'),\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/member/mail/:memberUuid',\n    name: 'MailConfirmed',\n    component: () => import('@/views/MailConfirmed.vue'),\n    props: true,\n    meta: { hideNavigation: true, hideAnimation: true }\n  },\n  {\n    path: '/:pathMatch(.*)*',\n    name: 'NotFound',\n    component: () => import('@/views/NotFound.vue'),\n    meta: { hideNavigation: true, hideAnimation: true }\n  }\n]\n\nconst router = createRouter({\n  history: createWebHistory(contextPath),\n  routes\n})\n\nrouter.beforeEach(async (to, from, next) => {\n  //store.dispatch('setLoading', true)\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    try {\n      const token = await store.dispatch('auth/fetchAuthToken')\n      if (token) {\n        await store.dispatch('auth/fetchUser')\n        next()\n      } else {\n        // ユーザーが認証されていない場合、サインインページにリダイレクト\n        next({\n          name: 'SignIn',\n          query: { redirect: to.fullPath }\n        })\n      }\n    } catch (error) {\n      console.error('認証チェックエラー:', error)\n      // エラーが発生した場合、サインインページにリダイレクト\n      next({\n        name: 'SignIn',\n        query: { redirect: to.fullPath }\n      })\n    }\n  } else {\n    // 認証が不要なルートの場合、そのまま進む\n    next()\n  }\n})\n\nrouter.afterEach(() => {\n  //store.dispatch('setLoading', false)\n})\n\nexport default router","// Styles\nimport '@mdi/font/css/materialdesignicons.css'\nimport 'vuetify/styles'\n\n// Vuetify\nimport { createVuetify } from 'vuetify'\n\nexport default createVuetify({\n  theme: {\n    themes: {\n      light: {\n        colors: {\n          primary: '#039BE5',\n          secondary: '#00ACC1',\n          error: '#D32F2F',\n          menu: '#6980B5' //607AB0,5872AD,4E688E,2A4161\n        },\n      },\n    },\n  },\n  defaults: {\n    VCard: {\n      elevation: 4,\n    },\n    VRating: {\n      hover: true\n    }\n  },\n})","/**\n * plugins/webfontloader.js\n *\n * webfontloader documentation: https://github.com/typekit/webfontloader\n */\n\nexport async function loadFonts () {\n  const webFontLoader = await import(/* webpackChunkName: \"webfontloader\" */'webfontloader')\n\n  webFontLoader.load({\n    google: {\n      // Edu VIC WA NT Beginner:400,700\n      families: ['Agbalumo']\n    }\n  })\n}\n","export default {\n  Auth: {\n    Cognito: {\n      region: 'ap-northeast-1',\n      userPoolId: 'ap-northeast-1_bBaqROOm5',\n      userPoolClientId: 'bj5b62c44ur0drn8jc7isk0sm',\n      signUpVerificationMethod: 'code',\n      loginWith: {\n        oauth: {\n          domain: 'https://fluxweek.auth.ap-northeast-1.amazoncognito.com',\n          scopes: ['email', 'openid', 'aws.cognito.signin.user.admin'],\n          redirectSignIn: 'https://plasticgrammer.github.io/quantumbird/',\n          redirectSignOut: 'https://plasticgrammer.github.io/quantumbird/',\n          responseType: 'code'\n        }\n      }\n    }\n  }\n}\n","import { createApp } from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport store from './store'\nimport vuetify from './plugins/vuetify'\nimport { loadFonts } from './plugins/webfontloader'\nimport { Amplify } from 'aws-amplify'\nimport amplifyConfig from './config/amplify-config'\nimport './assets/global.css'\n\n// Amplify の設定\ntry {\n  Amplify.configure(amplifyConfig, { ssr: true })\n} catch (error) {\n  console.error('Failed to configure Amplify:', error)\n}\n\n// フォントの読み込み\nloadFonts()\n\n// Vue アプリケーションの作成と設定\nconst app = createApp(App)\n\napp.use(router)\napp.use(store)\napp.use(vuetify)\n\n// グローバルエラーハンドラー\napp.config.errorHandler = (err, vm, info) => {\n  console.error('Unhandled error:', err, info)\n  // ここにエラー報告ロジックを追加することができます\n}\n\n// アプリケーションのマウント\napp.mount('#app')\n","import { apiClient } from './apiClient'\n\nconst BASE_PATH = '/account'\n\nexport const createAccount = async (account) => {\n  return apiClient.post(BASE_PATH, account)\n}\n\nexport const updateAccount = async (account) => {\n  return apiClient.put(BASE_PATH, account)\n}\n\nexport const deleteAccount = async (organizationId, email) => {\n  return apiClient.delete(BASE_PATH, { organizationId, email })\n}\n\nexport const getAccount = async (organizationId) => {\n  try {\n    return await apiClient.get(BASE_PATH, { organizationId })\n  } catch (error) {\n    if (error.message.includes('not found')) {\n      return null // アカウントが見つからない場合はnullを返す\n    }\n    throw error // その他のエラーは上位に伝播させる\n  }\n}\n\nexport const getAccounts = async (params) => {\n  return apiClient.get(BASE_PATH, params)\n}\n\nexport const resendInvitation = async (email) => {\n  const response = await apiClient.post(`${BASE_PATH}/resend-invitation`, { email })\n  return response.data\n}","import axios from 'axios'\nimport store from '@/store'\n\nconst stage = process.env.VUE_APP_STAGE || 'dev'\nconst API_ENDPOINT = `${process.env.VUE_APP_API_ENDPOINT}/${stage}`\nconst LOADING_DELAY = 600 // ms delay before showing loading\n\nconst api = axios.create({\n  baseURL: API_ENDPOINT,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  timeout: 30000,\n  withCredentials: false\n})\n\nlet activeRequests = 0\nlet loadingTimeout = null\nlet isRefreshing = false\nlet failedQueue = []\n\nconst startLoading = () => {\n  activeRequests++\n  if (loadingTimeout === null) {\n    loadingTimeout = setTimeout(() => {\n      store.dispatch('setLoading', true)\n    }, LOADING_DELAY)\n  }\n}\n\nconst stopLoading = () => {\n  activeRequests--\n  if (activeRequests === 0) {\n    clearTimeout(loadingTimeout)\n    loadingTimeout = null\n    store.dispatch('setLoading', false)\n  }\n}\n\nconst ERROR_TYPES = {\n  CORS: 'CORS_ERROR',\n  NETWORK: 'NETWORK_ERROR',\n  AUTH: 'AUTH_ERROR',\n  UNKNOWN: 'UNKNOWN_ERROR'\n}\n\nconst getErrorType = (error) => {\n  if (error.code === 'ERR_NETWORK' && !error.response) {\n    // CORSエラーの特徴的なパターンをチェック\n    const isCORS = error.message.includes('CORS') ||\n      error.message.includes('Network Error') ||\n      error.message.includes('cross-origin')\n    return isCORS ? ERROR_TYPES.CORS : ERROR_TYPES.NETWORK\n  }\n  if (error.response?.status === 401) {\n    return ERROR_TYPES.AUTH\n  }\n  return ERROR_TYPES.UNKNOWN\n}\n\n// 変数名を変更し、実際に使用されていることを明確にする\nconst checkTokenError = (error) => {\n  const errorType = getErrorType(error)\n\n  // デバッグ用の詳細なログ出力\n  console.error('Error details:', {\n    type: errorType,\n    code: error.code,\n    message: error.message,\n    response: error.response,\n    isAxiosError: error.isAxiosError,\n    config: error.config\n  })\n\n  // 認証エラーの場合のみtrueを返す\n  return errorType === ERROR_TYPES.AUTH\n}\n\n// Request interceptor\napi.interceptors.request.use(\n  (config) => {\n    startLoading()\n    const token = store.getters['auth/token']\n    if (token) {\n      config.headers['Authorization'] = `Bearer ${token}`\n    }\n    return config\n  },\n  (error) => {\n    stopLoading()\n    console.error('Request interceptor error:', error)\n    return Promise.reject(error)\n  }\n)\n\nconst processQueue = (error, token = null) => {\n  failedQueue.forEach(prom => {\n    if (error) {\n      prom.reject(error)\n    } else {\n      prom.resolve(token)\n    }\n  })\n  failedQueue = []\n}\n\n// Response interceptor\napi.interceptors.response.use(\n  (response) => {\n    stopLoading()\n    return response\n  },\n  async (error) => {\n    stopLoading()\n    const originalRequest = error.config\n    const errorType = getErrorType(error)\n\n    // CORSエラーの場合、即時リトライ\n    if (errorType === ERROR_TYPES.CORS && !originalRequest._corsRetry) {\n      originalRequest._corsRetry = true\n      console.log('Retrying CORS error request with new token...')\n      // 新しいトークンを取得して即時リトライ\n      try {\n        const newToken = await store.dispatch('auth/fetchAuthToken')\n        originalRequest.headers['Authorization'] = `Bearer ${newToken}`\n        return api(originalRequest)\n      } catch (refreshError) {\n        console.error('Token refresh failed during CORS retry:', refreshError)\n        await store.dispatch('auth/signOut')\n        return Promise.reject(refreshError)\n      }\n    }\n\n    // 認証エラーの場合の処理\n    if (checkTokenError(error) && !originalRequest._retry) {\n      if (isRefreshing) {\n        return new Promise((resolve, reject) => {\n          failedQueue.push({ resolve, reject })\n        }).then(token => {\n          originalRequest.headers['Authorization'] = `Bearer ${token}`\n          return api(originalRequest)\n        }).catch(err => Promise.reject(err))\n      }\n\n      originalRequest._retry = true\n      isRefreshing = true\n\n      try {\n        const newToken = await store.dispatch('auth/fetchAuthToken')\n        processQueue(null, newToken)\n        originalRequest.headers['Authorization'] = `Bearer ${newToken}`\n        return api(originalRequest)\n      } catch (refreshError) {\n        processQueue(refreshError, null)\n        console.error('Token refresh failed:', refreshError)\n        await store.dispatch('auth/signOut')\n        return Promise.reject(refreshError)\n      } finally {\n        isRefreshing = false\n      }\n    }\n\n    // 通常のネットワークエラーの場合\n    if (errorType === ERROR_TYPES.NETWORK && !originalRequest._networkRetry) {\n      originalRequest._networkRetry = true\n      console.log('Retrying network request...')\n      const currentToken = store.getters['auth/token']\n      if (currentToken) {\n        originalRequest.headers['Authorization'] = `Bearer ${currentToken}`\n      }\n      return new Promise(resolve => setTimeout(resolve, 1000))\n        .then(() => api(originalRequest))\n    }\n\n    console.error(`Error in API call (${originalRequest.method} ${originalRequest.url}):`, error)\n    console.error('Error details:', {\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n      data: error.response?.data,\n      config: error.config,\n    })\n    return Promise.reject(error)\n  }\n)\n\nconst handleError = (error) => {\n  if (error.response) {\n    // サーバーからのレスポンスにエラーが含まれている場合\n    const errorMessage = error.response.data.error || error.response.data.message || 'エラーが発生しました'\n    throw new Error(errorMessage)\n  }\n  throw error\n}\n\nexport const callApi = async (method, path, data = null, queryParams = null, options = {}) => {\n  try {\n    const config = {\n      method,\n      url: path,\n      ...options,\n    }\n\n    if (data) {\n      config.data = data\n    }\n\n    if (queryParams) {\n      config.params = queryParams\n    }\n\n    const response = await api(config)\n    return response.data\n  } catch (error) {\n    if (axios.isCancel(error)) {\n      console.log('Request canceled:', error.message)\n    }\n    throw handleError(error)\n  }\n}\n\n// Helper function to create a cancelable request\nexport const createCancelableRequest = (method, path, data = null, queryParams = null, options = {}) => {\n  const source = axios.CancelToken.source()\n  const promise = callApi(method, path, data, queryParams, { ...options, cancelToken: source.token })\n  return { promise, cancel: () => source.cancel('Request canceled by the user') }\n}\n\n// Example of a function with retry logic\nexport const callApiWithRetry = async (method, path, data = null, queryParams = null, options = {}, maxRetries = 3) => {\n  for (let i = 0; i < maxRetries; i++) {\n    try {\n      return await callApi(method, path, data, queryParams, options)\n    } catch (error) {\n      console.warn(`API call attempt ${i + 1} failed:`, error)\n      if (i === maxRetries - 1) {\n        console.error(`All ${maxRetries} attempts failed for API call (${method} ${path})`)\n        throw error\n      }\n      // Wait for 2^i * 1000 milliseconds before retrying\n      const delay = Math.pow(2, i) * 1000\n      console.log(`Retrying in ${delay}ms...`)\n      await new Promise(resolve => setTimeout(resolve, delay))\n    }\n  }\n}\n\nexport const apiClient = {\n  get: (path, queryParams, options) => callApi('GET', path, null, queryParams, options),\n  post: (path, data, options) => callApi('POST', path, data, null, options),\n  put: (path, data, options) => callApi('PUT', path, data, null, options),\n  delete: (path, queryParams, options) => callApi('DELETE', path, null, queryParams, options),\n}","import { apiClient } from './apiClient'\n\nconst BASE_PATH = '/bedrock'\n\n// デフォルトのアドバイザー\nexport const defaultAdvisors = ['manager', 'career', 'mental']\n\n// アドバイザーロールの定義\nexport const advisorRoles = {\n  manager: {\n    title: 'マネジメントアドバイザー',\n    description: '課題解決の視点から業務改善のアドバイスを提供します',\n    icon: 'mdi-account-supervisor',\n    color: 'pink',\n    image: require('@/assets/images/advisor_manager.gif')\n  },\n  career: {\n    title: 'キャリアアドバイザー',\n    description: 'スキル開発とキャリア形成のアドバイスを提供します',\n    icon: 'mdi-school',\n    color: 'deep-purple',\n    image: require('@/assets/images/advisor_career.png')\n  },\n  mental: {\n    title: 'メンタルサポーター',\n    description: 'ストレス管理とセルフケアのアドバイスを提供します',\n    icon: 'mdi-heart',\n    color: 'red',\n    image: require('@/assets/images/advisor_mental.png')\n  },\n  reframe: {\n    title: 'リフレーミングマスター',\n    description: '課題をポジティブ視点で捉え直すアドバイスを提供します',\n    icon: 'mdi-border-outside',\n    color: 'cyan',\n    image: require('@/assets/images/advisor_reframe.png')\n  },\n  scenario: {\n    title: 'ストーリーアーキテクト',\n    description: '成長のストーリーとして状況を再構築します',\n    icon: 'mdi-script-text',\n    color: 'orange-darken-2',\n    image: require('@/assets/images/advisor_scenario.png')\n  },\n  detective: {\n    title: 'ミステリーディテクティブ',\n    description: '状況の背後にある真相を探り出します',\n    icon: 'mdi-magnify',\n    color: 'brown',\n    image: require('@/assets/images/advisor_detective.png')\n  },\n  timeNavi: {\n    title: 'クロノスナビゲーター',\n    description: '時間軸を超えた視点でアドバイスを提供します',\n    icon: 'mdi-clock-time-eight',\n    color: 'indigo',\n    image: require('@/assets/images/advisor_time.png')\n  },\n}\n\nexport const getWeeklyReportAdvice = async (memberUuid, weekString, advisorRole) => {\n  try {\n    const result = await apiClient.post(`${BASE_PATH}/advice`, { memberUuid, weekString, advisorRole })\n    return {\n      advice: result.advice || '',\n      weekString: result.weekString,\n      memberUuid: result.memberUuid,\n      remainingTickets: result.remainingTickets || 0\n    }\n  } catch (error) {\n    console.error('Error getting weekly report advice:', error)\n    throw new Error('週次報告のアドバイス取得に失敗しました。')\n  }\n}\n\nexport const getWeeklyReportSummary = async (memberUuid) => {\n  try {\n    const result = await apiClient.post(`${BASE_PATH}/summary`, { memberUuid })\n    return {\n      summary: result.data.summary || '',\n      insights: {\n        positive: result.data.insights?.positive || [],\n        negative: result.data.insights?.negative || []\n      }\n    }\n  } catch (error) {\n    console.error('Error getting weekly report summary:', error)\n    throw error instanceof Error ? error : new Error('週次報告のサマリー生成に失敗しました。')\n  }\n}\n","import { apiClient } from './apiClient'\n\nconst BASE_PATH = '/member'\n\nexport const getMember = async (memberUuid) => {\n  return apiClient.get(BASE_PATH, { memberUuid })\n}\n\nexport const updateMember = async (member) => {\n  return apiClient.put(BASE_PATH, member)\n}\n\nexport const getMemberProjects = async (memberUuid) => {\n  const result = await apiClient.get(`${BASE_PATH}/project`, { memberUuid })\n  return result || []\n}\n\nexport const updateMemberProjects = async (memberUuid, projects) => {\n  await apiClient.put(BASE_PATH, { memberUuid, projects })\n  return true\n}\n\nexport const listMembers = async (organizationId) => {\n  return apiClient.get(BASE_PATH, { organizationId })\n}\n\nexport const verifyEmail = async (memberUuid) => {\n  return apiClient.put(`${BASE_PATH}/mail`, { verifyEmail: true, memberUuid })\n}\n\nexport const createMember = async (member) => {\n  return apiClient.post(BASE_PATH, member)\n}\n\nexport const deleteMember = async (memberUuid) => {\n  return apiClient.delete(BASE_PATH, { memberUuid })\n}\n\nexport const listOrganizationMembers = async (organizationId) => {\n  return apiClient.get(BASE_PATH, { organizationId })\n}","import { apiClient } from './apiClient'\n\nconst BASE_PATH = '/organization'\n\nexport const submitOrganization = async (organization) => {\n  const orgData = { ...organization }\n  delete orgData.members\n  return apiClient.post(BASE_PATH, orgData)\n}\n\nexport const updateOrganization = async (organization) => {\n  const orgData = { ...organization }\n  delete orgData.members\n  return apiClient.put(BASE_PATH, orgData)\n}\n\nexport const updateOrganizationFeatures = async (organizationId, features) => {\n  return apiClient.put(BASE_PATH, { organizationId, features })\n}\n\nexport const deleteOrganization = async (organizationId) => {\n  return apiClient.delete(BASE_PATH, { organizationId })\n}\n\nexport const deleteOrganizationCompletely = async (organizationId) => {\n  return apiClient.delete(BASE_PATH, { organizationId, mode: 'complete' })\n}\n\nexport const getOrganization = async (organizationId) => {\n  try {\n    return await apiClient.get(BASE_PATH, { organizationId })\n  } catch (error) {\n    if (error.message.includes('not found')) {\n      return null // 組織が見つからない場合はnullを返す\n    }\n    throw error // その他のエラーは上位に伝播させる\n  }\n}\n\nexport const listOrganizations = async () => {\n  return apiClient.get(BASE_PATH)\n}\n\nexport const registerPushSubscription = async (fcmToken, organizationId, adminId) => {\n  return apiClient.post(`${BASE_PATH}/push-subscription`, { fcmToken, organizationId, adminId })\n}\n\nexport const removePushSubscription = async (organizationId, adminId) => {\n  return apiClient.delete(`${BASE_PATH}/push-subscription`, { organizationId, adminId })\n}\n\nexport const getPushSubscription = async (organizationId, adminId) => {\n  const response = await apiClient.get(`${BASE_PATH}/push-subscription`, { organizationId, adminId })\n  return response.endpointArn\n}","import { apiClient } from './apiClient'\n\nconst BASE_PATH = '/payment'\n\nexport const createSubscription = async (subscriptionData) => {\n  return apiClient.post(`${BASE_PATH}/create-subscription`, subscriptionData)\n}\n\nexport const updateSubscription = async (updateData) => {\n  return apiClient.post(`${BASE_PATH}/update-subscription`, updateData)\n}\n\nexport const changePlan = async (changeData) => {\n  const response = await apiClient.post(`${BASE_PATH}/change-plan`, changeData)\n\n  // フリープランへの変更時の特別処理\n  if (response.subscription?.status === 'canceled' && response.subscription?.currentPeriodEnd) {\n    response.message = `次回支払い日（${new Date(response.subscription.currentPeriodEnd * 1000).toLocaleDateString()}）でフリープランに変更されます`\n  }\n\n  return response\n}\n\nexport const getPaymentMethods = async (email) => {\n  const response = await apiClient.post(`${BASE_PATH}/payment-methods`, { email })\n  return response\n}\n\nexport const updatePaymentMethod = async ({ token, customerId }) => {\n  console.log('Updating payment method:', { token: token?.slice(-4), customerId })\n  const response = await apiClient.post(`${BASE_PATH}/update-payment-method`, {\n    token,\n    customerId\n  })\n  console.log('Payment method update response:', response)\n  return response\n}\n\nexport const getInvoices = async (customerId) => {\n  const response = await apiClient.post(`${BASE_PATH}/invoices`, { customerId })\n  return response\n}\n\nexport const getSubscriptionInfo = async (customerId) => {\n  const response = await apiClient.post(`${BASE_PATH}/subscription-info`, { customerId })\n  return response\n}\n\nexport const cancelSubscription = async (customerId) => {\n  return changePlan({\n    subscriptionId: customerId,\n    priceId: 'price_free',\n    accountCount: 0\n  })\n}\n","import { apiClient } from './apiClient'\n\nconst BASE_PATH = '/public'\n\nexport const getOrganization = async (organizationId) => {\n  try {\n    return await apiClient.get(`${BASE_PATH}/organization`, { organizationId })\n  } catch (error) {\n    if (error.message.includes('not found')) {\n      return null\n    }\n    throw error\n  }\n}\n\nexport const submitOrganization = async (organization) => {\n  return apiClient.post(`${BASE_PATH}/organization`, organization)\n}\n\nexport const getReport = async (memberUuid, weekString) => {\n  return apiClient.get(`${BASE_PATH}/weekly-report`, { memberUuid, weekString })\n}\n\nexport const submitReport = async (report) => {\n  return apiClient.post(`${BASE_PATH}/weekly-report`, report)\n}\n\nexport const updateReport = async (report) => {\n  return apiClient.put(`${BASE_PATH}/weekly-report`, report)\n}\n\nexport const listReports = async (organizationId, weekString) => {\n  return apiClient.get(`${BASE_PATH}/weekly-report`, { organizationId, weekString })\n}\n\nexport const listMembers = async (organizationId) => {\n  return apiClient.get(`${BASE_PATH}/member`, { organizationId })\n}\n\nexport const getMember = async (memberUuid) => {\n  return apiClient.get(`${BASE_PATH}/member`, { memberUuid })\n}\n\nexport const getMemberProjects = async (memberUuid) => {\n  const result = await apiClient.get(`${BASE_PATH}/project`, { memberUuid })\n  return result || []\n}\n\nexport const updateMemberExtraInfo = async (memberUuid, extraInfo) => {\n  await apiClient.put(`${BASE_PATH}/member`, { memberUuid, extraInfo })\n  return true\n}\n\nexport const updateMemberProjects = async (memberUuid, projects) => {\n  await apiClient.put(`${BASE_PATH}/member`, { memberUuid, projects })\n  return true\n}\n","import { apiClient } from './apiClient'\n\nconst BASE_PATH = '/weekly-report'\n\nexport const submitReport = async (report) => {\n  return apiClient.post(BASE_PATH, report)\n}\n\nexport const updateReport = async (report) => {\n  return apiClient.put(BASE_PATH, report)\n}\n\nexport const deleteReport = async (memberUuid, weekString) => {\n  return apiClient.delete(BASE_PATH, { memberUuid, weekString })\n}\n\nexport const getReport = async (memberUuid, weekString) => {\n  return apiClient.get(BASE_PATH, { memberUuid, weekString })\n}\n\nexport const listReports = async (params) => {\n  return apiClient.get(BASE_PATH, params)\n}\n\nexport const listMemberReports = async (memberUuid) => {\n  return apiClient.get(`${BASE_PATH}/member/${memberUuid}`)\n}\n\nexport const exportReports = async (organizationId) => {\n  return apiClient.get(`${BASE_PATH}/export`, { organizationId })\n}\n\nexport const getReportStatus = async (organizationId, weekString) => {\n  return apiClient.get(`${BASE_PATH}/status`, { organizationId, weekString })\n}\n\nexport const getStatsData = async (organizationId) => {\n  return apiClient.get(`${BASE_PATH}/stats`, { organizationId })\n}\n\nexport const submitFeedback = async (memberUuid, weekString, feedback) => {\n  return apiClient.post(`${BASE_PATH}/feedback`, { memberUuid, weekString, feedback })\n}","import { fetchUserAttributes, fetchAuthSession, signOut, updateUserAttributes, updatePassword, deleteUser } from 'aws-amplify/auth'\nimport { termsOfServiceVersion, privacyPolicyVersion } from '@/config/environment'\nimport { getSubscriptionInfo } from '@/services/paymentService'\n\nconst AUTH_CONSTANTS = {\n  CACHE_DURATION: 5 * 60 * 1000, // 5分\n  ERROR_MESSAGES: {\n    AUTH: '認証エラー：再度ログインしてから試してください',\n    RATE_LIMIT: 'しばらく時間をおいてから再度お試しください',\n    GENERIC: 'エラーが発生しました',\n    DELETE_ACCOUNT: 'アカウントの削除中にエラーが発生しました',\n    NO_TOKEN: '認証情報が見つかりません。再度ログインしてください',\n    SUBSCRIPTION_UPDATE: 'サブスクリプション情報の更新権限がありません。管理者に連絡してください',\n    TEMP_PASSWORD: '初回ログインのため、パスワードの変更が必要です',\n    PASSWORD_RESET: 'パスワードのリセットが必要です',\n    PASSWORD_CHANGE_REQUIRED: '仮パスワードでのログインのため、パスワードの変更が必要です'\n  }\n}\n\nconst createErrorHandler = (prefix) => (error) => {\n  console.error(`Error ${prefix}:`, error)\n  if (error?.details) {\n    console.error('Error details:', JSON.stringify(error, Object.getOwnPropertyNames(error)))\n  }\n  throw error\n}\n\nconst mapErrorMessage = (error) => {\n  const errorMap = {\n    NotAuthorizedException: (msg) =>\n      msg.includes('unauthorized attribute')\n        ? AUTH_CONSTANTS.ERROR_MESSAGES.SUBSCRIPTION_UPDATE\n        : AUTH_CONSTANTS.ERROR_MESSAGES.AUTH,\n    LimitExceededException: () => AUTH_CONSTANTS.ERROR_MESSAGES.RATE_LIMIT,\n    UserNotConfirmedException: () => 'メールアドレスの確認が完了していません。',\n    UserNotFoundException: () => 'このメールアドレスに対応するアカウントが見つかりません。',\n    InvalidParameterException: () => '入力内容が正しくありません。',\n    default: (msg) => msg || AUTH_CONSTANTS.ERROR_MESSAGES.GENERIC\n  }\n\n  return (errorMap[error.name] || errorMap.default)(error.message)\n}\n\nexport default {\n  namespaced: true,\n\n  state: () => ({\n    user: null,\n    token: null,\n    lastTokenFetch: null,\n    lastUserFetch: null,\n    cognitoUserSub: null,\n    subscription: {\n      planId: null,\n      accountCount: 0,\n      subscriptionId: null,\n      stripeCustomerId: null\n    }\n  }),\n\n  mutations: {\n    setUser(state, user) {\n      state.user = user\n      state.lastUserFetch = Date.now()\n    },\n\n    setToken(state, token) {\n      state.token = token\n      state.lastTokenFetch = Date.now()\n    },\n\n    setCognitoUserSub(state, sub) {\n      state.cognitoUserSub = sub\n    },\n\n    clearAuthState(state) {\n      Object.assign(state, {\n        user: null,\n        token: null,\n        lastTokenFetch: null,\n        lastUserFetch: null,\n        cognitoUserSub: null,\n        subscription: {\n          planId: null,\n          accountCount: 0,\n          subscriptionId: null,\n          stripeCustomerId: null\n        }\n      })\n    },\n\n    updateUserPolicyVersions(state, { tosVersion, privacyPolicyVersion }) {\n      if (state.user) {\n        Object.assign(state.user, {\n          tosVersion: tosVersion || state.user.tosVersion,\n          privacyPolicyVersion: privacyPolicyVersion || state.user.privacyPolicyVersion\n        })\n      }\n    },\n\n    setSubscription(state, { planId, priceId, accountCount, subscriptionId, stripeCustomerId }) {\n      const subscription = {\n        planId,\n        priceId,\n        accountCount: parseInt(accountCount || '0', 10),\n        subscriptionId: subscriptionId || null,\n        stripeCustomerId: stripeCustomerId || null\n      }\n      state.subscription = subscription\n    }\n  },\n\n  actions: {\n    async fetchUser({ commit, state, dispatch }) {\n      try {\n        // キャッシュチェック\n        if (state.user && Date.now() - state.lastUserFetch < AUTH_CONSTANTS.CACHE_DURATION) {\n          const isValid = await dispatch('validateToken').catch(() => false)\n          if (isValid) return state.user\n        }\n\n        const attributes = await fetchUserAttributes()\n        const session = await fetchAuthSession()\n\n        // セッション状態の確認\n        if (session.challengeName === 'NEW_PASSWORD_REQUIRED') {\n          throw new Error(AUTH_CONSTANTS.ERROR_MESSAGES.PASSWORD_CHANGE_REQUIRED)\n        }\n\n        // ユーザー情報の設定\n        const userInfo = {\n          organizationId: attributes['custom:organizationId'],\n          parentOrganizationId: attributes['custom:parentOrganizationId'],\n          username: attributes.name,\n          email: attributes.email,\n          tosVersion: attributes['custom:tos_version'],\n          privacyPolicyVersion: attributes['custom:pp_version'],\n          stripeCustomerId: attributes['custom:stripeCustomerId']\n        }\n\n        commit('setUser', userInfo)\n        commit('setCognitoUserSub', attributes.sub)\n\n        // サブスクリプション情報の取得\n        if (attributes['custom:stripeCustomerId']) {\n          try {\n            const { data } = await dispatch('fetchSubscriptionInfo', attributes['custom:stripeCustomerId'])\n            commit('setSubscription', {\n              ...data,\n              stripeCustomerId: attributes['custom:stripeCustomerId']\n            })\n          } catch (error) {\n            console.error('Subscription fetch error:', error)\n          }\n        }\n\n        return userInfo\n\n      } catch (error) {\n        commit('clearAuthState')\n        throw error\n      }\n    },\n\n    async fetchSubscriptionInfo({ commit }, customerId) {\n      try {\n        const response = await getSubscriptionInfo(customerId)\n        commit('setSubscription', response.data)\n        return response\n      } catch (error) {\n        console.error('Error fetching subscription info:', error)\n        throw error\n      }\n    },\n\n    async fetchAuthToken({ commit, dispatch }, { forceRefresh = false } = {}) {\n      try {\n        const { tokens } = await fetchAuthSession({ forceRefresh })\n        if (!tokens?.idToken) {\n          commit('clearAuthState')\n          throw new Error(AUTH_CONSTANTS.ERROR_MESSAGES.NO_TOKEN)\n        }\n\n        const token = tokens.idToken.toString()\n        commit('setToken', token)\n        return token\n      } catch (error) {\n        // 特殊なエラー状態の判定を最初に行う\n        if (error.name === 'NewPasswordRequiredException' ||\n          error.name === 'PasswordResetRequiredException') {\n          // 特殊なエラーの場合は状態をクリアせずにそのまま伝播\n          throw error\n        }\n\n        console.error('Error fetching auth token:', error)\n        commit('clearAuthState')\n\n        // リフレッシュを試みる前に特殊なエラーでないことを確認\n        if (!error.message?.includes('needs to be authenticated')) {\n          try {\n            const { tokens } = await fetchAuthSession({ forceRefresh: true })\n            if (tokens?.idToken) {\n              const token = tokens.idToken.toString()\n              commit('setToken', token)\n              return token\n            }\n          } catch (refreshError) {\n            console.error('Token refresh failed:', refreshError)\n          }\n        }\n\n        await dispatch('handleAuthFailure', { error })\n        throw error\n      }\n    },\n\n    async validateToken({ dispatch, state }) {\n      try {\n        if (!state.token) {\n          return await dispatch('fetchAuthToken', { forceRefresh: true })\n        }\n        await fetchAuthSession()\n        return state.token\n      } catch (error) {\n        console.error('Token validation failed:', error)\n        return await dispatch('fetchAuthToken', { forceRefresh: true })\n      }\n    },\n\n    async handleAuthFailure({ dispatch }, { error } = {}) {\n      // 特殊なエラーの場合は、そのまま上位に伝播\n      if (error?.name === 'NewPasswordRequiredException') {\n        return Promise.reject(error)\n      }\n      if (error?.name === 'PasswordResetRequiredException') {\n        return Promise.reject(error)\n      }\n\n      await dispatch('signOut')\n      throw new Error(AUTH_CONSTANTS.ERROR_MESSAGES.AUTH)\n    },\n\n    async signOut({ commit }) {\n      try {\n        await signOut()\n        commit('clearAuthState')\n      } catch (error) {\n        createErrorHandler('signing out')(error)\n        commit('clearAuthState')\n        throw error\n      }\n    },\n\n    async updatePassword(_, { oldPassword, newPassword }) {\n      try {\n        await updatePassword({ oldPassword, newPassword })\n        return { success: true }\n      } catch (error) {\n        createErrorHandler('updating password')(error)\n        throw new Error(mapErrorMessage(error))\n      }\n    },\n\n    async deleteUserAccount({ commit }) {\n      try {\n        await deleteUser()\n        commit('clearAuthState')\n        return { success: true, message: 'アカウントが正常に削除されました' }\n      } catch (error) {\n        createErrorHandler('deleting user account')(error)\n        throw new Error(mapErrorMessage(error))\n      }\n    },\n\n    async checkPolicyAcceptance({ dispatch }) {\n      const user = await dispatch('fetchUser')\n      return {\n        needsTosAcceptance: user.tosVersion !== termsOfServiceVersion,\n        needsPrivacyPolicyAcceptance: user.privacyPolicyVersion !== privacyPolicyVersion\n      }\n    },\n\n    async updatePolicyAcceptance({ commit }, { tosAccepted, privacyPolicyAccepted }) {\n      try {\n        const updates = {}\n\n        if (tosAccepted && termsOfServiceVersion) {\n          updates['custom:tos_version'] = termsOfServiceVersion\n        }\n        if (privacyPolicyAccepted && privacyPolicyVersion) {\n          updates['custom:pp_version'] = privacyPolicyVersion\n        }\n\n        if (Object.keys(updates).length > 0) {\n          await updateUserAttributes({ userAttributes: updates })\n\n          commit('updateUserPolicyVersions', {\n            tosVersion: tosAccepted ? termsOfServiceVersion : undefined,\n            privacyPolicyVersion: privacyPolicyAccepted ? privacyPolicyVersion : undefined\n          })\n        }\n\n        return { success: true }\n      } catch (error) {\n        createErrorHandler('updating policy acceptance')(error)\n        throw error\n      }\n    },\n\n    async updateSubscriptionAttributes({ commit, dispatch }, { stripeCustomerId }) {\n      try {\n        await updateUserAttributes({\n          userAttributes: {\n            'custom:stripeCustomerId': stripeCustomerId || ''\n          }\n        })\n\n        if (stripeCustomerId) {\n          const { data } = await dispatch('fetchSubscriptionInfo', stripeCustomerId)\n          commit('setSubscription', {\n            ...data,\n            stripeCustomerId\n          })\n        } else {\n          commit('setSubscription', {\n            planId: 'free',\n            accountCount: 0,\n            subscriptionId: null,\n            stripeCustomerId: null\n          })\n        }\n\n        return { success: true }\n      } catch (error) {\n        createErrorHandler('updating subscription info')(error)\n        throw new Error(mapErrorMessage(error))\n      }\n    },\n\n    async completeNewPassword({ dispatch, state }, { newPassword }) {\n      try {\n        const { confirmSignIn } = await import('@aws-amplify/auth')\n        await confirmSignIn({\n          challengeResponse: newPassword,\n          options: {\n            userAttributes: {\n              name: state.user?.email || '' // Use email as name if no username is available\n            }\n          }\n        })\n\n        // パスワード変更後に自動的にサインインを完了\n        await dispatch('fetchUser')\n        return { success: true }\n      } catch (error) {\n        createErrorHandler('completing new password')(error)\n        throw new Error(mapErrorMessage(error))\n      }\n    },\n\n  },\n\n  getters: {\n    organizationId: state => state.user?.organizationId,\n    parentOrganizationId: state => state.user?.parentOrganizationId,\n    name: state => state.user?.username,\n    email: state => state.user?.email,\n    isAuthenticated: state => !!state.user,\n    token: state => state.token,\n    cognitoUserSub: state => state.cognitoUserSub,\n    tosVersion: state => state.user?.tosVersion,\n    privacyPolicyVersion: state => state.user?.privacyPolicyVersion,\n    currentSubscription: state => state.subscription || { planId: 'free', accountCount: 0 },\n    isParentAccount: state => !state.user?.parentOrganizationId,\n  }\n}","import { createStore } from 'vuex'\nimport createPersistedState from 'vuex-persistedstate'\nimport authModule from './modules/auth'\nimport widget from './modules/widget'\n\nexport default createStore({\n  state: {\n    loading: false\n  },\n  mutations: {\n    SET_LOADING(state, isLoading) {\n      state.loading = isLoading\n    }\n  },\n  actions: {\n    setLoading({ commit }, isLoading) {\n      commit('SET_LOADING', isLoading)\n    }\n  },\n  getters: {\n    isLoading: state => state.loading\n  },\n  modules: {\n    auth: authModule,\n    widget\n  },\n  plugins: [\n    createPersistedState({\n      key: 'weekly-report',\n      paths: ['auth', 'widget'], // 永続化モジュールを指定（直接localStorageを操作しなくてよい）\n      storage: window.localStorage\n    })\n  ]\n})","export const WIDGET_DEFINITIONS = {\n  calendar: {\n    component: 'CalendarWidget',\n    title: '報告状況',\n    defaultExpanded: true,\n    defaultVisible: true\n  },\n  overtime: {\n    component: 'OvertimeChart',\n    title: '残業時間の遷移',\n    defaultExpanded: false,\n    defaultVisible: true\n  },\n  stress: {\n    component: 'StressChart',\n    title: 'ストレス評価の遷移',\n    defaultExpanded: false,\n    defaultVisible: true\n  },\n  disability: {\n    component: 'DisabilityChart',\n    title: 'タスク難易度の遷移',\n    defaultExpanded: false,\n    defaultVisible: false\n  },\n  achievement: {\n    component: 'AchievementChart',\n    title: 'タスク達成度の遷移',\n    defaultExpanded: false,\n    defaultVisible: false\n  },\n  organization: {\n    component: 'OrganizationWidget',\n    title: '組織情報',\n    defaultExpanded: false,\n    defaultVisible: true\n  },\n  reportRequest: {\n    component: 'ReportRequestWidget',\n    title: '報告依頼',\n    defaultExpanded: false,\n    defaultVisible: true\n  },\n  todo: {\n    component: 'TodoListWidget',\n    title: 'やることリスト',\n    defaultExpanded: false,\n    defaultVisible: true\n  },\n  weeklyReport: {\n    component: 'WeeklyReportWidget',\n    title: 'メンバーの週次報告',\n    defaultExpanded: false,\n    defaultVisible: true\n  }\n}\n\nconst createInitialState = () => ({\n  expandStates: Object.fromEntries(\n    Object.entries(WIDGET_DEFINITIONS)\n      .map(([id, def]) => [id, def.defaultExpanded ?? false])\n  ),\n  widgetOrder: Object.keys(WIDGET_DEFINITIONS),\n  widgetVisibility: Object.fromEntries(\n    Object.entries(WIDGET_DEFINITIONS)\n      .map(([id, def]) => [id, def.defaultVisible ?? false])\n  )\n})\n\nexport default {\n  namespaced: true,\n  state: createInitialState,\n\n  mutations: {\n    SET_WIDGET_STATE(state, { widgetId, isExpanded }) {\n      state.expandStates[widgetId] = isExpanded\n    },\n    SET_WIDGET_ORDER(state, order) {\n      // 表示中のウィジェットと非表示のウィジェットを分離して管理\n      const currentVisible = state.widgetOrder\n        .filter(id => state.widgetVisibility[id])\n      const hidden = state.widgetOrder\n        .filter(id => !state.widgetVisibility[id])\n\n      // 順序の整合性チェック\n      if (order.length === currentVisible.length &&\n        order.every(id => state.widgetVisibility[id])) {\n        state.widgetOrder = [...order, ...hidden]\n      }\n    },\n    SET_WIDGET_VISIBILITY(state, { widgetId, isVisible }) {\n      // 可視性の更新\n      state.widgetVisibility = {\n        ...state.widgetVisibility,\n        [widgetId]: isVisible\n      }\n\n      // widgetOrderの更新\n      if (isVisible && !state.widgetOrder.includes(widgetId)) {\n        // 表示に切り替えた場合、widgetOrderに追加\n        state.widgetOrder.push(widgetId)\n      }\n    }\n  },\n\n  actions: {\n    toggleWidget({ commit, state }, widgetId) {\n      commit('SET_WIDGET_STATE', {\n        widgetId,\n        isExpanded: !state.expandStates[widgetId]\n      })\n    },\n    updateWidgetOrder({ commit, state }, order) {\n      // 順序の更新前に検証\n      if (Array.isArray(order) && order.length > 0 &&\n        order.every(id => state.widgetOrder.includes(id))) {\n        commit('SET_WIDGET_ORDER', order)\n      }\n    },\n    async toggleWidgetVisibility({ commit, state }, widgetId) {\n      const newVisibility = !state.widgetVisibility[widgetId]\n\n      // 最後の表示中のウィジェットを非表示にすることを防ぐ\n      const visibleCount = Object.values(state.widgetVisibility).filter(Boolean).length\n      if (!newVisibility && visibleCount <= 1) {\n        return false\n      }\n\n      commit('SET_WIDGET_VISIBILITY', {\n        widgetId,\n        isVisible: newVisibility\n      })\n      return true\n    }\n  }\n}","<template>\n  <v-card class=\"mt-2\" variant=\"text\" elevation=\"0\">\n    <v-card-text class=\"d-flex align-center pa-2\">\n      <v-icon :color=\"getOvertimeColor\" class=\"mr-2\" size=\"24\">mdi-clock-outline</v-icon>\n      <div class=\"overtime-info flex-grow-1\">\n        <div class=\"d-flex align-center\">\n          <span class=\"text-subtitle-2 mr-2 mt-1\">残業時間:</span>\n          <span v-if=\"overtimeHours === 0\" class=\"text-body-1 font-weight-bold\">\n            なし\n          </span>\n          <template v-else>\n            <span class=\"text-body-1 font-weight-bold\" :class=\"getOvertimeColor\">\n              {{ overtimeHours }}時間\n            </span>\n          </template>\n        </div>\n        <v-progress-linear\n          :model-value=\"getOvertimePercentage\"\n          :color=\"getOvertimeColor\"\n          height=\"10\"\n          rounded\n          class=\"w-75 opacity-80 mt-1\"\n        ></v-progress-linear>\n      </div>\n    </v-card-text>\n  </v-card>\n</template>\n\n<script setup>\nimport { computed } from 'vue'\n\nconst props = defineProps({\n  overtimeHours: {\n    type: Number,\n    required: true\n  }\n})\n\nconst maxValue = 15\n\nconst getOvertimeColor = computed(() => {\n  if (props.overtimeHours === 0) return 'blue'\n  if (props.overtimeHours <= maxValue / 2) return 'blue-accent-1'\n  if (props.overtimeHours <= maxValue) return 'warning'\n  return 'error'\n})\n\nconst getOvertimePercentage = computed(() => {\n  return Math.min(props.overtimeHours / maxValue * 100, 100)\n})\n</script>\n\n<style scoped>\n.overtime-info {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n</style>","import script from \"./OvertimeDisplay.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./OvertimeDisplay.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./OvertimeDisplay.vue?vue&type=style&index=0&id=1c360e7e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1c360e7e\"]])\n\nexport default __exports__","<template>\n  <div class=\"widget-container\">\n    <v-card class=\"widget\">\n      <v-card-title \n        class=\"text-subtitle-1 widget-title\"\n        @dblclick=\"handleDblClick\"\n      >\n        <div class=\"d-flex justify-space-between align-center w-100\">\n          <div class=\"py-1\">\n            <v-icon \n              small \n              class=\"mr-1\" \n              aria-hidden=\"true\"\n            >\n              {{ icon }}\n            </v-icon>\n            {{ title }}\n          </div>\n          <slot name=\"header-append\"></slot>\n        </div>\n      </v-card-title>\n      <v-card-text :class=\"contentClass\">\n        <slot></slot>\n      </v-card-text>\n    </v-card>\n  </div>\n</template>\n\n<script setup>\nimport { useStore } from 'vuex'\n\nconst props = defineProps({\n  widgetId: {\n    type: String,\n    required: true\n  },\n  title: {\n    type: String,\n    required: true\n  },\n  icon: {\n    type: String,\n    required: true\n  },\n  contentClass: {\n    type: String,\n    default: 'pt-1 pb-3'\n  },\n  defaultCols: {\n    type: Number,\n    default: 6\n  }\n})\n\nconst store = useStore()\n\n// const expanded = computed(() => store.state.widget.expandStates[props.widgetId])\n\nconst handleDblClick = () => {\n  store.dispatch('widget/toggleWidget', props.widgetId)\n}\n</script>\n\n<style scoped>\n.widget {\n  min-height: 165px;\n  border-radius: 12px;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.widget-container {\n  transition: all 0.3s ease-in-out;\n  height: 100%;\n}\n\n.widget :deep(.v-card-text) {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n.widget-title {\n  cursor: pointer;\n  user-select: none;\n  /* ドラッグ時のカーソルスタイル */\n  &:hover {\n    cursor: grab;\n  }\n  &:active {\n    cursor: grabbing;\n  }\n}\n</style>","import script from \"./BaseWidget.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BaseWidget.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./BaseWidget.vue?vue&type=style&index=0&id=2a7c6598&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2a7c6598\"]])\n\nexport default __exports__","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"js/\" + (chunkId === 53 ? \"webfontloader\" : chunkId) + \".\" + {\"53\":\"c87d3aee\",\"56\":\"fdf07aaa\",\"73\":\"33bb276c\",\"92\":\"aacc6c4c\",\"103\":\"795d88b6\",\"110\":\"a0ae53d0\",\"113\":\"270ae4a4\",\"200\":\"ea56080b\",\"251\":\"f6fb6f91\",\"260\":\"2fe95658\",\"350\":\"a5ea8029\",\"387\":\"84e70460\",\"397\":\"5404cfaa\",\"405\":\"6ac576fe\",\"417\":\"4894be9e\",\"434\":\"1520ea1f\",\"453\":\"9ae56b13\",\"490\":\"66ff5332\",\"870\":\"79dabc76\",\"921\":\"abef07c6\",\"992\":\"8ad81a32\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"css/\" + chunkId + \".\" + {\"73\":\"d8b05ff2\",\"92\":\"c2fc60b6\",\"103\":\"00eb34d7\",\"113\":\"a27867ac\",\"200\":\"5c5cea3d\",\"251\":\"c7a043fb\",\"260\":\"a5e257df\",\"387\":\"c7a043fb\",\"397\":\"06c31fab\",\"405\":\"8eae92fc\",\"417\":\"6bce2ab2\",\"453\":\"5ddfe07b\",\"490\":\"978c9700\",\"870\":\"49238bf3\",\"992\":\"c7a043fb\"}[chunkId] + \".css\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var inProgress = {};\nvar dataWebpackPrefix = \"weekly-report:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","if (typeof document === \"undefined\") return;\nvar createStylesheet = function(chunkId, fullhref, oldTag, resolve, reject) {\n\tvar linkTag = document.createElement(\"link\");\n\n\tlinkTag.rel = \"stylesheet\";\n\tlinkTag.type = \"text/css\";\n\tif (__webpack_require__.nc) {\n\t\tlinkTag.nonce = __webpack_require__.nc;\n\t}\n\tvar onLinkComplete = function(event) {\n\t\t// avoid mem leaks.\n\t\tlinkTag.onerror = linkTag.onload = null;\n\t\tif (event.type === 'load') {\n\t\t\tresolve();\n\t\t} else {\n\t\t\tvar errorType = event && event.type;\n\t\t\tvar realHref = event && event.target && event.target.href || fullhref;\n\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + errorType + \": \" + realHref + \")\");\n\t\t\terr.name = \"ChunkLoadError\";\n\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n\t\t\terr.type = errorType;\n\t\t\terr.request = realHref;\n\t\t\tif (linkTag.parentNode) linkTag.parentNode.removeChild(linkTag)\n\t\t\treject(err);\n\t\t}\n\t}\n\tlinkTag.onerror = linkTag.onload = onLinkComplete;\n\tlinkTag.href = fullhref;\n\n\n\tif (oldTag) {\n\t\toldTag.parentNode.insertBefore(linkTag, oldTag.nextSibling);\n\t} else {\n\t\tdocument.head.appendChild(linkTag);\n\t}\n\treturn linkTag;\n};\nvar findStylesheet = function(href, fullhref) {\n\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n\tfor(var i = 0; i < existingLinkTags.length; i++) {\n\t\tvar tag = existingLinkTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return tag;\n\t}\n\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n\tfor(var i = 0; i < existingStyleTags.length; i++) {\n\t\tvar tag = existingStyleTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\");\n\t\tif(dataHref === href || dataHref === fullhref) return tag;\n\t}\n};\nvar loadStylesheet = function(chunkId) {\n\treturn new Promise(function(resolve, reject) {\n\t\tvar href = __webpack_require__.miniCssF(chunkId);\n\t\tvar fullhref = __webpack_require__.p + href;\n\t\tif(findStylesheet(href, fullhref)) return resolve();\n\t\tcreateStylesheet(chunkId, fullhref, null, resolve, reject);\n\t});\n}\n// object to store loaded CSS chunks\nvar installedCssChunks = {\n\t57: 0\n};\n\n__webpack_require__.f.miniCss = function(chunkId, promises) {\n\tvar cssChunks = {\"73\":1,\"92\":1,\"103\":1,\"113\":1,\"200\":1,\"251\":1,\"260\":1,\"387\":1,\"397\":1,\"405\":1,\"417\":1,\"453\":1,\"490\":1,\"870\":1,\"992\":1};\n\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n\t\tpromises.push(installedCssChunks[chunkId] = loadStylesheet(chunkId).then(function() {\n\t\t\tinstalledCssChunks[chunkId] = 0;\n\t\t}, function(e) {\n\t\t\tdelete installedCssChunks[chunkId];\n\t\t\tthrow e;\n\t\t}));\n\t}\n};\n\n// no hmr\n\n// no prefetching\n\n// no preloaded","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t57: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweekly_report\"] = self[\"webpackChunkweekly_report\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(8192); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["useCalendar","MILLISECONDS_PER_DAY","WEEKDAYS","calendarWeeks","computed","createWeeks","weekCount","weeks","today","Date","setHours","currentDate","getFullYear","getMonth","getDate","setDate","getDay","i","startDate","push","createWeekItem","weekOffset","days","Array","from","length","_","getTime","endDate","getWeekOffset","currentWeekMonday","weekStartDate","tempDate","diffTime","Math","floor","isWeekInRange","week","minDate","minMonday","currentWeekEnd","daysUntilSunday","getWeekNumber","date","d","UTC","dayNum","getUTCDay","setUTCDate","getUTCDate","yearStart","getUTCFullYear","ceil","shouldShowMonth","weekIndex","dayIndex","formatShortMonth","toLocaleDateString","month","isToday","todayTime","isSaturday","isSunday","getStringFromWeek","year","weekNumber","toString","padStart","getWeekFromString","weekString","split","map","Number","jan4th","startOfYear","targetDate","weekStart","getPreviousWeekString","value","prevYear","prevWeek","getCurrentWeekString","getWeekJpText","relativeWeekIndex","abs","formatFullDateTimeJp","isNaN","day","weekday","hour","getHours","minute","getMinutes","formatDateJp","formatDateTimeJp","formattedDate","formattedTime","toLocaleTimeString","formatDateRange","options","formatWeekLabel","useResponsive","smAndDown","width","useDisplay","isMobile","isTablet","isDesktop","isProd","process","getRedirectUrl","port","VUE_APP_PORT","PORT","window","location","protocol","host","getRootUrl","rootUrl","contextPath","feedbackUrl","staticBaseUrl","VUE_APP_STATIC_URL","termsOfServiceUrl","termsOfServiceVersion","privacyPolicyUrl","privacyPolicyVersion","specifiedCommercialTransactionsUrl","STRIPE_PRO_PRICE_ID","VUE_APP_STRIPE_PRO_PRICE_ID","STRIPE_BUSINESS_PRICE_ID","VUE_APP_STRIPE_BUSINESS_PRICE_ID","plans","planId","priceId","name","price","features","adminFeatures","maxMembers","notifications","advisorSettings","accountManagement","organizationFeatures","weeklyReportAdvice","notifyByEmail","notifySubscriptions","advisors","defaultAdvisors","pricePerAccount","getPrice","accountCount","priceDescription","getCurrentSubscription","store","getters","getCurrentPlan","parentOrganizationId","find","p","subscription","showNotification","inject","emit","__emit","useStore","router","useRouter","showDropdown","ref","showLearnMoreSubmenu","user","organizationId","username","email","currentPlan","isParentAccount","navigateToAccounttSetting","openFeedbackForm","open","openTermsOfService","openPrivacyPolicy","openSpecifiedCommercialTransactions","helpMenuItems","prependIcon","title","onClick","handleSignOut","handleDropdownChange","handleBillingClick","__exports__","ConfirmationDialog","defineAsyncComponent","LoadingOverlay","PolicyAcceptanceDialog","DialogUserMenu","navigationItems","items","icon","route","confirmDialog","drawer","isRailMode","isHovered","showAnimation","showMascot","showNavigation","showPolicyDialog","showUserMenu","needsTosAcceptance","needsPrivacyPolicyAcceptance","isPolicyCheckPending","isAuthenticated","showMobileUserMenu","beforeEach","to","next","meta","hideAnimation","hideMascot","hideNavigation","isRailModeActive","navigationWidth","appStyle","paddingBottom","currentRoute","bgImageStyle","marginLeft","bottom","toggleDrawerMode","notification","reactive","show","type","message","getNotificationIcon","getNotificationColor","error","showError","closeNotification","showConfirmDialogGlobal","async","color","provide","navigateTo","params","checkPolicies","needsTos","needsPrivacy","dispatch","handlePolicyAcceptance","tosAccepted","privacyPolicyAccepted","handlePolicyDisacceptance","watch","newValue","onMounted","img","Image","src","URL","href","savedRailMode","localStorage","getItem","JSON","parse","setItem","stringify","isFullWidthPage","fullWidth","isValidEmail","re","test","getMimeEncodedLength","text","utf8Bytes","TextEncoder","encode","base64Length","PROBLEMATIC_CHARS","circled","romanNumerals","enclosed","deviceDependent","validateSenderName","isValid","code","charCodeAt","pattern","Object","entries","examples","match","join","unescapedSpecialChars","unescapedQuotes","encodedLength","validateOrganizationId","useRoute","currentView","path","signInEmail","signInPassword","signUpEmail","signUpPassword","organizationName","confirmEmail","confirmCode","newPassword","confirmNewPassword","loading","successMessage","errorMessage","signUpForm","agreeToTerms","agreeToPrivacy","isAlreadyAuthenticated","titles","signIn","signUp","confirm","changePassword","toggleButtonText","texts","isAgreedToAll","clearErrorMessage","handleSignIn","signInResult","password","nextStep","signInStep","sessionStorage","fetchError","includes","handleAuthError","handleSignUpSubmit","valid","validate","org","getOrganization","signUpUser","userAttributes","confirmSignUpUser","confirmSignUp","confirmationCode","organization","sender","senderName","submitOrganization","resendConfirmationCode","resendSignUpCode","handleChangePassword","confirmSignIn","challengeResponse","oldPassword","removeItem","signOut","errorMessages","UserAlreadyAuthenticatedException","UserNotConfirmedException","NotAuthorizedException","UserNotFoundException","NewPasswordRequiredException","PasswordResetRequiredException","toggleView","props","__props","createStar","starEl","document","createElement","className","size","random","maxSize","minSize","duration","speedVariation","baseSpeed","assign","style","height","left","top","backgroundColor","starColor","position","borderRadius","animation","moveUp","container","getElementById","totalStars","appendChild","onUnmounted","innerHTML","isLoading","members","reportStatus","fetchOrganizationInfo","memberList","Promise","all","listOrganizationMembers","err","fetchReportStatus","status","getReportStatus","reportedCount","pending","count","inFeedback","confirmed","fetchAll","useReport","initialReport","memberUuid","initialRatings","ratingItems","reduce","acc","item","key","projects","workItems","content","overtimeHours","issues","improvements","rating","label","itemLabels","negative","statusOptions","getStatusText","option","e","getStatusColor","useWidgets","visibleWidgets","state","widget","widgetOrder","filter","id","widgetVisibility","widgetActions","isExpanded","expandStates","isVisible","toggle","toggleVisibility","updateOrder","newOrder","isArray","currentVisible","every","getWidgetComponent","widgetId","WIDGET_DEFINITIONS","component","onSelectWeek","isSelected","toRefs","hoveredWeek","onHoverWeek","onLeaveWeek","weekdays","class","getWeekKey","containerWidth","monthFontSize","updateContainerWidth","querySelector","offsetWidth","addEventListener","removeEventListener","expanded","handleWeekChange","delta","newIndex","min","max","getTooltipText","member","displayName","Boolean","memberCount","selectedMember","navigateToReport","baseUrl","url","components","CalendarWidget","markRaw","OrganizationWidget","ReportRequestWidget","WeeklyReportWidget","OvertimeChart","then","m","default","StressChart","DisabilityChart","AchievementChart","TodoListWidget","dayOfWeekToNumber","sunday","monday","tuesday","wednesday","thursday","friday","saturday","isOvertimeDataReady","isStressDataReady","isDisabilityDataReady","isAchievementDataReady","nextRequestDateTimeString","overtimeData","labels","datasets","stressData","disabilityData","achievementData","filteredStatusOptions","none","statusCounts","feedback","approved","statusMembers","nextRequestDateTime","requestEnabled","requestDayOfWeek","requestTime","dayOfWeek","toLowerCase","hours","minutes","undefined","now","nextDate","daysUntilNext","updateNextRequestDateTimeString","formatChartData","data","dataKey","dataset","index","borderColor","getColor","fill","colorPalette","getRandomColor","r","g","b","fetchInitial","orgInfo","fetchSecondary","statsData","getStatsData","handleReload","nextTick","immediate","getWidgetProps","propConfigs","calendar","v","overtime","createChartProps","stress","disability","achievement","reportRequest","todo","weeklyReport","chartData","isDataReady","currentWidgets","get","set","newList","isMenuOpen","handleVisibilityChange","internalSelectedWeek","selectedWeek","isHovering","showAllWeeks","visibleWeeks","handleSelectWeek","setTimeout","selectedWeekRange","handleMouseEnter","handleMouseLeave","showConfirmDialog","internalProjectNames","projectNames","filteredProjectNames","inputValue","modelValue","lowerInput","trim","existingProjects","Set","filtered","has","updateValue","addProjectOption","project","newProjectList","updateMemberProjects","removeProjectOption","handleKeyDown","event","isComposing","preventDefault","moveFocusToNextInput","target","currentElement","form","closest","focusableElements","querySelectorAll","el","classList","contains","parentElement","currentIndex","indexOf","focus","RATING_CONSTANTS","NEUTRAL_ICON","NEGATIVE_ICON","POSITIVE_ICON","NO_CHANGE_ICON","INCREASE_ICON","DECREASE_ICON","COMPARISON_COLOR","NO_COMPARISON_LABEL","IMPROVEMENT_LABEL","DECLINE_LABEL","NO_CHANGE_LABEL","NEGATIVE_COLOR","POSITIVE_COLOR","useRatingLogic","comparison","half","fullIcon","activeIconColor","NEUTRAL_COLOR_NEGATIVE","NEUTRAL_COLOR_POSITIVE","calcFullIcon","calcActiveIconColor","positiveColor","negativeColor","distanceFromCenter","alpha","startColor","endColor","interpolateColor","color1","color2","factor","fixedAlpha","hsl1","rgbToHsl","parseColor","hsl2","h","s","l","hslToRgbaString","hex","replace","parseInt","substring","rgb","a","q","hue2rgb","t","round","updateActiveIcon","comparisonIcon","comparisonColor","comparisonLabel","inactiveIconColor","handleModelValueUpdate","formState","report","isNew","previousWeekReport","expandedPanel","errors","isSubmitDisabled","isReportConfirmed","workItemRefs","expandedPanels","showStressDialog","overtimeInputValue","isHighStress","sortedFeedbacks","feedbacks","sort","createdAt","isLatestFeedback","updateProjectList","updateOvertime","parseFloat","toFixed","increaseOvertime","decreaseOvertime","setWorkItemRef","projectIndex","itemIndex","isLastItem","addWorkItem","focusNewWorkItem","focusNextField","nextIndex","inputs","currentInput","currentInputIndex","removeWorkItem","splice","copyFromPreviousWeek","addProject","removeProject","scrollToFeedback","feedbackElement","scrollIntoView","behavior","block","checkAndScrollToFeedback","query","fetchReport","previousWeekString","fetchedReport","fetchedPrevReport","memberProjects","getReport","getMemberProjects","validateReport","forEach","validWorkItems","removeEmptyWorkItems","handleSubmit","stressHelp","cleanedReport","submitReport","updateReport","handleUndo","expandFeedbackPanel","MemberInfoDialog","StressCheckDialog","ReportCompleteDialog","isValidWeek","memberInfoDialog","stressCheckDialog","isReportSubmitted","lastReportContent","isAdviceEnabled","enabledAdvisors","openMemberInfoDialog","openDialog","openStressCheckDialog","handleStressLevelUpdate","level","handleWeekSelection","handleReset","handleReportSubmitted","reportContent","handleBackToReport","handleClose","close","newWeekParam","organizationData","memberData","getMember","generateToken","apiClient","post","verifyToken","token","sendRequest","countdown","timer","startCountdown","clearInterval","setInterval","newVal","onBeforeUnmount","ScrollNavigation","reports","selectedStatus","lastWeekRatings","newFeedbacks","unconfirmedCount","shouldExpandPanel","updateExpandedPanels","watchEffect","counts","isAllCompleted","filteredReports","copyShareUrl","result","shareUrl","expiryDate","comment","shareText","navigator","clipboard","writeText","preparedRatingItems","slice","reverse","getValue","getComparison","fetchReports","fetchedReports","listReports","Error","sortReports","statusOrder","statusDiff","memberId","localeCompare","processReports","reportMap","Map","processedReports","handleFeedback","newFeedback","toISOString","submitFeedback","updatedReport","handleApprove","confirmMessage","updateData","approvedAt","updatedReports","handleResend","fetchData","fetchedPrevReports","allSettled","listMembers","initializeState","previousCompletionState","isInitialized","initReportRefs","reportRefs","showCompletionDialog","currentlyComplete","readonly","newWeekString","keys","response","newMember","editingMember","validationErrors","editValidationErrors","originalMember","originalOrgName","headers","align","sortable","useOrganizationValidation","validateMember","validateNewMember","some","getAdminFeatures","isMaxMembersReached","memberManagement","setEditingMember","handleAddMember","newMemberData","createMember","handleUpdateMember","updateMember","findIndex","handleDeleteMember","deleteMember","cancelEdit","isOrgNameChanged","handleUpdateOrganization","updateOrganization","orgResult","membersResult","currentOrganizationId","account","accounts","isFormValid","editingAccount","originalAccount","getStatusIcon","getStatusLabel","validateForm","validation","loadAccounts","getAccounts","getErrorMessage","createAccount","reset","errorDetail","handleDeleteAccount","accountItem","deleteAccount","deleteOrganizationCompletely","handleResendInvitation","resendInvitation","handleEditAccount","handleSaveEdit","updateAccount","oldEmail","maxAccountCount","hasAccess","hasAccountManagement","checkEmailVerification","verifyEmailAddress","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","initializeApp","isSubscribed","notificationStatus","isServiceWorkerReady","hasError","isOnline","onLine","statusCheckInterval","adminId","iconName","effectiveSubscriptionState","iconColor","statusText","checkNotificationStatus","checkSubscription","updateOnlineStatus","initializeServiceWorker","swPath","registration","serviceWorker","register","scope","waitForServiceWorkerReady","clearError","setError","showReloadPrompt","hasShownReloadPrompt","reload","resolve","reject","timeout","checkState","active","controller","clearTimeout","Notification","permission","endpoint","getStoredEndpointArn","serverEndpoint","getPushSubscription","togglePushNotification","requestPermission","subscribeToPush","unsubscribeFromPush","messaging","getMessaging","getRegistration","fcmToken","getToken","serviceWorkerRegistration","saveSubscription","deleteSubscription","registerPushSubscription","storeEndpointArn","endpointArn","removePushSubscription","removeStoredEndpointArn","showInstructions","alert","clearServiceWorkerCache","cacheNames","caches","cacheName","delete","resetServiceWorker","registrations","getRegistrations","unregister","activeTab","useEmailVerification","verifying","statusColor","Success","Failed","Pending","Checking","statusIcon","check","verify","emailVerificationStatus","emailVerificationStatusColor","emailVerificationStatusIcon","emailVerificationStatusText","checkEmailVerificationStatus","verifyEmail","verifyingEmail","reportSettings","reportWeek","originalSettings","isFormChanged","emailRules","senderNameRules","daysOfWeek","time","reportWeekOptions","oldValue","timeoutId","isNotifyByEmail","toggleMailNotification","updateOrganizationFeatures","selectedAdvisors","originalAdvisors","isSaving","isAdvisorSettingsChanged","currentAdvisors","originalAdvisorsList","availableAdvisors","advisorRoles","fromEntries","hasSelectedAdvisor","toggleAdvisor","advisorKey","saveAdvisorSettings","routes","beforeEnter","SignIn","Overview","requiresAuth","Dashboard","OrganizationManagement","OrganizationAccount","WeeklyReview","ReportSetting","WeeklyReport","WeeklyReportSummary","createRouter","history","createWebHistory","matched","record","redirect","fullPath","afterEach","createVuetify","theme","themes","light","colors","primary","secondary","menu","defaults","VCard","elevation","VRating","hover","loadFonts","webFontLoader","load","google","families","Auth","Cognito","region","userPoolId","userPoolClientId","signUpVerificationMethod","loginWith","oauth","domain","scopes","redirectSignIn","redirectSignOut","responseType","Amplify","configure","amplifyConfig","ssr","createApp","App","use","vuetify","config","errorHandler","vm","info","mount","BASE_PATH","put","stage","API_ENDPOINT","LOADING_DELAY","api","axios","create","baseURL","withCredentials","activeRequests","loadingTimeout","isRefreshing","failedQueue","startLoading","stopLoading","ERROR_TYPES","CORS","NETWORK","AUTH","UNKNOWN","getErrorType","isCORS","checkTokenError","errorType","interceptors","request","processQueue","prom","originalRequest","_corsRetry","newToken","refreshError","_retry","catch","_networkRetry","currentToken","handleError","callApi","method","queryParams","manager","description","image","require","career","mental","reframe","scenario","detective","timeNavi","getWeeklyReportAdvice","advisorRole","advice","remainingTickets","getWeeklyReportSummary","summary","insights","positive","orgData","deleteOrganization","mode","createSubscription","subscriptionData","changePlan","changeData","currentPeriodEnd","getPaymentMethods","updatePaymentMethod","customerId","getInvoices","getSubscriptionInfo","cancelSubscription","subscriptionId","updateMemberExtraInfo","extraInfo","listMemberReports","exportReports","AUTH_CONSTANTS","CACHE_DURATION","ERROR_MESSAGES","RATE_LIMIT","GENERIC","DELETE_ACCOUNT","NO_TOKEN","SUBSCRIPTION_UPDATE","TEMP_PASSWORD","PASSWORD_RESET","PASSWORD_CHANGE_REQUIRED","createErrorHandler","prefix","mapErrorMessage","errorMap","msg","LimitExceededException","InvalidParameterException","namespaced","lastTokenFetch","lastUserFetch","cognitoUserSub","stripeCustomerId","mutations","setUser","setToken","setCognitoUserSub","sub","clearAuthState","updateUserPolicyVersions","tosVersion","setSubscription","actions","fetchUser","commit","attributes","fetchUserAttributes","session","fetchAuthSession","challengeName","userInfo","fetchSubscriptionInfo","fetchAuthToken","forceRefresh","tokens","idToken","validateToken","handleAuthFailure","updatePassword","success","deleteUserAccount","deleteUser","checkPolicyAcceptance","updatePolicyAcceptance","updates","updateUserAttributes","updateSubscriptionAttributes","completeNewPassword","currentSubscription","createStore","SET_LOADING","setLoading","modules","auth","authModule","plugins","createPersistedState","paths","storage","defaultExpanded","defaultVisible","createInitialState","def","SET_WIDGET_STATE","SET_WIDGET_ORDER","order","hidden","SET_WIDGET_VISIBILITY","toggleWidget","updateWidgetOrder","toggleWidgetVisibility","newVisibility","visibleCount","values","maxValue","getOvertimeColor","getOvertimePercentage","handleDblClick","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","n","getter","__esModule","leafPrototypes","getProto","getPrototypeOf","obj","__proto__","this","ns","current","getOwnPropertyNames","definition","o","defineProperty","enumerable","f","chunkId","promises","u","miniCssF","globalThis","Function","prop","prototype","hasOwnProperty","inProgress","dataWebpackPrefix","done","script","needAttach","scripts","getElementsByTagName","getAttribute","charset","nc","setAttribute","onScriptComplete","prev","onerror","onload","doneFns","parentNode","removeChild","bind","head","Symbol","toStringTag","createStylesheet","fullhref","oldTag","linkTag","rel","nonce","onLinkComplete","realHref","insertBefore","nextSibling","findStylesheet","existingLinkTags","tag","dataHref","existingStyleTags","loadStylesheet","installedCssChunks","miniCss","cssChunks","baseURI","self","installedChunks","installedChunkData","promise","loadingEnded","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}