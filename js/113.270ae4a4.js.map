{"version":3,"file":"js/113.270ae4a4.js","mappings":"0WAoEA,MAAMA,EAAQC,EAORC,GAAeC,EAAAA,EAAAA,KAAI,GACnBC,GAAoBD,EAAAA,EAAAA,MAAI,GACxBE,GAAuBF,EAAAA,EAAAA,KAAI,GAE3BG,EAAcH,GACdA,GAAOA,EAAII,KAGXJ,GAAsB,kBAARA,GAAoBK,OAAOC,UAAUC,eAAeC,KAAKR,EAAK,OAFvEA,EAAII,IAKNJ,EAGHS,EAAkBC,IACtB,IAAIC,EAAWZ,EAAaa,MAAQF,EACpC,GAAIC,GAAY,GAAKA,EAAWd,EAAMgB,WAAWC,OAAQ,CACvD,MAAMC,EAAWZ,EAAWN,EAAMgB,WAAWF,IAC7C,GAAII,GAAsD,oBAAnCA,EAASC,sBAAsC,CACpEf,EAAkBW,OAAQ,EAC1BV,EAAqBU,MAAQK,KAAKC,MAGlC,MAAMC,EAAaJ,EAASC,wBACtBI,EAAiBC,KAAKC,IAAI,EAAGC,OAAOC,QAAUL,EAAWM,IAAM,IAGrEF,OAAOG,SAAS,CACdD,IAAKL,EACLO,SAAU,WAGZC,YAAW,KACT7B,EAAaa,MAAQD,EACrBiB,YAAW,KACT3B,EAAkBW,OAAQ,CAAK,GAC9B,IAAK,GACP,IACL,CACF,GAGIiB,EAAWA,CAACC,EAAMC,KACtB,IAAIC,EACJ,OAAO,YAA6BC,GAClC,MAAMC,EAAQA,KACZC,aAAaH,GACbF,KAAQG,EAAK,EAEfE,aAAaH,GACbA,EAAUJ,WAAWM,EAAOH,EAC9B,CAAC,EAGGK,EAAeP,GAAS,KAC5B,GAAI5B,EAAkBW,OAASK,KAAKC,MAAQhB,EAAqBU,MAAQ,IACvE,OAEF,MAAMyB,EAAiBd,OAAOe,YACxBC,EAAiBhB,OAAOC,QAAUa,EAAiB,EAEzD,IAAIG,GAAgB,EAChBC,EAAkBC,IAEtB7C,EAAMgB,WAAW8B,SAAQ,CAAC3C,EAAK4C,KAC7B,MAAMC,EAAU1C,EAAWH,GAC3B,GAAI6C,GAAoD,oBAAlCA,EAAQ7B,sBAAsC,CAClE,MAAM8B,EAAOD,EAAQ7B,wBACf+B,EAAgBD,EAAKrB,IAAMqB,EAAKE,OAAS,EACzCC,EAAW5B,KAAK6B,IAAIH,EAAgBR,GAEtCU,EAAWR,IACbA,EAAkBQ,EAClBT,EAAeI,EAEnB,MAGoB,IAAlBJ,GAAuBA,IAAiBzC,EAAaa,QACvDb,EAAaa,MAAQ4B,EACvB,GACC,KAEGW,EAAoBA,KACxB,MAAMC,EAAgBC,SAASD,cAC/B,OAAOA,IACmC,aAAxCA,EAAcE,QAAQC,eACmB,UAAxCH,EAAcE,QAAQC,eAAoD,SAAvBH,EAAcI,KACnE,EAGGC,EAAiBC,IAChBP,MACe,YAAdO,EAAMC,KACRD,EAAME,iBACNnD,GAAgB,IACO,cAAdiD,EAAMC,MACfD,EAAME,iBACNnD,EAAe,IAEnB,E,OAGFoD,EAAAA,EAAAA,YAAU,KACRtC,OAAOuC,iBAAiB,SAAU1B,GAClCb,OAAOuC,iBAAiB,UAAWL,GACnCrB,GAAc,KAGhB2B,EAAAA,EAAAA,cAAY,KACVxC,OAAOyC,oBAAoB,SAAU5B,GACrCb,OAAOyC,oBAAoB,UAAWP,EAAc,KAGtDQ,EAAAA,EAAAA,QAAM,IAAMpE,EAAMgB,aAAY,KAC5BuB,GAAc,GACb,CAAE8B,MAAM,I,8tDCzLX,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://weekly-report/./src/components/ScrollNavigation.vue","webpack://weekly-report/./src/components/ScrollNavigation.vue?6b58"],"sourcesContent":["<template>\n  <div class=\"scroll-navigation\">\n    <v-tooltip\n      bottom\n      :open-on-hover=\"true\"\n      :open-on-focus=\"true\"\n    >\n      <template #activator=\"{ props: tooltipProps }\">\n        <div v-bind=\"tooltipProps\">\n          <v-btn\n            icon\n            elevation=\"2\"\n            fab\n            small\n            tabindex=\"-1\"\n            color=\"blue-grey-lighten-4\"\n            :readonly=\"currentIndex === 0\"\n            aria-label=\"前のレポートへスクロール\"\n            @click=\"scrollToReport(-1)\"\n          >\n            <v-icon>mdi-chevron-up</v-icon>\n          </v-btn>\n        </div>\n      </template>\n      <span>上矢印キーでも移動できます</span>\n    </v-tooltip>\n\n    <div class=\"nav-item\">\n      <v-chip\n        variant=\"text\"\n        color=\"blue-grey\"\n        class=\"position-chip\"\n        :aria-label=\"`現在のレポート: ${currentIndex + 1}/${reportRefs.length}`\"\n      >\n        {{ currentIndex + 1 }} / {{ reportRefs.length }}\n      </v-chip>\n    </div>\n\n    <v-tooltip\n      top\n      :open-on-hover=\"true\"\n      :open-on-focus=\"true\"\n    >\n      <template #activator=\"{ props: tooltipProps }\">\n        <div v-bind=\"tooltipProps\">\n          <v-btn\n            icon\n            elevation=\"2\"\n            fab\n            small\n            tabindex=\"-1\"\n            color=\"blue-grey-lighten-4\"\n            :readonly=\"currentIndex === reportRefs.length - 1\"\n            aria-label=\"次のレポートへスクロール\"\n            @click=\"scrollToReport(1)\"\n          >\n            <v-icon>mdi-chevron-down</v-icon>\n          </v-btn>\n        </div>\n      </template>\n      <span>下矢印キーでも移動できます</span>\n    </v-tooltip>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, onUnmounted, watch } from 'vue'\n\nconst props = defineProps({\n  reportRefs: {\n    type: Array,\n    required: true\n  }\n})\n\nconst currentIndex = ref(0)\nconst isManualScrolling = ref(false)\nconst lastManualScrollTime = ref(0)\n\nconst getElement = (ref) => {\n  if (ref && ref.$el) {\n    return ref.$el\n  }\n  if (ref && typeof ref === 'object' && Object.prototype.hasOwnProperty.call(ref, '$el')) {\n    return ref.$el\n  }\n  return ref\n}\n\nconst scrollToReport = (direction) => {\n  let newIndex = currentIndex.value + direction\n  if (newIndex >= 0 && newIndex < props.reportRefs.length) {\n    const targetEl = getElement(props.reportRefs[newIndex])\n    if (targetEl && typeof targetEl.getBoundingClientRect === 'function') {\n      isManualScrolling.value = true\n      lastManualScrollTime.value = Date.now()\n      \n      // スクロール位置を計算\n      const targetRect = targetEl.getBoundingClientRect()\n      const scrollPosition = Math.max(0, window.scrollY + targetRect.top - 10) // 余白を追加\n\n      // スムーズスクロールを実行\n      window.scrollTo({\n        top: scrollPosition,\n        behavior: 'smooth'\n      })\n\n      setTimeout(() => {\n        currentIndex.value = newIndex\n        setTimeout(() => {\n          isManualScrolling.value = false\n        }, 1000)\n      }, 500)\n    }\n  }\n}\n\nconst debounce = (func, wait) => {\n  let timeout\n  return function executedFunction(...args) {\n    const later = () => {\n      clearTimeout(timeout)\n      func(...args)\n    }\n    clearTimeout(timeout)\n    timeout = setTimeout(later, wait)\n  }\n}\n\nconst handleScroll = debounce(() => {\n  if (isManualScrolling.value || Date.now() - lastManualScrollTime.value < 1000) {\n    return\n  }\n  const viewportHeight = window.innerHeight\n  const viewportCenter = window.scrollY + viewportHeight / 2\n\n  let closestIndex = -1\n  let closestDistance = Infinity\n\n  props.reportRefs.forEach((ref, index) => {\n    const element = getElement(ref)\n    if (element && typeof element.getBoundingClientRect === 'function') {\n      const rect = element.getBoundingClientRect()\n      const elementCenter = rect.top + rect.height / 2\n      const distance = Math.abs(elementCenter - viewportCenter)\n      \n      if (distance < closestDistance) {\n        closestDistance = distance\n        closestIndex = index\n      }\n    }\n  })\n\n  if (closestIndex !== -1 && closestIndex !== currentIndex.value) {\n    currentIndex.value = closestIndex\n  }\n}, 100)\n\nconst isTextAreaFocused = () => {\n  const activeElement = document.activeElement\n  return activeElement && (\n    activeElement.tagName.toLowerCase() === 'textarea' ||\n    (activeElement.tagName.toLowerCase() === 'input' && activeElement.type === 'text')\n  )\n}\n\nconst handleKeyDown = (event) => {\n  if (!isTextAreaFocused()) {\n    if (event.key === 'ArrowUp') {\n      event.preventDefault()\n      scrollToReport(-1)\n    } else if (event.key === 'ArrowDown') {\n      event.preventDefault()\n      scrollToReport(1)\n    }\n  }\n}\n\nonMounted(() => {\n  window.addEventListener('scroll', handleScroll)\n  window.addEventListener('keydown', handleKeyDown)\n  handleScroll()\n})\n\nonUnmounted(() => {\n  window.removeEventListener('scroll', handleScroll)\n  window.removeEventListener('keydown', handleKeyDown)\n})\n\nwatch(() => props.reportRefs, () => {\n  handleScroll()\n}, { deep: true })\n</script>\n\n<style scoped>\n.scroll-navigation {\n  position: fixed;\n  right: 16px;\n  top: 50%;\n  transform: translateY(-50%);\n  z-index: 9999;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 150px; /* 全体の高さを固定 */\n  justify-content: space-between;\n}\n\n.nav-item {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 40px; /* ボタンとチップの高さを統一 */\n  margin-top: 2px;\n}\n\n.nav-btn {\n  width: 40px;\n  height: 40px;\n}\n\n.position-chip {\n  min-width: 60px;\n  height: 32px; /* チップの高さを調整 */\n  font-size: 14px;\n  justify-content: center;\n}\n</style>","import script from \"./ScrollNavigation.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ScrollNavigation.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ScrollNavigation.vue?vue&type=style&index=0&id=8a6ff302&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-8a6ff302\"]])\n\nexport default __exports__"],"names":["props","__props","currentIndex","ref","isManualScrolling","lastManualScrollTime","getElement","$el","Object","prototype","hasOwnProperty","call","scrollToReport","direction","newIndex","value","reportRefs","length","targetEl","getBoundingClientRect","Date","now","targetRect","scrollPosition","Math","max","window","scrollY","top","scrollTo","behavior","setTimeout","debounce","func","wait","timeout","args","later","clearTimeout","handleScroll","viewportHeight","innerHeight","viewportCenter","closestIndex","closestDistance","Infinity","forEach","index","element","rect","elementCenter","height","distance","abs","isTextAreaFocused","activeElement","document","tagName","toLowerCase","type","handleKeyDown","event","key","preventDefault","onMounted","addEventListener","onUnmounted","removeEventListener","watch","deep","__exports__"],"sourceRoot":""}