{"version":3,"file":"js/103.795d88b6.js","mappings":"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","sources":["webpack://weekly-report/./src/components/chart/RatingLineChart.vue","webpack://weekly-report/./src/components/chart/RatingLineChart.vue?619d","webpack://weekly-report/./src/components/ReportSummary.vue","webpack://weekly-report/./src/components/ReportSummary.vue?ee9b","webpack://weekly-report/./src/views/MemberReports.vue","webpack://weekly-report/./src/views/MemberReports.vue?a1ba"],"sourcesContent":["<template>\n  <div class=\"rating-chart\">\n    <canvas ref=\"chartRef\"></canvas>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, watch, computed, onBeforeUnmount } from 'vue'\nimport { Chart } from 'chart.js'\nimport { updateChartInstance } from './chartUtils'\n\nconst props = defineProps({\n  chartData: {\n    type: Object,\n    required: true\n  }\n})\n\nconst chartRef = ref(null)\nlet chartInstance = null\n\nconst getMaxOvertimeHours = (datasets) => {\n  const overtimeDataset = datasets.find(d => d.yAxisID === 'y1')\n  if (!overtimeDataset) return 3\n  const maxHours = Math.ceil(Math.max(...overtimeDataset.data))\n  return Math.max(3, maxHours)\n}\nconst overtimeStepSize = computed(() => Math.max(1, Math.ceil(getMaxOvertimeHours.value / 5)))\n\nconst chartOptions = {\n  responsive: true,\n  maintainAspectRatio: false,\n  plugins: {\n    legend: {\n      position: 'bottom'\n    }\n  },\n  scales: {\n    y: {\n      type: 'linear',\n      position: 'left',\n      min: 1,\n      max: 5,\n      ticks: {\n        stepSize: 1,\n        precision: 0,\n        callback: function(value) {\n          return Number.isInteger(value) ? value : ''\n        }\n      },\n      title: {\n        display: true,\n        text: '評価'\n      }\n    },\n    y1: {\n      type: 'linear',\n      position: 'right',\n      min: 0,\n      grid: {\n        drawOnChartArea: false\n      },\n      ticks: {\n        stepSize: overtimeStepSize.value,\n        precision: 0,\n        callback: function(value) {\n          return value + 'h'\n        }\n      },\n      title: {\n        display: true,\n        text: '残業時間'\n      },\n      afterDataLimits: (scale) => {\n        scale.max = getMaxOvertimeHours(props.chartData.datasets)\n      }\n    }\n  }\n}\n\nonMounted(() => {\n  if (chartRef.value) {\n    chartInstance = new Chart(chartRef.value, {\n      type: 'line',\n      data: props.chartData,\n      options: chartOptions\n    })\n  }\n})\n\nwatch(() => props.chartData, (newData) => {\n  if (chartInstance && newData) {\n    updateChartInstance({\n      chart: chartInstance,\n      chartData: newData,\n      isTop3: false,\n      options: chartOptions\n    })\n  }\n}, { deep: true })\n\nonBeforeUnmount(() => {\n  if (chartInstance) {\n    chartInstance.destroy()\n    chartInstance = null\n  }\n})\n</script>\n\n<style scoped>\n.rating-chart {\n  height: 240px;\n  position: relative;\n  width: 100%;\n}\n</style>\n","import script from \"./RatingLineChart.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./RatingLineChart.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./RatingLineChart.vue?vue&type=style&index=0&id=d80d15a0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d80d15a0\"]])\n\nexport default __exports__","<template>\n  <v-card rounded=\"lg\">\n    <v-card-title class=\"d-flex align-center justify-space-between\">\n      <div class=\"d-flex align-center\">\n        <v-icon icon=\"mdi-magnify-scan\" class=\"mr-2\"></v-icon>\n        活動分析\n      </div>\n      <v-btn\n        :disabled=\"loading\"\n        color=\"secondary\"\n        variant=\"tonal\"\n        @click=\"generateSummary\"\n      >\n        <v-icon\n          icon=\"mdi-auto-fix\"\n          size=\"20\"\n          class=\"mr-1\"\n        ></v-icon>\n        {{ summary ? '再分析' : 'AI分析' }}\n      </v-btn>\n    </v-card-title>\n    <v-card-text>\n      <div v-if=\"loading\" class=\"d-flex align-center justify-center py-4\">\n        <v-progress-circular indeterminate size=\"42\" width=\"8\" color=\"secondary\"></v-progress-circular>\n      </div>\n      <template v-else>\n        <div v-if=\"error\" class=\"text-error\">\n          {{ error }}\n        </div>\n        <div v-else-if=\"!summary && !insights.length\" class=\"text-subtitle-1 text-medium-emphasis text-center py-4\">\n          ボタンをクリックして分析レポートを生成してください\n        </div>\n        <div v-else class=\"px-4\">\n          <div class=\"text-h6 mb-2\">全体の要約</div>\n          <p class=\"text-body-1 px-1\">{{ summary }}</p>\n          \n          <v-divider class=\"my-4\"></v-divider>\n          \n          <template v-if=\"insights.positive.length\">\n            <div class=\"text-subtitle-1 font-weight-medium mt-2 mb-1\">\n              <v-icon color=\"success\" class=\"mr-1\">mdi-check-circle</v-icon>\n              良好な点\n            </div>\n            <v-list density=\"compact\" class=\"pt-0\">\n              <v-list-item\n                v-for=\"(insight, index) in insights.positive\"\n                :key=\"'p'+index\"\n                class=\"px-2 py-1\"\n              >\n                <v-list-item-title class=\"text-wrap d-flex align-center\">\n                  <v-icon icon=\"mdi-circle-small\"></v-icon>\n                  <span class=\"flex-grow-1\">{{ insight.text }}</span>\n                  <v-chip\n                    v-tooltip:top=\"getScoreDescription(insight.score, true)\"\n                    :color=\"getScoreColor(insight.score)\"\n                    class=\"ml-2\"\n                  >\n                    {{ formatScore(insight.score) }}\n                  </v-chip>\n                </v-list-item-title>\n              </v-list-item>\n            </v-list>\n          </template>\n          \n          <template v-if=\"insights.negative.length\">\n            <div class=\"text-subtitle-1 font-weight-medium mt-3 mb-1\">\n              <v-icon color=\"warning\" class=\"mr-1\">mdi-alert</v-icon>\n              注意点・課題\n            </div>\n            <v-list density=\"compact\" class=\"pt-0\">\n              <v-list-item\n                v-for=\"(insight, index) in insights.negative\"\n                :key=\"'n'+index\"\n                class=\"px-2 py-1\"\n              >\n                <v-list-item-title class=\"text-wrap d-flex align-center\">\n                  <v-icon icon=\"mdi-circle-small\"></v-icon>\n                  <span class=\"flex-grow-1\">{{ insight.text }}</span>\n                  <v-chip\n                    v-tooltip:top=\"getScoreDescription(insight.score, false)\"\n                    :color=\"getScoreColor(insight.score)\"\n                    class=\"ml-2\"\n                  >\n                    {{ formatScore(insight.score) }}\n                  </v-chip>\n                </v-list-item-title>\n              </v-list-item>\n            </v-list>\n          </template>\n        </div>\n      </template>\n    </v-card-text>\n  </v-card>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport { getWeeklyReportSummary } from '@/services/bedrockService'\n\nconst props = defineProps({\n  memberUuid: {\n    type: String,\n    required: true\n  }\n})\n\nconst loading = ref(false)\nconst error = ref(null)\nconst summary = ref('')\nconst insights = ref([])\n\nconst generateSummary = async () => {\n  loading.value = true\n  error.value = null\n  \n  try {\n    const result = await getWeeklyReportSummary(props.memberUuid)\n    summary.value = result.summary\n    insights.value = result.insights\n    \n    if (!summary.value && !insights.value?.positive?.length && !insights.value?.negative?.length) {\n      error.value = 'サマリーの生成に失敗しました'\n    }\n  } catch (err) {\n    error.value = err.message || 'サマリーの生成に失敗しました'\n    console.error('Summary generation error:', err)\n  } finally {\n    loading.value = false\n  }\n}\n\nconst formatScore = (score) => {\n  return score ? score.toFixed(0) : '0'\n}\n\nconst getScoreColor = (score) => {\n  if (score >= 90) return 'error'\n  return 'grey'\n}\n\nconst getScoreDescription = (score, isPositive = false) => {\n  if (isPositive) {\n    if (score >= 90) return '非常に優れた成果です。継続して維持してください。'\n    if (score >= 70) return '良好な成果が出ています。さらなる向上が期待できます。'\n    if (score >= 50) return '一定の成果が出ています。'\n    return '小さな前進が見られます。'\n  } else {\n    if (score >= 90) return '非常に重要な課題です。早急な対応が推奨されます。'\n    if (score >= 70) return '重要な課題です。計画的な対応を検討してください。'\n    if (score >= 50) return '要注意の課題です。状況を監視してください。'\n    return '参考程度の課題です。余裕があれば検討してください。'\n  }\n}\n</script>\n\n<style scoped>\n.text-wrap {\n  white-space: normal;\n  word-break: break-word;\n  line-height: 1.6;\n}\n</style>\n","import script from \"./ReportSummary.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ReportSummary.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ReportSummary.vue?vue&type=style&index=0&id=7351afb4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7351afb4\"]])\n\nexport default __exports__","<template>\n  <v-container>\n    <v-row>\n      <v-col>\n        <div class=\"d-flex align-center mb-4\">\n          <v-btn\n            icon=\"mdi-arrow-left\"\n            variant=\"tonal\"\n            class=\"ml-n16 mr-4\"\n            @click=\"$router.back()\"\n          ></v-btn>\n          <h3>\n            <v-icon size=\"large\" class=\"mr-1\">\n              mdi-calendar-range\n            </v-icon>\n            週次報告履歴<span v-if=\"memberName\">（{{ memberName }}さん）</span>\n          </h3>\n        </div>\n\n        <v-card class=\"mb-4\" rounded=\"lg\">\n          <v-card-title>\n            <v-icon icon=\"mdi-calendar-text-outline\" class=\"mr-1\"></v-icon>\n            期間の概要\n          </v-card-title>\n          <v-card-text v-if=\"totalWeeks\" class=\"px-6\">\n            <v-row>\n              <v-col cols=\"12\" sm=\"6\" md=\"3\">\n                <div class=\"text-subtitle-2 mb-1\">対象期間</div>\n                <div class=\"text-h6\">\n                  {{ formatWeekLabel(firstWeek) }} 〜 {{ formatWeekLabel(lastWeek) }}\n                </div>\n              </v-col>\n              <v-col cols=\"12\" sm=\"6\" md=\"2\">\n                <div class=\"text-subtitle-2 mb-1\">報告提出率</div>\n                <div class=\"text-h6\">\n                  {{ Math.round((submittedReports / totalWeeks) * 100) }}%\n                  <span class=\"text-body-2 text-medium-emphasis\">\n                    ({{ submittedReports }}/{{ totalWeeks }}週)\n                  </span>\n                </div>\n              </v-col>\n              <v-col cols=\"12\" sm=\"6\" md=\"2\">\n                <div class=\"text-subtitle-2 mb-1\">平均残業時間</div>\n                <div class=\"text-h6\">\n                  {{ averageOvertime.toFixed(1) }}\n                  <span class=\"text-body-2\">時間/週</span>\n                </div>\n              </v-col>\n              <v-col cols=\"12\" sm=\"6\" md=\"5\">\n                <div class=\"text-subtitle-2 mb-1\">最頻プロジェクト</div>\n                <div class=\"text-h6\">{{ mostFrequentProject || '該当なし' }}</div>\n              </v-col>\n            </v-row>\n          </v-card-text>\n        </v-card>\n\n        <ReportSummary\n          v-if=\"dataSize > 0\"\n          :member-uuid=\"props.memberUuid\"\n          class=\"mb-4\"\n        />\n\n        <v-card \n          v-if=\"dataSize > 0\"\n          class=\"my-4\"\n          rounded=\"lg\"\n        >\n          <v-card-title>\n            <v-icon icon=\"mdi-chart-line\" class=\"mr-1\"></v-icon>\n            評価・残業時間推移\n          </v-card-title>\n          <v-card-text>\n            <RatingLineChart\n              :chart-data=\"chartData\"\n              class=\"mt-2\"\n            />\n          </v-card-text>\n        </v-card>\n\n        <v-tabs\n          v-model=\"selectedWeekTab\"\n          class=\"mb-4\"\n        >\n          <v-tab\n            v-for=\"week in weekReports\"\n            :key=\"week.weekString\"\n            :value=\"week.weekString\"\n            class=\"text-body-1\"\n          >\n            {{ formatWeekLabel(week.weekString) }}\n          </v-tab>\n        </v-tabs>\n\n        <v-window v-model=\"selectedWeekTab\" class=\"elevation-4 rounded-lg\">\n          <v-window-item\n            v-for=\"week in weekReports\"\n            :key=\"week.weekString\"\n            :value=\"week.weekString\"\n          >\n            <v-card v-if=\"week.report\" class=\"pa-4\">\n              <template v-if=\"week.report.status !== 'none'\">\n                <v-row>\n                  <v-col cols=\"12\" md=\"5\">\n                    <div class=\"text-subtitle-1 font-weight-medium mb-2\">作業内容</div>\n                    <v-list dense class=\"bg-transparent pa-0\">\n                      <v-list-item\n                        v-for=\"(project, index) in week.report.projects\"\n                        :key=\"index\"\n                        class=\"px-2 py-1\"\n                      >\n                        <v-list-item-title>\n                          <v-icon small>mdi-folder-outline</v-icon>\n                          {{ project.name }}\n                        </v-list-item-title>\n                        <v-list-item-subtitle class=\"ml-6\">\n                          <ul class=\"work-items-list\">\n                            <li \n                              v-for=\"(item, itemIndex) in project.workItems\"\n                              :key=\"itemIndex\"\n                            >\n                              {{ item.content }}\n                            </li>\n                          </ul>\n                        </v-list-item-subtitle>\n                      </v-list-item>\n                    </v-list>\n\n                    <div v-if=\"week.report.overtimeHours >= 0\" class=\"mt-4\">\n                      <overtime-display :overtime-hours=\"week.report.overtimeHours\" />\n                    </div>\n                  </v-col>\n\n                  <v-col cols=\"12\" md=\"7\">\n                    <div class=\"text-subtitle-1 font-weight-medium mb-1\">\n                      振り返り（成果と課題）\n                    </div>\n                    <v-textarea\n                      v-model=\"week.report.issues\"\n                      readonly\n                      auto-grow\n                      rows=\"2\"\n                      hide-details\n                      variant=\"outlined\"\n                      class=\"small-text-area mb-4\"\n                    />\n\n                    <div class=\"text-subtitle-1 font-weight-medium mb-1\">\n                      次の目標、改善施策\n                    </div>\n                    <v-textarea\n                      v-model=\"week.report.improvements\"\n                      readonly\n                      auto-grow\n                      rows=\"2\"\n                      hide-details\n                      variant=\"outlined\"\n                      class=\"small-text-area mb-2\"\n                    />\n                  </v-col>\n                </v-row>\n              </template>\n              <v-alert\n                v-else\n                type=\"info\"\n                variant=\"tonal\"\n              >\n                この週の報告はありません\n              </v-alert>\n            </v-card>\n          </v-window-item>\n        </v-window>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n<script setup>\nimport { ref, onMounted, computed } from 'vue'\nimport { useCalendar } from '@/composables/useCalendar'\nimport { listMemberReports, getReport } from '@/services/reportService'\nimport { getMember } from '@/services/memberService'\nimport OvertimeDisplay from '@/components/OvertimeDisplay.vue'\nimport RatingLineChart from '@/components/chart/RatingLineChart.vue'\nimport ReportSummary from '@/components/ReportSummary.vue'\n\nconst props = defineProps({\n  memberUuid: {\n    type: String,\n    required: true\n  }\n})\n\nconst { getWeekJpText, getCurrentWeekString } = useCalendar()\n\nconst memberName = ref('')\nconst weekReports = ref([])\nconst selectedWeekTab = ref(null)\n\nconst formatWeekLabel = (weekString) => {\n  // 古い週から新しい週の順なので、0が5週前、4が先週となる\n  const index = weekReports.value.findIndex(report => report.weekString === weekString)\n  return getWeekJpText(-(5 - index))\n}\n\nconst fetchReports = async () => {\n  try {\n    const [memberData, reports, currReport] = await Promise.all([\n      getMember(props.memberUuid),\n      listMemberReports(props.memberUuid),\n      getReport(props.memberUuid, getCurrentWeekString())\n    ])\n\n    if (memberData) {\n      memberName.value = memberData.name\n    }\n\n    weekReports.value = reports.map(report => ({\n      weekString: report.weekString,\n      report: report\n    }))\n    if (currReport) {\n      weekReports.value.push({\n        weekString: currReport.weekString,\n        report: currReport\n      })\n    }\n\n    selectedWeekTab.value = weekReports.value[weekReports.value.length - 1].weekString // 最新の週を選択\n  } catch (error) {\n    console.error('Failed to fetch reports:', error)\n  }\n}\n\nconst dataSize = computed(() => weekReports.value.filter(w => w.report?.status !== 'none').length)\n\nconst chartData = computed(() => {\n  const labels = weekReports.value.map((week, index) => {\n    return getWeekJpText(-(5 - index))\n  })\n  return {\n    labels,\n    datasets: [\n      {\n        label: 'ストレス度',\n        data: weekReports.value.map(week => \n          week.report?.status === 'none' ? null : week.report?.rating?.stress || null\n        ),\n        borderColor: 'rgb(192, 75, 192)',\n        backgroundColor: 'rgba(192, 75, 192, 0.2)',\n        fill: true,\n        yAxisID: 'y'\n      },\n      {\n        label: 'タスク達成度',\n        data: weekReports.value.map(week => \n          week.report?.status === 'none' ? null : week.report?.rating?.achievement || null\n        ),\n        borderColor: 'rgb(75, 192, 192)',\n        backgroundColor: 'rgba(75, 192, 192, 0.2)',\n        fill: true,\n        yAxisID: 'y'\n      },\n      {\n        label: 'タスク難易度',\n        data: weekReports.value.map(week => \n          week.report?.status === 'none' ? null : week.report?.rating?.disability || null\n        ),\n        borderColor: 'rgb(255, 99, 132)',\n        backgroundColor: 'rgba(255, 99, 132, 0.2)',\n        fill: true,\n        yAxisID: 'y'\n      },\n      {\n        label: '残業時間',\n        data: weekReports.value.map(week => \n          week.report?.status === 'none' ? null : week.report?.overtimeHours ?? null\n        ),\n        borderColor: 'rgb(54, 162, 235)',\n        borderDash: [5, 3],\n        backgroundColor: 'rgba(54, 162, 235, 0.2)',\n        fill: false,\n        yAxisID: 'y1'\n      }\n    ]\n  }\n})\n\n// 統計情報の計算\nconst firstWeek = computed(() => weekReports.value[0]?.weekString)\nconst lastWeek = computed(() => weekReports.value[weekReports.value.length - 1]?.weekString)\nconst totalWeeks = computed(() => weekReports.value.length)\nconst submittedReports = computed(() => \n  weekReports.value.filter(w => w.report?.status !== 'none').length\n)\nconst averageOvertime = computed(() => {\n  const reports = weekReports.value.filter(w => \n    w.report?.status !== 'none' && \n    typeof w.report.overtimeHours === 'number'\n  )\n  if (!reports.length) return 0\n  return reports.reduce((sum, w) => sum + w.report.overtimeHours, 0) / reports.length\n})\nconst mostFrequentProject = computed(() => {\n  const projectCounts = {}\n  weekReports.value.forEach(week => {\n    week.report?.projects?.forEach(project => {\n      projectCounts[project.name] = (projectCounts[project.name] || 0) + 1\n    })\n  })\n  return Object.entries(projectCounts)\n    .sort(([, a], [, b]) => b - a)[0]?.[0]\n})\n\nonMounted(fetchReports)\n</script>\n\n<style scoped>\n.work-items-list {\n  list-style-type: disc;\n  padding-left: 20px;\n  margin: 4px 0;\n}\n</style>\n","import script from \"./MemberReports.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./MemberReports.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./MemberReports.vue?vue&type=style&index=0&id=4ea12dae&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4ea12dae\"]])\n\nexport default __exports__"],"names":["props","__props","chartRef","ref","chartInstance","getMaxOvertimeHours","datasets","overtimeDataset","find","d","yAxisID","maxHours","Math","ceil","max","data","overtimeStepSize","computed","value","chartOptions","responsive","maintainAspectRatio","plugins","legend","position","scales","y","type","min","ticks","stepSize","precision","callback","Number","isInteger","title","display","text","y1","grid","drawOnChartArea","afterDataLimits","scale","chartData","onMounted","Chart","options","watch","newData","updateChartInstance","chart","isTop3","deep","onBeforeUnmount","destroy","__exports__","loading","error","summary","insights","generateSummary","async","result","getWeeklyReportSummary","memberUuid","positive","length","negative","err","message","formatScore","score","toFixed","getScoreColor","getScoreDescription","isPositive","getWeekJpText","getCurrentWeekString","useCalendar","memberName","weekReports","selectedWeekTab","formatWeekLabel","weekString","index","findIndex","report","fetchReports","memberData","reports","currReport","Promise","all","getMember","listMemberReports","getReport","name","map","push","dataSize","filter","w","status","labels","week","label","rating","stress","borderColor","backgroundColor","fill","achievement","disability","overtimeHours","borderDash","firstWeek","lastWeek","totalWeeks","submittedReports","averageOvertime","reduce","sum","mostFrequentProject","projectCounts","forEach","projects","project","Object","entries","sort","a","b"],"sourceRoot":""}